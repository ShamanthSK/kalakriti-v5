/*! For license information please see main.f0c30f4c.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var x=Array.isArray,k=Object.prototype.hasOwnProperty,E={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,r){var i,s={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)k.call(t,i)&&!_.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:E.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function C(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===s?"."+T(l,0):s,x(a)?(i="",null!=e&&(i=e.replace(I,"$&/")+"/"),C(a,t,i,"",function(e){return e})):null!=a&&(S(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(I,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",x(e))for(var c=0;c<e.length;c++){var u=s+T(o=e[c],c);l+=C(o,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=C(o=o.value,t,i,u=s+T(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",function(e){return t.call(n,e,i++)}),r}function j(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},R={transition:null},P={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:R,ReactCurrentOwner:E};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.act=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=E.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k.call(t,c)&&!_.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=N,t.createFactory=function(e){var t=N.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:j}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,R(k);else{var t=r(u);null!==t&&P(x,t.startTime-e)}}function k(e,n){m=!1,g&&(g=!1,v(S),S=-1),p=!0;var s=f;try{for(w(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!C());){var a=d.callback;if("function"===typeof a){d.callback=null,f=d.priorityLevel;var o=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?d.callback=o:d===r(c)&&i(c),w(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&P(x,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,_=!1,N=null,S=-1,I=5,T=-1;function C(){return!(t.unstable_now()-T<I)}function A(){if(null!==N){var e=t.unstable_now();T=e;var n=!0;try{n=N(!0,e)}finally{n?E():(_=!1,N=null)}}else _=!1}if("function"===typeof b)E=function(){b(A)};else if("undefined"!==typeof MessageChannel){var j=new MessageChannel,D=j.port2;j.port1.onmessage=A,E=function(){D.postMessage(null)}}else E=function(){y(A,0)};function R(e){N=e,_||(_=!0,E())}function P(e,n){S=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,R(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(v(S),S=-1):g=!0,P(x,s-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,R(k))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),k=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),I=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var L,M=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(pi){var r=pi}Reflect.construct(e,[],t)}else{try{t.call()}catch(pi){r=pi}e.call(t.prototype)}else{try{throw Error()}catch(pi){r=pi}e()}}catch(pi){if(pi&&r&&"string"===typeof pi.stack){for(var i=pi.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case k:return"Portal";case N:return"Profiler";case _:return"StrictMode";case C:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case j:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function $(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(jl){return e.body}}function Q(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){X(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function se(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Ee=null,_e=null;function Ne(e){if(e=xi(e)){if("function"!==typeof ke)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),ke(e.stateNode,e.type,t))}}function Se(e){Ee?_e?_e.push(e):_e=[e]:Ee=e}function Ie(){if(Ee){var e=Ee,t=_e;if(_e=Ee=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function Te(e,t){return e(t)}function Ce(){}var Ae=!1;function je(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Te(e,t,n)}finally{Ae=!1,(null!==Ee||null!==_e)&&(Ce(),Ie())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Re=!1;if(u)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(ue){Re=!1}function Oe(e,t,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Me=null,Fe=!1,Ue=null,Ve={onError:function(e){Le=!0,Me=e}};function ze(e,t,n,r,i,s,a,o,l){Le=!1,Me=null,Oe.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(Be(e)!==e)throw Error(s(188))}function He(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return qe(i),e;if(a===r)return qe(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),null!==e?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=ht(o):0!==(s&=a)&&(r=ht(s))}else 0!==(a=n&~i)?r=ht(a):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,kt,Et,_t,Nt,St=!1,It=[],Tt=null,Ct=null,At=null,jt=new Map,Dt=new Map,Rt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":jt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Lt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=xi(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=wi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=$e(n)))return e.blockedOn=t,void Nt(e.priority,function(){Et(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xi(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){St=!1,null!==Tt&&Ft(Tt)&&(Tt=null),null!==Ct&&Ft(Ct)&&(Ct=null),null!==At&&Ft(At)&&(At=null),jt.forEach(Ut),Dt.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<It.length){zt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&zt(Tt,e),null!==Ct&&zt(Ct,e),null!==At&&zt(At,e),jt.forEach(t),Dt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Rt.shift()}var $t=w.ReactCurrentBatchConfig,qt=!0;function Ht(e,t,n,r){var i=bt,s=$t.transition;$t.transition=null;try{bt=1,Kt(e,t,n,r)}finally{bt=i,$t.transition=s}}function Wt(e,t,n,r){var i=bt,s=$t.transition;$t.transition=null;try{bt=4,Kt(e,t,n,r)}finally{bt=i,$t.transition=s}}function Kt(e,t,n,r){if(qt){var i=Qt(e,t,n,r);if(null===i)qr(e,t,r,Gt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=Lt(Tt,e,t,n,r,i),!0;case"dragenter":return Ct=Lt(Ct,e,t,n,r,i),!0;case"mouseover":return At=Lt(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return jt.set(s,Lt(jt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Dt.set(s,Lt(Dt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var s=xi(i);if(null!==s&&xt(s),null===(s=Qt(e,t,n,r))&&qr(e,t,r,Gt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Gt=null;function Qt(e,t,n,r){if(Gt=null,null!==(e=wi(e=xe(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=$e(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=M({},cn,{view:0,detail:0}),dn=sn(hn),fn=M({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=sn(fn),mn=sn(M({},fn,{dataTransfer:0})),gn=sn(M({},hn,{relatedTarget:0})),yn=sn(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(vn),wn=sn(M({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Nn(){return _n}var Sn=M({},hn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=sn(Sn),Tn=sn(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=sn(M({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nn})),An=sn(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),jn=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=sn(jn),Rn=[9,13,27,32],Pn=u&&"CompositionEvent"in window,On=null;u&&"documentMode"in document&&(On=document.documentMode);var Ln=u&&"TextEvent"in window&&!On,Mn=u&&(!Pn||On&&8<On&&11>=On),Fn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var $n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!$n[e.type]:"textarea"===t}function Hn(e,t,n,r){Se(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Kn=null;function Gn(e){Fr(e,0)}function Qn(e){if(K(ki(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Kn=Wn=null)}function nr(e){if("value"===e.propertyName&&Qn(Kn)){var t=[];Hn(t,Kn,e,xe(e)),je(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Kn)}function sr(e,t){if("click"===e)return Qn(t)}function ar(e,t){if("input"===e||"change"===e)return Qn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!or(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var a=ur(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==G(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Wr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Er={},_r={};function Nr(e){if(Er[e])return Er[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in _r)return Er[e]=n[t];return e}u&&(_r=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Sr=Nr("animationend"),Ir=Nr("animationiteration"),Tr=Nr("animationstart"),Cr=Nr("transitionend"),Ar=new Map,jr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Ar.set(e,t),l(t,[e])}for(var Rr=0;Rr<jr.length;Rr++){var Pr=jr[Rr];Dr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Dr(Sr,"onAnimationEnd"),Dr(Ir,"onAnimationIteration"),Dr(Tr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Cr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,o,l,c){if(ze.apply(this,arguments),Le){if(!Le)throw Error(s(198));var u=Me;Le=!1,Me=null,Fe||(Fe=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,o,c),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,o,c),s=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[yi];void 0===n&&(n=t[yi]=new Set);var r=e+"__bubble";n.has(r)||($r(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),$r(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,a.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||Vr(t,!1,e),Vr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function $r(e,t,n,r){switch(Yt(t)){case 1:var i=Ht;break;case 4:i=Wt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=wi(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}je(function(){var r=s,i=xe(n),a=[];e:{var o=Ar.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=In;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Cn;break;case Sr:case Ir:case Tr:l=yn;break;case Cr:l=An;break;case"scroll":l=dn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=De(p,d))&&u.push(Hr(p,m,f)))),h)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,i),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!wi(c)&&!c[gi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?wi(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?o:ki(l),f=null==c?o:ki(c),(o=new u(m,p+"leave",l,n,i)).target=h,o.relatedTarget=f,m=null,wi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Kr(f))p++;for(f=0,m=d;m;m=Kr(m))f++;for(;0<p-f;)u=Kr(u),p--;for(;0<f-p;)d=Kr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Kr(u),d=Kr(d)}u=null}else u=null;null!==l&&Gr(a,o,l,u,!1),null!==c&&null!==h&&Gr(a,h,c,u,!0)}if("select"===(l=(o=r?ki(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Yn;else if(qn(o))if(Xn)g=ar;else{g=ir;var y=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=sr);switch(g&&(g=g(e,r))?Hn(a,g,n,i):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?ki(r):window,e){case"focusin":(qn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(a,n,i)}var v;if(Pn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?Vn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(y=Wr(r,b)).length&&(b=new wn(b,e,null,n,i),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=zn(n))&&(b.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Pn&&Vn(e,t)?(e=en(),Zt=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}Fr(a,t)})}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=De(e,n))&&r.unshift(Hr(e,s,i)),null!=(s=De(e,t))&&r.push(Hr(e,s,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=De(n,s))&&a.unshift(Hr(n,l,o)):i||null!=(l=De(n,s))&&a.push(Hr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function hi(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),fi="__reactFiber$"+di,mi="__reactProps$"+di,gi="__reactContainer$"+di,yi="__reactEvents$"+di,vi="__reactListeners$"+di,bi="__reactHandles$"+di;function wi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[gi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=hi(e);null!==e;){if(n=e[fi])return n;e=hi(e)}return t}n=(e=n).parentNode}return null}function xi(e){return!(e=e[fi]||e[gi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ki(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[mi]||null}var Ni=[],Si=-1;function Ti(e){return{current:e}}function Ci(e){0>Si||(e.current=Ni[Si],Ni[Si]=null,Si--)}function Ai(e,t){Si++,Ni[Si]=e.current,e.current=t}var ji={},Di=Ti(ji),Ri=Ti(!1),Pi=ji;function Oi(e,t){var n=e.type.contextTypes;if(!n)return ji;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Li(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Mi(){Ci(Ri),Ci(Di)}function Fi(e,t,n){if(Di.current!==ji)throw Error(s(168));Ai(Di,t),Ai(Ri,n)}function Ui(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,$(e)||"Unknown",i));return M({},n,r)}function Vi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ji,Pi=Di.current,Ai(Di,e),Ai(Ri,Ri.current),!0}function zi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Ui(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,Ci(Ri),Ci(Di),Ai(Di,e)):Ci(Ri),Ai(Ri,n)}var Bi=null,$i=!1,qi=!1;function Hi(e){null===Bi?Bi=[e]:Bi.push(e)}function Wi(){if(!qi&&null!==Bi){qi=!0;var e=0,t=bt;try{var n=Bi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Bi=null,$i=!1}catch(i){throw null!==Bi&&(Bi=Bi.slice(e+1)),Ke(Ze,Wi),i}finally{bt=t,qi=!1}}return null}var Ki=[],Gi=0,Qi=null,Yi=0,Xi=[],Ji=0,Zi=null,es=1,ts="";function ns(e,t){Ki[Gi++]=Yi,Ki[Gi++]=Qi,Qi=e,Yi=t}function rs(e,t,n){Xi[Ji++]=es,Xi[Ji++]=ts,Xi[Ji++]=Zi,Zi=e;var r=es;e=ts;var i=32-at(r)-1;r&=~(1<<i),n+=1;var s=32-at(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,es=1<<32-at(t)+i|n<<i|r,ts=s+e}else es=1<<s|n<<i|r,ts=e}function is(e){null!==e.return&&(ns(e,1),rs(e,1,0))}function ss(e){for(;e===Qi;)Qi=Ki[--Gi],Ki[Gi]=null,Yi=Ki[--Gi],Ki[Gi]=null;for(;e===Zi;)Zi=Xi[--Ji],Xi[Ji]=null,ts=Xi[--Ji],Xi[Ji]=null,es=Xi[--Ji],Xi[Ji]=null}var as=null,os=null,ls=!1,cs=null;function us(e,t){var n=Mc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function hs(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,as=e,os=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,as=e,os=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Zi?{id:es,overflow:ts}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Mc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,as=e,os=null,!0);default:return!1}}function ds(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function fs(e){if(ls){var t=os;if(t){var n=t;if(!hs(e,t)){if(ds(e))throw Error(s(418));t=ci(n.nextSibling);var r=as;t&&hs(e,t)?us(r,n):(e.flags=-4097&e.flags|2,ls=!1,as=e)}}else{if(ds(e))throw Error(s(418));e.flags=-4097&e.flags|2,ls=!1,as=e}}}function ps(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;as=e}function ms(e){if(e!==as)return!1;if(!ls)return ps(e),ls=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=os)){if(ds(e))throw gs(),Error(s(418));for(;t;)us(e,t),t=ci(t.nextSibling)}if(ps(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){os=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}os=null}}else os=as?ci(e.stateNode.nextSibling):null;return!0}function gs(){for(var e=os;e;)e=ci(e.nextSibling)}function ys(){os=as=null,ls=!1}function vs(e){null===cs?cs=[e]:cs.push(e)}var bs=w.ReactCurrentBatchConfig;function ws(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function xs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ks(e){return(0,e._init)(e._payload)}function Es(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Uc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=$c(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===E?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===D&&ks(s)===t.type)?((r=i(t,n.props)).ref=ws(e,t,n),r.return=e,r):((r=Vc(n.type,n.key,n.props,null,e.mode,r)).ref=ws(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=qc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=zc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=$c(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Vc(t.type,t.key,t.props,null,e.mode,n)).ref=ws(e,null,t),n.return=e,n;case k:return(t=qc(t,e.mode,n)).return=e,t;case D:return d(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=zc(t,e.mode,n,null)).return=e,t;xs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case k:return n.key===i?u(e,t,n,r):null;case D:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||O(n))return null!==i?null:h(e,t,n,r,null);xs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case k:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||O(r))return h(t,e=e.get(n)||null,r,i,null);xs(t,r)}return null}function m(i,s,o,l){for(var c=null,u=null,h=s,m=s=0,g=null;null!==h&&m<o.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,o[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=a(y,s,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===o.length)return n(i,h),ls&&ns(i,m),c;if(null===h){for(;m<o.length;m++)null!==(h=d(i,o[m],l))&&(s=a(h,s,m),null===u?c=h:u.sibling=h,u=h);return ls&&ns(i,m),c}for(h=r(i,h);m<o.length;m++)null!==(g=p(h,i,m,o[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=a(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach(function(e){return t(i,e)}),ls&&ns(i,m),c}function g(i,o,l,c){var u=O(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,m=o,g=o=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),o=a(b,o,g),null===h?u=b:h.sibling=b,h=b,m=y}if(v.done)return n(i,m),ls&&ns(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,c))&&(o=a(v,o,g),null===h?u=v:h.sibling=v,h=v);return ls&&ns(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=a(v,o,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach(function(e){return t(i,e)}),ls&&ns(i,g),u}return function e(r,s,a,l){if("object"===typeof a&&null!==a&&a.type===E&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:e:{for(var c=a.key,u=s;null!==u;){if(u.key===c){if((c=a.type)===E){if(7===u.tag){n(r,u.sibling),(s=i(u,a.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&ks(c)===u.type){n(r,u.sibling),(s=i(u,a.props)).ref=ws(r,u,a),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===E?((s=zc(a.props.children,r.mode,l,a.key)).return=r,r=s):((l=Vc(a.type,a.key,a.props,null,r.mode,l)).ref=ws(r,s,a),l.return=r,r=l)}return o(r);case k:e:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(r,s.sibling),(s=i(s,a.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=qc(a,r.mode,l)).return=r,r=s}return o(r);case D:return e(r,s,(u=a._init)(a._payload),l)}if(te(a))return m(r,s,a,l);if(O(a))return g(r,s,a,l);xs(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,a)).return=r,r=s):(n(r,s),(s=$c(a,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var _s=Es(!0),Ns=Es(!1),Ss=Ti(null),Is=null,Ts=null,Cs=null;function As(){Cs=Ts=Is=null}function js(e){var t=Ss.current;Ci(Ss),e._currentValue=t}function Ds(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Rs(e,t){Is=e,Cs=Ts=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_o=!0),e.firstContext=null)}function Ps(e){var t=e._currentValue;if(Cs!==e)if(e={context:e,memoizedValue:t,next:null},null===Ts){if(null===Is)throw Error(s(308));Ts=e,Is.dependencies={lanes:0,firstContext:e}}else Ts=Ts.next=e;return t}var Os=null;function Ls(e){null===Os?Os=[e]:Os.push(e)}function Ms(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ls(t)):(n.next=i.next,i.next=n),t.interleaved=n,Fs(e,r)}function Fs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Us=!1;function Vs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function $s(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Pl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Fs(e,n)}return null===(i=r.interleaved)?(t.next=t,Ls(r)):(t.next=i.next,i.next=t),r.interleaved=t,Fs(e,n)}function qs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Hs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ws(e,t,n,r){var i=e.updateQueue;Us=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(a=0,u=c=l=null,o=s;;){var d=o.lane,f=o.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=M({},h,d);break e;case 2:Us=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[o]:d.push(o))}else f={eventTime:f,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,a|=d;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(d=o).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Bl|=a,e.lanes=a,e.memoizedState=h}}function Ks(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Gs={},Qs=Ti(Gs),Xs=Ti(Gs),Js=Ti(Gs);function Zs(e){if(e===Gs)throw Error(s(174));return e}function ea(e,t){switch(Ai(Js,t),Ai(Xs,e),Ai(Qs,Gs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ci(Qs),Ai(Qs,t)}function ta(){Ci(Qs),Ci(Xs),Ci(Js)}function na(e){Zs(Js.current);var t=Zs(Qs.current),n=le(t,e.type);t!==n&&(Ai(Xs,e),Ai(Qs,n))}function ra(e){Xs.current===e&&(Ci(Qs),Ci(Xs))}var ia=Ti(0);function sa(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var aa=[];function oa(){for(var e=0;e<aa.length;e++)aa[e]._workInProgressVersionPrimary=null;aa.length=0}var la=w.ReactCurrentDispatcher,ca=w.ReactCurrentBatchConfig,ua=0,ha=null,da=null,fa=null,pa=!1,ma=!1,ga=0,ya=0;function va(){throw Error(s(321))}function ba(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function wa(e,t,n,r,i,a){if(ua=a,ha=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,la.current=null===e||null===e.memoizedState?ro:io,e=n(r,i),ma){a=0;do{if(ma=!1,ga=0,25<=a)throw Error(s(301));a+=1,fa=da=null,t.updateQueue=null,la.current=so,e=n(r,i)}while(ma)}if(la.current=no,t=null!==da&&null!==da.next,ua=0,fa=da=ha=null,pa=!1,t)throw Error(s(300));return e}function xa(){var e=0!==ga;return ga=0,e}function ka(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===fa?ha.memoizedState=fa=e:fa=fa.next=e,fa}function Ea(){if(null===da){var e=ha.alternate;e=null!==e?e.memoizedState:null}else e=da.next;var t=null===fa?ha.memoizedState:fa.next;if(null!==t)fa=t,da=e;else{if(null===e)throw Error(s(310));e={memoizedState:(da=e).memoizedState,baseState:da.baseState,baseQueue:da.baseQueue,queue:da.queue,next:null},null===fa?ha.memoizedState=fa=e:fa=fa.next=e}return fa}function _a(e,t){return"function"===typeof t?t(e):t}function Na(e){var t=Ea(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=da,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=o=null,c=null,u=a;do{var h=u.lane;if((ua&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,o=r):c=c.next=d,ha.lanes|=h,Bl|=h}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(_o=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,ha.lanes|=a,Bl|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Sa(e){var t=Ea(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);or(a,t.memoizedState)||(_o=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Ia(){}function Ta(e,t){var n=ha,r=Ea(),i=t(),a=!or(r.memoizedState,i);if(a&&(r.memoizedState=i,_o=!0),r=r.queue,Va(ja.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==fa&&1&fa.memoizedState.tag){if(n.flags|=2048,Oa(9,Aa.bind(null,n,r,i,t),void 0,null),null===Ol)throw Error(s(349));0!==(30&ua)||Ca(n,t,i)}return i}function Ca(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ha.updateQueue)?(t={lastEffect:null,stores:null},ha.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Aa(e,t,n,r){t.value=n,t.getSnapshot=r,Da(t)&&Ra(e)}function ja(e,t,n){return n(function(){Da(t)&&Ra(e)})}function Da(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Ra(e){var t=Fs(e,1);null!==t&&lc(t,e,1,-1)}function Pa(e){var t=ka();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:e},t.queue=e,e=e.dispatch=Ja.bind(null,ha,e),[t.memoizedState,e]}function Oa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ha.updateQueue)?(t={lastEffect:null,stores:null},ha.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function La(){return Ea().memoizedState}function Ma(e,t,n,r){var i=ka();ha.flags|=e,i.memoizedState=Oa(1|t,n,void 0,void 0===r?null:r)}function Fa(e,t,n,r){var i=Ea();r=void 0===r?null:r;var s=void 0;if(null!==da){var a=da.memoizedState;if(s=a.destroy,null!==r&&ba(r,a.deps))return void(i.memoizedState=Oa(t,n,s,r))}ha.flags|=e,i.memoizedState=Oa(1|t,n,s,r)}function Ua(e,t){return Ma(8390656,8,e,t)}function Va(e,t){return Fa(2048,8,e,t)}function za(e,t){return Fa(4,2,e,t)}function Ba(e,t){return Fa(4,4,e,t)}function $a(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function qa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Fa(4,4,$a.bind(null,t,e),n)}function Ha(){}function Wa(e,t){var n=Ea();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ba(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ka(e,t){var n=Ea();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ba(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ga(e,t,n){return 0===(21&ua)?(e.baseState&&(e.baseState=!1,_o=!0),e.memoizedState=n):(or(n,t)||(n=mt(),ha.lanes|=n,Bl|=n,e.baseState=!0),t)}function Qa(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ca.transition;ca.transition={};try{e(!1),t()}finally{bt=n,ca.transition=r}}function Ya(){return Ea().memoizedState}function Xa(e,t,n){var r=oc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Za(e))eo(t,n);else if(null!==(n=Ms(e,t,n,r))){lc(n,e,r,ac()),to(n,t,r)}}function Ja(e,t,n){var r=oc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Za(e))eo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(i.next=i,Ls(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(pi){}null!==(n=Ms(e,t,i,r))&&(lc(n,e,r,i=ac()),to(n,t,r))}}function Za(e){var t=e.alternate;return e===ha||null!==t&&t===ha}function eo(e,t){ma=pa=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function to(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var no={readContext:Ps,useCallback:va,useContext:va,useEffect:va,useImperativeHandle:va,useInsertionEffect:va,useLayoutEffect:va,useMemo:va,useReducer:va,useRef:va,useState:va,useDebugValue:va,useDeferredValue:va,useTransition:va,useMutableSource:va,useSyncExternalStore:va,useId:va,unstable_isNewReconciler:!1},ro={readContext:Ps,useCallback:function(e,t){return ka().memoizedState=[e,void 0===t?null:t],e},useContext:Ps,useEffect:Ua,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ma(4194308,4,$a.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ma(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ma(4,2,e,t)},useMemo:function(e,t){var n=ka();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ka();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Xa.bind(null,ha,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ka().memoizedState=e},useState:Pa,useDebugValue:Ha,useDeferredValue:function(e){return ka().memoizedState=e},useTransition:function(){var e=Pa(!1),t=e[0];return e=Qa.bind(null,e[1]),ka().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ha,i=ka();if(ls){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Ol)throw Error(s(349));0!==(30&ua)||Ca(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Ua(ja.bind(null,r,a,e),[e]),r.flags|=2048,Oa(9,Aa.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ka(),t=Ol.identifierPrefix;if(ls){var n=ts;t=":"+t+"R"+(n=(es&~(1<<32-at(es)-1)).toString(32)+n),0<(n=ga++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ya++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},io={readContext:Ps,useCallback:Wa,useContext:Ps,useEffect:Va,useImperativeHandle:qa,useInsertionEffect:za,useLayoutEffect:Ba,useMemo:Ka,useReducer:Na,useRef:La,useState:function(){return Na(_a)},useDebugValue:Ha,useDeferredValue:function(e){return Ga(Ea(),da.memoizedState,e)},useTransition:function(){return[Na(_a)[0],Ea().memoizedState]},useMutableSource:Ia,useSyncExternalStore:Ta,useId:Ya,unstable_isNewReconciler:!1},so={readContext:Ps,useCallback:Wa,useContext:Ps,useEffect:Va,useImperativeHandle:qa,useInsertionEffect:za,useLayoutEffect:Ba,useMemo:Ka,useReducer:Sa,useRef:La,useState:function(){return Sa(_a)},useDebugValue:Ha,useDeferredValue:function(e){var t=Ea();return null===da?t.memoizedState=e:Ga(t,da.memoizedState,e)},useTransition:function(){return[Sa(_a)[0],Ea().memoizedState]},useMutableSource:Ia,useSyncExternalStore:Ta,useId:Ya,unstable_isNewReconciler:!1};function ao(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function oo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var lo={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ac(),i=oc(e),s=Bs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=$s(e,s,i))&&(lc(t,e,i,r),qs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ac(),i=oc(e),s=Bs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=$s(e,s,i))&&(lc(t,e,i,r),qs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ac(),r=oc(e),i=Bs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=$s(e,i,r))&&(lc(t,e,r,n),qs(t,e,r))}};function co(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function uo(e,t,n){var r=!1,i=ji,s=t.contextType;return"object"===typeof s&&null!==s?s=Ps(s):(i=Li(t)?Pi:Di.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Oi(e,i):ji),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=lo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ho(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&lo.enqueueReplaceState(t,t.state,null)}function fo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Vs(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ps(s):(s=Li(t)?Pi:Di.current,i.context=Oi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(oo(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&lo.enqueueReplaceState(i,i.state,null),Ws(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function po(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function mo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function go(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var yo="function"===typeof WeakMap?WeakMap:Map;function vo(e,t,n){(n=Bs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Yl||(Yl=!0,Xl=r),go(0,t)},n}function bo(e,t,n){(n=Bs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){go(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){go(0,t),"function"!==typeof r&&(null===Jl?Jl=new Set([this]):Jl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function wo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new yo;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=jc.bind(null,e,t,n),t.then(e,e))}function xo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ko(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Bs(-1,1)).tag=2,$s(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var Eo=w.ReactCurrentOwner,_o=!1;function No(e,t,n,r){t.child=null===e?Ns(t,null,n,r):_s(t,e.child,n,r)}function So(e,t,n,r,i){n=n.render;var s=t.ref;return Rs(t,i),r=wa(e,t,n,r,s,i),n=xa(),null===e||_o?(ls&&n&&is(t),t.flags|=1,No(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Qo(e,t,i))}function Io(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Fc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Vc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,To(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Qo(e,t,i)}return t.flags|=1,(e=Uc(s,r)).ref=t.ref,e.return=t,t.child=e}function To(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(_o=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Qo(e,t,i);0!==(131072&e.flags)&&(_o=!0)}}return jo(e,t,n,r,i)}function Co(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ai(Ul,Fl),Fl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ai(Ul,Fl),Fl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ai(Ul,Fl),Fl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ai(Ul,Fl),Fl|=r;return No(e,t,i,n),t.child}function Ao(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function jo(e,t,n,r,i){var s=Li(n)?Pi:Di.current;return s=Oi(t,s),Rs(t,i),n=wa(e,t,n,r,s,i),r=xa(),null===e||_o?(ls&&r&&is(t),t.flags|=1,No(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Qo(e,t,i))}function Do(e,t,n,r,i){if(Li(n)){var s=!0;Vi(t)}else s=!1;if(Rs(t,i),null===t.stateNode)Go(e,t),uo(t,n,r),fo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ps(c):c=Oi(t,c=Li(n)?Pi:Di.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&ho(t,a,r,c),Us=!1;var d=t.memoizedState;a.state=d,Ws(t,r,a,i),l=t.memoizedState,o!==r||d!==l||Ri.current||Us?("function"===typeof u&&(oo(t,n,u,r),l=t.memoizedState),(o=Us||co(t,n,o,r,d,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,zs(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:ao(t.type,o),a.props=c,h=t.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ps(l):l=Oi(t,l=Li(n)?Pi:Di.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==h||d!==l)&&ho(t,a,r,l),Us=!1,d=t.memoizedState,a.state=d,Ws(t,r,a,i);var p=t.memoizedState;o!==h||d!==p||Ri.current||Us?("function"===typeof f&&(oo(t,n,f,r),p=t.memoizedState),(c=Us||co(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Ro(e,t,n,r,s,i)}function Ro(e,t,n,r,i,s){Ao(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&zi(t,n,!1),Qo(e,t,s);r=t.stateNode,Eo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=_s(t,e.child,null,s),t.child=_s(t,null,o,s)):No(e,t,o,s),t.memoizedState=r.state,i&&zi(t,n,!0),t.child}function Po(e){var t=e.stateNode;t.pendingContext?Fi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Fi(0,t.context,!1),ea(e,t.containerInfo)}function Oo(e,t,n,r,i){return ys(),vs(i),t.flags|=256,No(e,t,n,r),t.child}var Lo,Mo,Fo,Uo,Vo={dehydrated:null,treeContext:null,retryLane:0};function zo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Bo(e,t,n){var r,i=t.pendingProps,a=ia.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ai(ia,1&a),null===e)return fs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Bc(l,i,0,null),e=zc(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=zo(n),t.memoizedState=Vo,e):$o(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,o){if(n)return 256&t.flags?(t.flags&=-257,qo(e,t,o,r=mo(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Bc({mode:"visible",children:r.children},i,0,null),(a=zc(a,i,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&_s(t,e.child,null,o),t.child.memoizedState=zo(o),t.memoizedState=Vo,a);if(0===(1&t.mode))return qo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,qo(e,t,o,r=mo(a=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),_o||l){if(null!==(r=Ol)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Fs(e,i),lc(r,e,i,-1))}return xc(),qo(e,t,o,r=mo(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Rc.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,os=ci(i.nextSibling),as=t,ls=!0,cs=null,null!==e&&(Xi[Ji++]=es,Xi[Ji++]=ts,Xi[Ji++]=Zi,es=e.id,ts=e.overflow,Zi=t),t=$o(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(o){o=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Uc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Uc(r,o):(o=zc(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?zo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Vo,i}return e=(o=e.child).sibling,i=Uc(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function $o(e,t){return(t=Bc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function qo(e,t,n,r){return null!==r&&vs(r),_s(t,e.child,null,n),(e=$o(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ho(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ds(e.return,t,n)}function Wo(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ko(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(No(e,t,r.children,n),0!==(2&(r=ia.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ho(e,n,t);else if(19===e.tag)Ho(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ai(ia,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===sa(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Wo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===sa(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Wo(t,!0,n,null,s);break;case"together":Wo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Go(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Bl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Uc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Uc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Yo(e,t){if(!ls)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Jo(e,t,n){var r=t.pendingProps;switch(ss(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xo(t),null;case 1:case 17:return Li(t.type)&&Mi(),Xo(t),null;case 3:return r=t.stateNode,ta(),Ci(Ri),Ci(Di),oa(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ms(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==cs&&(dc(cs),cs=null))),Mo(e,t),Xo(t),null;case 5:ra(t);var i=Zs(Js.current);if(n=t.type,null!==e&&null!=t.stateNode)Fo(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Xo(t),null}if(e=Zs(Qs.current),ms(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[fi]=t,r[mi]=a,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Or.length;i++)Ur(Or[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,a),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ur("invalid",r);break;case"textarea":ie(r,a),Ur("invalid",r)}for(var l in ve(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":W(r),Z(r,a,!0);break;case"textarea":W(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[fi]=t,e[mi]=r,Lo(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Or.length;i++)Ur(Or[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Y(e,r),i=Q(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(a in ve(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Ur("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Xo(t),null;case 6:if(e&&null!=t.stateNode)Uo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Zs(Js.current),Zs(Qs.current),ms(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(a=r.nodeValue!==n)&&null!==(e=as))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Xo(t),null;case 13:if(Ci(ia),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ls&&null!==os&&0!==(1&t.mode)&&0===(128&t.flags))gs(),ys(),t.flags|=98560,a=!1;else if(a=ms(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[fi]=t}else ys(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Xo(t),a=!1}else null!==cs&&(dc(cs),cs=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ia.current)?0===Vl&&(Vl=3):xc())),null!==t.updateQueue&&(t.flags|=4),Xo(t),null);case 4:return ta(),Mo(e,t),null===e&&Br(t.stateNode.containerInfo),Xo(t),null;case 10:return js(t.type._context),Xo(t),null;case 19:if(Ci(ia),null===(a=t.memoizedState))return Xo(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Yo(a,!1);else{if(0!==Vl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=sa(e))){for(t.flags|=128,Yo(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ai(ia,1&ia.current|2),t.child}e=e.sibling}null!==a.tail&&Xe()>Gl&&(t.flags|=128,r=!0,Yo(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=sa(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Yo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!ls)return Xo(t),null}else 2*Xe()-a.renderingStartTime>Gl&&1073741824!==n&&(t.flags|=128,r=!0,Yo(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xe(),t.sibling=null,n=ia.current,Ai(ia,r?1&n|2:1&n),t):(Xo(t),null);case 22:case 23:return yc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Fl)&&(Xo(t),6&t.subtreeFlags&&(t.flags|=8192)):Xo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Zo(e,t){switch(ss(t),t.tag){case 1:return Li(t.type)&&Mi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ta(),Ci(Ri),Ci(Di),oa(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ra(t),null;case 13:if(Ci(ia),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ys()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ci(ia),null;case 4:return ta(),null;case 10:return js(t.type._context),null;case 22:case 23:return yc(),null;default:return null}}Lo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Mo=function(){},Fo=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Zs(Qs.current);var s,a=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),a=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Uo=function(e,t,n,r){n!==r&&(t.flags|=4)};var el=!1,tl=!1,nl="function"===typeof WeakSet?WeakSet:Set,rl=null;function il(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ac(e,t,r)}else n.current=null}function sl(e,t,n){try{n()}catch(r){Ac(e,t,r)}}var al=!1;function ol(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&sl(t,n,s)}i=i.next}while(i!==r)}}function ll(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function cl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ul(e){var t=e.alternate;null!==t&&(e.alternate=null,ul(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[mi],delete t[yi],delete t[vi],delete t[bi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function hl(e){return 5===e.tag||3===e.tag||4===e.tag}function dl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||hl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function fl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(fl(e,t,n),e=e.sibling;null!==e;)fl(e,t,n),e=e.sibling}function pl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(pl(e,t,n),e=e.sibling;null!==e;)pl(e,t,n),e=e.sibling}var ml=null,gl=!1;function yl(e,t,n){for(n=n.child;null!==n;)vl(e,t,n),n=n.sibling}function vl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:tl||il(n,t);case 6:var r=ml,i=gl;ml=null,yl(e,t,n),gl=i,null!==(ml=r)&&(gl?(e=ml,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ml.removeChild(n.stateNode));break;case 18:null!==ml&&(gl?(e=ml,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(ml,n.stateNode));break;case 4:r=ml,i=gl,ml=n.stateNode.containerInfo,gl=!0,yl(e,t,n),ml=r,gl=i;break;case 0:case 11:case 14:case 15:if(!tl&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&sl(n,t,a),i=i.next}while(i!==r)}yl(e,t,n);break;case 1:if(!tl&&(il(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Ac(n,t,o)}yl(e,t,n);break;case 21:yl(e,t,n);break;case 22:1&n.mode?(tl=(r=tl)||null!==n.memoizedState,yl(e,t,n),tl=r):yl(e,t,n);break;default:yl(e,t,n)}}function bl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new nl),t.forEach(function(t){var r=Pc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function wl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ml=l.stateNode,gl=!1;break e;case 3:case 4:ml=l.stateNode.containerInfo,gl=!0;break e}l=l.return}if(null===ml)throw Error(s(160));vl(a,o,i),ml=null,gl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(pi){Ac(i,t,pi)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)xl(t,e),t=t.sibling}function xl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(wl(t,e),kl(e),4&r){try{ol(3,e,e.return),ll(3,e)}catch(g){Ac(e,e.return,g)}try{ol(5,e,e.return)}catch(g){Ac(e,e.return,g)}}break;case 1:wl(t,e),kl(e),512&r&&null!==n&&il(n,n.return);break;case 5:if(wl(t,e),kl(e),512&r&&null!==n&&il(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Ac(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(i,a),be(l,o);var u=be(l,a);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):b(i,h,d,u)}switch(l){case"input":J(i,a);break;case"textarea":se(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[mi]=a}catch(g){Ac(e,e.return,g)}}break;case 6:if(wl(t,e),kl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Ac(e,e.return,g)}}break;case 3:if(wl(t,e),kl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Ac(e,e.return,g)}break;case 4:default:wl(t,e),kl(e);break;case 13:wl(t,e),kl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Kl=Xe())),4&r&&bl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(tl=(u=tl)||h,wl(t,e),tl=u):wl(t,e),kl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(rl=e,h=e.child;null!==h;){for(d=rl=h;null!==rl;){switch(p=(f=rl).child,f.tag){case 0:case 11:case 14:case 15:ol(4,f,f.return);break;case 1:il(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ac(r,n,g)}}break;case 5:il(f,f.return);break;case 22:if(null!==f.memoizedState){Sl(d);continue}}null!==p?(p.return=f,rl=p):Sl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,o=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){Ac(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Ac(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:wl(t,e),kl(e),4&r&&bl(e);case 21:}}function kl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(hl(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),pl(e,dl(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;fl(e,dl(e),a);break;default:throw Error(s(161))}}catch(ui){Ac(e,e.return,ui)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function El(e,t,n){rl=e,_l(e,t,n)}function _l(e,t,n){for(var r=0!==(1&e.mode);null!==rl;){var i=rl,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||el;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||tl;o=el;var c=tl;if(el=a,(tl=l)&&!c)for(rl=i;null!==rl;)l=(a=rl).child,22===a.tag&&null!==a.memoizedState?Il(i):null!==l?(l.return=a,rl=l):Il(i);for(;null!==s;)rl=s,_l(s,t,n),s=s.sibling;rl=i,el=o,tl=c}Nl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,rl=s):Nl(e)}}function Nl(e){for(;null!==rl;){var t=rl;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:tl||ll(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!tl)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ao(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Ks(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ks(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}tl||512&t.flags&&cl(t)}catch(Ei){Ac(t,t.return,Ei)}}if(t===e){rl=null;break}if(null!==(n=t.sibling)){n.return=t.return,rl=n;break}rl=t.return}}function Sl(e){for(;null!==rl;){var t=rl;if(t===e){rl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,rl=n;break}rl=t.return}}function Il(e){for(;null!==rl;){var t=rl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ll(4,t)}catch(ui){Ac(t,n,ui)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(ui){Ac(t,i,ui)}}var s=t.return;try{cl(t)}catch(ui){Ac(t,s,ui)}break;case 5:var a=t.return;try{cl(t)}catch(ui){Ac(t,a,ui)}}}catch(ui){Ac(t,t.return,ui)}if(t===e){rl=null;break}var o=t.sibling;if(null!==o){o.return=t.return,rl=o;break}rl=t.return}}var Tl,Cl=Math.ceil,Al=w.ReactCurrentDispatcher,Dl=w.ReactCurrentOwner,Rl=w.ReactCurrentBatchConfig,Pl=0,Ol=null,Ll=null,Ml=0,Fl=0,Ul=Ti(0),Vl=0,zl=null,Bl=0,$l=0,ql=0,Hl=null,Wl=null,Kl=0,Gl=1/0,Ql=null,Yl=!1,Xl=null,Jl=null,Zl=!1,ec=null,tc=0,nc=0,rc=null,ic=-1,sc=0;function ac(){return 0!==(6&Pl)?Xe():-1!==ic?ic:ic=Xe()}function oc(e){return 0===(1&e.mode)?1:0!==(2&Pl)&&0!==Ml?Ml&-Ml:null!==bs.transition?(0===sc&&(sc=mt()),sc):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function lc(e,t,n,r){if(50<nc)throw nc=0,rc=null,Error(s(185));yt(e,n,r),0!==(2&Pl)&&e===Ol||(e===Ol&&(0===(2&Pl)&&($l|=n),4===Vl&&fc(e,Ml)),cc(e,r),1===n&&0===Pl&&0===(1&t.mode)&&(Gl=Xe()+500,$i&&Wi()))}function cc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=dt(e,e===Ol?Ml:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){$i=!0,Hi(e)}(pc.bind(null,e)):Hi(pc.bind(null,e)),ai(function(){0===(6&Pl)&&Wi()}),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Oc(n,uc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function uc(e,t){if(ic=-1,sc=0,0!==(6&Pl))throw Error(s(327));var n=e.callbackNode;if(Tc()&&e.callbackNode!==n)return null;var r=dt(e,e===Ol?Ml:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=kc(e,r);else{t=r;var i=Pl;Pl|=2;var a=wc();for(Ol===e&&Ml===t||(Ql=null,Gl=Xe()+500,vc(e,t));;)try{_c();break}catch(l){bc(e,l)}As(),Al.current=a,Pl=i,null!==Ll?t=0:(Ol=null,Ml=0,t=Vl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=hc(e,i))),1===t)throw n=zl,vc(e,0),fc(e,r),cc(e,Xe()),n;if(6===t)fc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!or(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=kc(e,r))&&(0!==(a=pt(e))&&(r=a,t=hc(e,a))),1===t))throw n=zl,vc(e,0),fc(e,r),cc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Ic(e,Wl,Ql);break;case 3:if(fc(e,r),(130023424&r)===r&&10<(t=Kl+500-Xe())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ac(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Ic.bind(null,e,Wl,Ql),t);break}Ic(e,Wl,Ql);break;case 4:if(fc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>i&&(i=o),r&=~a}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cl(r/1960))-r)){e.timeoutHandle=ri(Ic.bind(null,e,Wl,Ql),r);break}Ic(e,Wl,Ql);break;default:throw Error(s(329))}}}return cc(e,Xe()),e.callbackNode===n?uc.bind(null,e):null}function hc(e,t){var n=Hl;return e.current.memoizedState.isDehydrated&&(vc(e,t).flags|=256),2!==(e=kc(e,t))&&(t=Wl,Wl=n,null!==t&&dc(t)),e}function dc(e){null===Wl?Wl=e:Wl.push.apply(Wl,e)}function fc(e,t){for(t&=~ql,t&=~$l,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function pc(e){if(0!==(6&Pl))throw Error(s(327));Tc();var t=dt(e,0);if(0===(1&t))return cc(e,Xe()),null;var n=kc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=hc(e,r))}if(1===n)throw n=zl,vc(e,0),fc(e,t),cc(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ic(e,Wl,Ql),cc(e,Xe()),null}function mc(e,t){var n=Pl;Pl|=1;try{return e(t)}finally{0===(Pl=n)&&(Gl=Xe()+500,$i&&Wi())}}function gc(e){null!==ec&&0===ec.tag&&0===(6&Pl)&&Tc();var t=Pl;Pl|=1;var n=Rl.transition,r=bt;try{if(Rl.transition=null,bt=1,e)return e()}finally{bt=r,Rl.transition=n,0===(6&(Pl=t))&&Wi()}}function yc(){Fl=Ul.current,Ci(Ul)}function vc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ll)for(n=Ll.return;null!==n;){var r=n;switch(ss(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Mi();break;case 3:ta(),Ci(Ri),Ci(Di),oa();break;case 5:ra(r);break;case 4:ta();break;case 13:case 19:Ci(ia);break;case 10:js(r.type._context);break;case 22:case 23:yc()}n=n.return}if(Ol=e,Ll=e=Uc(e.current,null),Ml=Fl=t,Vl=0,zl=null,ql=$l=Bl=0,Wl=Hl=null,null!==Os){for(t=0;t<Os.length;t++)if(null!==(r=(n=Os[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}Os=null}return e}function bc(e,t){for(;;){var n=Ll;try{if(As(),la.current=no,pa){for(var r=ha.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}pa=!1}if(ua=0,fa=da=ha=null,ma=!1,ga=0,Dl.current=null,null===n||null===n.return){Vl=1,zl=t,Ll=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Ml,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=xo(o);if(null!==p){p.flags&=-257,ko(p,o,l,0,t),1&p.mode&&wo(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){wo(a,u,t),xc();break e}c=Error(s(426))}else if(ls&&1&l.mode){var y=xo(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ko(y,o,l,0,t),vs(po(c,l));break e}}a=c=po(c,l),4!==Vl&&(Vl=2),null===Hl?Hl=[a]:Hl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Hs(a,vo(0,c,t));break e;case 1:l=c;var v=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Jl||!Jl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Hs(a,bo(a,l,t));break e}}a=a.return}while(null!==a)}Sc(n)}catch(Ii){t=Ii,Ll===n&&null!==n&&(Ll=n=n.return);continue}break}}function wc(){var e=Al.current;return Al.current=no,null===e?no:e}function xc(){0!==Vl&&3!==Vl&&2!==Vl||(Vl=4),null===Ol||0===(268435455&Bl)&&0===(268435455&$l)||fc(Ol,Ml)}function kc(e,t){var n=Pl;Pl|=2;var r=wc();for(Ol===e&&Ml===t||(Ql=null,vc(e,t));;)try{Ec();break}catch(i){bc(e,i)}if(As(),Pl=n,Al.current=r,null!==Ll)throw Error(s(261));return Ol=null,Ml=0,Vl}function Ec(){for(;null!==Ll;)Nc(Ll)}function _c(){for(;null!==Ll&&!Qe();)Nc(Ll)}function Nc(e){var t=Tl(e.alternate,e,Fl);e.memoizedProps=e.pendingProps,null===t?Sc(e):Ll=t,Dl.current=null}function Sc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Jo(n,t,Fl)))return void(Ll=n)}else{if(null!==(n=Zo(n,t)))return n.flags&=32767,void(Ll=n);if(null===e)return Vl=6,void(Ll=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ll=t);Ll=t=e}while(null!==t);0===Vl&&(Vl=5)}function Ic(e,t,n){var r=bt,i=Rl.transition;try{Rl.transition=null,bt=1,function(e,t,n,r){do{Tc()}while(null!==ec);if(0!==(6&Pl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,a),e===Ol&&(Ll=Ol=null,Ml=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Zl||(Zl=!0,Oc(tt,function(){return Tc(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Rl.transition,Rl.transition=null;var o=bt;bt=1;var l=Pl;Pl|=4,Dl.current=null,function(e,t){if(ei=qt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(Ys){n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=o+i),d!==a||0!==r&&3!==d.nodeType||(c=o+r),3===d.nodeType&&(o+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=o),f===a&&++h===r&&(c=o),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},qt=!1,rl=t;null!==rl;)if(e=(t=rl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,rl=e;else for(;null!==rl;){t=rl;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:ao(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(Ys){Ac(t,t.return,Ys)}if(null!==(e=t.sibling)){e.return=t.return,rl=e;break}rl=t.return}m=al,al=!1}(e,n),xl(n,e),pr(ti),qt=!!ei,ti=ei=null,e.current=n,El(n,e,i),Ye(),Pl=l,bt=o,Rl.transition=a}else e.current=n;if(Zl&&(Zl=!1,ec=e,tc=i),a=e.pendingLanes,0===a&&(Jl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),cc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Yl)throw Yl=!1,e=Xl,Xl=null,e;0!==(1&tc)&&0!==e.tag&&Tc(),a=e.pendingLanes,0!==(1&a)?e===rc?nc++:(nc=0,rc=e):nc=0,Wi()}(e,t,n,r)}finally{Rl.transition=i,bt=r}return null}function Tc(){if(null!==ec){var e=wt(tc),t=Rl.transition,n=bt;try{if(Rl.transition=null,bt=16>e?16:e,null===ec)var r=!1;else{if(e=ec,ec=null,tc=0,0!==(6&Pl))throw Error(s(331));var i=Pl;for(Pl|=4,rl=e.current;null!==rl;){var a=rl,o=a.child;if(0!==(16&rl.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(rl=u;null!==rl;){var h=rl;switch(h.tag){case 0:case 11:case 15:ol(8,h,a)}var d=h.child;if(null!==d)d.return=h,rl=d;else for(;null!==rl;){var f=(h=rl).sibling,p=h.return;if(ul(h),h===u){rl=null;break}if(null!==f){f.return=p,rl=f;break}rl=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}rl=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,rl=o;else e:for(;null!==rl;){if(0!==(2048&(a=rl).flags))switch(a.tag){case 0:case 11:case 15:ol(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,rl=v;break e}rl=a.return}}var b=e.current;for(rl=b;null!==rl;){var w=(o=rl).child;if(0!==(2064&o.subtreeFlags)&&null!==w)w.return=o,rl=w;else e:for(o=b;null!==rl;){if(0!==(2048&(l=rl).flags))try{switch(l.tag){case 0:case 11:case 15:ll(9,l)}}catch(Ii){Ac(l,l.return,Ii)}if(l===o){rl=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,rl=x;break e}rl=l.return}}if(Pl=i,Wi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(Ii){}r=!0}return r}finally{bt=n,Rl.transition=t}}return!1}function Cc(e,t,n){e=$s(e,t=vo(0,t=po(n,t),1),1),t=ac(),null!==e&&(yt(e,1,t),cc(e,t))}function Ac(e,t,n){if(3===e.tag)Cc(e,e,n);else for(;null!==t;){if(3===t.tag){Cc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Jl||!Jl.has(r))){t=$s(t,e=bo(t,e=po(n,e),1),1),e=ac(),null!==t&&(yt(t,1,e),cc(t,e));break}}t=t.return}}function jc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ac(),e.pingedLanes|=e.suspendedLanes&n,Ol===e&&(Ml&n)===n&&(4===Vl||3===Vl&&(130023424&Ml)===Ml&&500>Xe()-Kl?vc(e,0):ql|=n),cc(e,t)}function Dc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ac();null!==(e=Fs(e,t))&&(yt(e,t,n),cc(e,n))}function Rc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Dc(e,n)}function Pc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Dc(e,n)}function Oc(e,t){return Ke(e,t)}function Lc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mc(e,t,n,r){return new Lc(e,t,n,r)}function Fc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Uc(e,t){var n=e.alternate;return null===n?((n=Mc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Vc(e,t,n,r,i,a){var o=2;if(r=e,"function"===typeof e)Fc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case E:return zc(n.children,i,a,t);case _:o=8,i|=8;break;case N:return(e=Mc(12,n,t,2|i)).elementType=N,e.lanes=a,e;case C:return(e=Mc(13,n,t,i)).elementType=C,e.lanes=a,e;case A:return(e=Mc(19,n,t,i)).elementType=A,e.lanes=a,e;case R:return Bc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:o=10;break e;case I:o=9;break e;case T:o=11;break e;case j:o=14;break e;case D:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Mc(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function zc(e,t,n,r){return(e=Mc(7,e,r,t)).lanes=n,e}function Bc(e,t,n,r){return(e=Mc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function $c(e,t,n){return(e=Mc(6,e,null,t)).lanes=n,e}function qc(e,t,n){return(t=Mc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Wc(e,t,n,r,i,s,a,o,l){return e=new Hc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Mc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vs(s),e}function Kc(e){if(!e)return ji;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Li(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Li(n))return Ui(e,n,t)}return t}function Gc(e,t,n,r,i,s,a,o,l){return(e=Wc(n,r,!0,e,0,s,0,o,l)).context=Kc(null),n=e.current,(s=Bs(r=ac(),i=oc(n))).callback=void 0!==t&&null!==t?t:null,$s(n,s,i),e.current.lanes=i,yt(e,i,r),cc(e,r),e}function Qc(e,t,n,r){var i=t.current,s=ac(),a=oc(i);return n=Kc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Bs(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=$s(i,t,a))&&(lc(e,i,a,s),qs(e,i,a)),a}function Yc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Xc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Jc(e,t){Xc(e,t),(e=e.alternate)&&Xc(e,t)}Tl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ri.current)_o=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _o=!1,function(e,t,n){switch(t.tag){case 3:Po(t),ys();break;case 5:na(t);break;case 1:Li(t.type)&&Vi(t);break;case 4:ea(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ai(Ss,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ai(ia,1&ia.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Bo(e,t,n):(Ai(ia,1&ia.current),null!==(e=Qo(e,t,n))?e.sibling:null);Ai(ia,1&ia.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ko(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ai(ia,ia.current),r)break;return null;case 22:case 23:return t.lanes=0,Co(e,t,n)}return Qo(e,t,n)}(e,t,n);_o=0!==(131072&e.flags)}else _o=!1,ls&&0!==(1048576&t.flags)&&rs(t,Yi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Go(e,t),e=t.pendingProps;var i=Oi(t,Di.current);Rs(t,n),i=wa(null,t,r,e,i,n);var a=xa();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Li(r)?(a=!0,Vi(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Vs(t),i.updater=lo,t.stateNode=i,i._reactInternals=t,fo(t,r,e,n),t=Ro(null,t,r,!0,a,n)):(t.tag=0,ls&&a&&is(t),No(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Go(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Fc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===j)return 14}return 2}(r),e=ao(r,e),i){case 0:t=jo(null,t,r,e,n);break e;case 1:t=Do(null,t,r,e,n);break e;case 11:t=So(null,t,r,e,n);break e;case 14:t=Io(null,t,r,ao(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,jo(e,t,r,i=t.elementType===r?i:ao(r,i),n);case 1:return r=t.type,i=t.pendingProps,Do(e,t,r,i=t.elementType===r?i:ao(r,i),n);case 3:e:{if(Po(t),null===e)throw Error(s(387));r=t.pendingProps,i=(a=t.memoizedState).element,zs(e,t),Ws(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Oo(e,t,r,n,i=po(Error(s(423)),t));break e}if(r!==i){t=Oo(e,t,r,n,i=po(Error(s(424)),t));break e}for(os=ci(t.stateNode.containerInfo.firstChild),as=t,ls=!0,cs=null,n=Ns(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ys(),r===i){t=Qo(e,t,n);break e}No(e,t,r,n)}t=t.child}return t;case 5:return na(t),null===e&&fs(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==a&&ni(r,a)&&(t.flags|=32),Ao(e,t),No(e,t,o,n),t.child;case 6:return null===e&&fs(t),null;case 13:return Bo(e,t,n);case 4:return ea(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=_s(t,null,r,n):No(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,So(e,t,r,i=t.elementType===r?i:ao(r,i),n);case 7:return No(e,t,t.pendingProps,n),t.child;case 8:case 12:return No(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Ai(Ss,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===i.children&&!Ri.current){t=Qo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Bs(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ds(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ds(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}No(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Rs(t,n),r=r(i=Ps(i)),t.flags|=1,No(e,t,r,n),t.child;case 14:return i=ao(r=t.type,t.pendingProps),Io(e,t,r,i=ao(r.type,i),n);case 15:return To(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ao(r,i),Go(e,t),t.tag=1,Li(r)?(e=!0,Vi(t)):e=!1,Rs(t,n),uo(t,r,i),fo(t,r,i,n),Ro(null,t,r,!0,e,n);case 19:return Ko(e,t,n);case 22:return Co(e,t,n)}throw Error(s(156,t.tag))};var Zc="function"===typeof reportError?reportError:function(e){console.error(e)};function eu(e){this._internalRoot=e}function tu(e){this._internalRoot=e}function nu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function ru(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function iu(){}function su(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof i){var o=i;i=function(){var e=Yc(a);o.call(e)}}Qc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Yc(a);s.call(e)}}var a=Gc(t,r,e,0,null,!1,0,"",iu);return e._reactRootContainer=a,e[gi]=a.current,Br(8===e.nodeType?e.parentNode:e),gc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=Yc(l);o.call(e)}}var l=Wc(e,0,!1,null,0,!1,0,"",iu);return e._reactRootContainer=l,e[gi]=l.current,Br(8===e.nodeType?e.parentNode:e),gc(function(){Qc(t,l,n,r)}),l}(n,t,e,i,r);return Yc(a)}tu.prototype.render=eu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Qc(e,t,null,null)},tu.prototype.unmount=eu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;gc(function(){Qc(null,e,null,null)}),t[gi]=null}},tu.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Mt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),cc(t,Xe()),0===(6&Pl)&&(Gl=Xe()+500,Wi()))}break;case 13:gc(function(){var t=Fs(e,1);if(null!==t){var n=ac();lc(t,e,1,n)}}),Jc(e,1)}},kt=function(e){if(13===e.tag){var t=Fs(e,134217728);if(null!==t)lc(t,e,134217728,ac());Jc(e,134217728)}},Et=function(e){if(13===e.tag){var t=oc(e),n=Fs(e,t);if(null!==n)lc(n,e,t,ac());Jc(e,t)}},_t=function(){return bt},Nt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},ke=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));K(r),J(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=mc,Ce=gc;var au={usingClientEntryPoint:!1,Events:[xi,ki,_i,Se,Ie,mc]},ou={findFiberByHostInstance:wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lu={bundleType:ou.bundleType,version:ou.version,rendererPackageName:ou.rendererPackageName,rendererConfig:ou.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:ou.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cu.isDisabled&&cu.supportsFiber)try{it=cu.inject(lu),st=cu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=au,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nu(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!nu(e))throw Error(s(299));var n=!1,r="",i=Zc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Wc(e,1,!1,null,0,n,0,r,i),e[gi]=t.current,Br(8===e.nodeType?e.parentNode:e),new eu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return gc(e)},t.hydrate=function(e,t,n){if(!ru(t))throw Error(s(200));return su(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!nu(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",o=Zc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Gc(t,null,e,1,null!=n?n:null,i,0,a,o),e[gi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new tu(t)},t.render=function(e,t,n){if(!ru(t))throw Error(s(200));return su(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ru(e))throw Error(s(40));return!!e._reactRootContainer&&(gc(function(){su(null,null,e,!1,function(){e._reactRootContainer=null,e[gi]=null})}),!0)},t.unstable_batchedUpdates=mc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ru(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return su(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}();var r=n(43),i=n(391);const s=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let h=(15&a)<<2|l>>6,d=63&l;o||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const l=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==l)throw new o;const c=t<<2|s>>4;if(r.push(c),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==l){const e=a<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class o extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l=function(e){return function(e){const t=s(e);return a.encodeByteArray(t,!0)}(e).replace(/\./g,"")},c=function(e){try{return a.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const u=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,h=()=>{try{return u()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"your_api_key_here",REACT_APP_FIREBASE_APP_ID:"your_app_id",REACT_APP_FIREBASE_AUTH_DOMAIN:"your_project_id.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"your_sender_id",REACT_APP_FIREBASE_PROJECT_ID:"your_project_id",REACT_APP_FIREBASE_STORAGE_BUCKET:"your_project_id.appspot.com"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&c(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},d=e=>{var t,n;return null===(n=null===(t=h())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},f=e=>{const t=d(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},p=()=>{var e;return null===(e=h())||void 0===e?void 0:e.config},m=e=>{var t;return null===(t=h())||void 0===t?void 0:t[`_${e}`]};class g{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function y(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[l(JSON.stringify({alg:"none",type:"JWT"})),l(JSON.stringify(s)),""].join(".")}function v(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function b(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function w(){try{return"object"===typeof indexedDB}catch(e){return!1}}function x(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}class k extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,k.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,E.prototype.create)}}class E{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(_,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new k(n,s,t)}}const _=/\{\$([^}]+)}/g;function N(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(S(n)&&S(s)){if(!N(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function S(e){return null!==e&&"object"===typeof e}function I(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function T(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function C(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class A{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=j),void 0===r.error&&(r.error=j),void 0===r.complete&&(r.complete=j);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function j(){}function D(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3)*Math.pow(t,e),r=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(144e5,n+r)}function R(e){return e&&e._delegate?e._delegate:e}class P{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const O="[DEFAULT]";class L{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new g;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:O})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===O?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;return this.component?this.component.multipleInstances?e:O:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class M{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new L(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const F=[];var U;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(U||(U={}));const V={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},z=U.INFO,B={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},$=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=B[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];console[r](`[${n}]  ${e.name}:`,...s)};class q{constructor(e){this.name=e,this._logLevel=z,this._logHandler=$,this._userLogHandler=null,F.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in U))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?V[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,U.DEBUG,...t),this._logHandler(this,U.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,...t),this._logHandler(this,U.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,U.INFO,...t),this._logHandler(this,U.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,U.WARN,...t),this._logHandler(this,U.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,U.ERROR,...t),this._logHandler(this,U.ERROR,...t)}}let H,W;const K=new WeakMap,G=new WeakMap,Q=new WeakMap,Y=new WeakMap,X=new WeakMap;let J={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return G.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Q.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return te(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Z(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(W||(W=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ne(this),n),te(K.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return te(e.apply(ne(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(ne(this),t,...r);return Q.set(s,t.sort?t.sort():[t]),te(s)}}function ee(e){return"function"===typeof e?Z(e):(e instanceof IDBTransaction&&function(e){if(G.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});G.set(e,t)}(e),t=e,(H||(H=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,J):e);var t}function te(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(te(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&K.set(t,e)}).catch(()=>{}),X.set(t,e),t}(e);if(Y.has(e))return Y.get(e);const t=ee(e);return t!==e&&(Y.set(e,t),X.set(t,e)),t}const ne=e=>X.get(e);const re=["get","getKey","getAll","getAllKeys","count"],ie=["put","add","delete","clear"],se=new Map;function ae(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(se.get(t))return se.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=ie.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!re.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return se.set(t,s),s}J=(e=>({...e,get:(t,n,r)=>ae(t,n)||e.get(t,n,r),has:(t,n)=>!!ae(t,n)||e.has(t,n)}))(J);class oe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const le="@firebase/app",ce="0.9.13",ue=new q("@firebase/app"),he="@firebase/app-compat",de="@firebase/analytics-compat",fe="@firebase/analytics",pe="@firebase/app-check-compat",me="@firebase/app-check",ge="@firebase/auth",ye="@firebase/auth-compat",ve="@firebase/database",be="@firebase/database-compat",we="@firebase/functions",xe="@firebase/functions-compat",ke="@firebase/installations",Ee="@firebase/installations-compat",_e="@firebase/messaging",Ne="@firebase/messaging-compat",Se="@firebase/performance",Ie="@firebase/performance-compat",Te="@firebase/remote-config",Ce="@firebase/remote-config-compat",Ae="@firebase/storage",je="@firebase/storage-compat",De="@firebase/firestore",Re="@firebase/firestore-compat",Pe="firebase",Oe="[DEFAULT]",Le={[le]:"fire-core",[he]:"fire-core-compat",[fe]:"fire-analytics",[de]:"fire-analytics-compat",[me]:"fire-app-check",[pe]:"fire-app-check-compat",[ge]:"fire-auth",[ye]:"fire-auth-compat",[ve]:"fire-rtdb",[be]:"fire-rtdb-compat",[we]:"fire-fn",[xe]:"fire-fn-compat",[ke]:"fire-iid",[Ee]:"fire-iid-compat",[_e]:"fire-fcm",[Ne]:"fire-fcm-compat",[Se]:"fire-perf",[Ie]:"fire-perf-compat",[Te]:"fire-rc",[Ce]:"fire-rc-compat",[Ae]:"fire-gcs",[je]:"fire-gcs-compat",[De]:"fire-fst",[Re]:"fire-fst-compat","fire-js":"fire-js",[Pe]:"fire-js-all"},Me=new Map,Fe=new Map;function Ue(e,t){try{e.container.addComponent(t)}catch(n){ue.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Ve(e){const t=e.name;if(Fe.has(t))return ue.debug(`There were multiple attempts to register component ${t}.`),!1;Fe.set(t,e);for(const n of Me.values())Ue(n,e);return!0}function ze(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const Be=new E("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class $e{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new P("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Be.create("app-deleted",{appName:this._name})}}const qe="9.23.0";function He(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Oe,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Be.create("bad-app-name",{appName:String(i)});if(n||(n=p()),!n)throw Be.create("no-options");const s=Me.get(i);if(s){if(N(n,s.options)&&N(r,s.config))return s;throw Be.create("duplicate-app",{appName:i})}const a=new M(i);for(const l of Fe.values())a.addComponent(l);const o=new $e(n,r,a);return Me.set(i,o),o}function We(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe;const t=Me.get(e);if(!t&&e===Oe&&p())return He();if(!t)throw Be.create("no-app",{appName:e});return t}function Ke(e,t,n){var r;let i=null!==(r=Le[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void ue.warn(e.join(" "))}Ve(new P(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}const Ge="firebase-heartbeat-store";let Qe=null;function Ye(){return Qe||(Qe=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=te(a);return r&&a.addEventListener("upgradeneeded",e=>{r(te(a.result),e.oldVersion,e.newVersion,te(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Ge)}}).catch(e=>{throw Be.create("idb-open",{originalErrorMessage:e.message})})),Qe}async function Xe(e,t){try{const n=(await Ye()).transaction(Ge,"readwrite"),r=n.objectStore(Ge);await r.put(t,Je(e)),await n.done}catch(n){if(n instanceof k)ue.warn(n.message);else{const e=Be.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});ue.warn(e.message)}}}function Je(e){return`${e.name}!${e.options.appId}`}class Ze{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new tt(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=et();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some(e=>e.date===t))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=et(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),nt(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),nt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=l(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function et(){return(new Date).toISOString().substring(0,10)}class tt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!w()&&x().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await Ye();return await t.transaction(Ge).objectStore(Ge).get(Je(e))}catch(t){if(t instanceof k)ue.warn(t.message);else{const e=Be.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});ue.warn(e.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Xe(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Xe(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function nt(e){return l(JSON.stringify({version:2,heartbeats:e})).length}var rt;rt="",Ve(new P("platform-logger",e=>new oe(e),"PRIVATE")),Ve(new P("heartbeat",e=>new Ze(e),"PRIVATE")),Ke(le,ce,rt),Ke(le,ce,"esm2017"),Ke("fire-js","");function it(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function st(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const at=st,ot=new E("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),lt=new q("@firebase/auth");function ct(e){if(lt.logLevel<=U.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];lt.error(`Auth (${qe}): ${e}`,...n)}}function ut(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw ft(e,...n)}function ht(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ft(e,...n)}function dt(e,t,n){const r=Object.assign(Object.assign({},at()),{[t]:n});return new E("auth","Firebase",r).create(t,{appName:e.name})}function ft(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return ot.create(e,...n)}function pt(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw ft(t,...r)}}function mt(e){const t="INTERNAL ASSERTION FAILED: "+e;throw ct(t),new Error(t)}function gt(e,t){e||mt(t)}function yt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function vt(){return"http:"===bt()||"https:"===bt()}function bt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class wt{constructor(e,t){this.shortDelay=e,this.longDelay=t,gt(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(v())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(vt()||b()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function xt(e,t){gt(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class kt{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void mt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void mt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void mt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Et={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},_t=new wt(3e4,6e4);function Nt(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function St(e,t,n,r){return It(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const a=I(Object.assign({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode),kt.fetch()(Ct(e,e.config.apiHost,n,a),Object.assign({method:t,headers:o,referrerPolicy:"no-referrer"},i))})}async function It(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Et),t);try{const t=new At(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw jt(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw jt(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw jt(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw jt(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw dt(e,o,a);ut(e,o)}}catch(i){if(i instanceof k)throw i;ut(e,"network-request-failed",{message:String(i)})}}async function Tt(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await St(e,t,n,r,i);return"mfaPendingCredential"in s&&ut(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Ct(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?xt(e.config,i):`${e.config.apiScheme}://${i}`}class At{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(ht(this.auth,"network-request-failed")),_t.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function jt(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ht(e,t,r);return i.customData._tokenResponse=n,i}function Dt(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Rt(e){return 1e3*Number(e)}function Pt(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return ct("JWT malformed, contained fewer than 3 sections"),null;try{const e=c(n);return e?JSON.parse(e):(ct("Failed to decode base64 JWT payload"),null)}catch(i){return ct("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}async function Ot(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof k&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Lt{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null===e||void 0===e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class Mt{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dt(this.lastLoginAt),this.creationTime=Dt(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ft(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Ot(e,async function(e,t){return St(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));pt(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map(e=>{var{providerId:t}=e,n=it(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}):[];const o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===o||void 0===o?void 0:o.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Mt(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class Ut{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pt(e.idToken,"internal-error"),pt("undefined"!==typeof e.idToken,"internal-error"),pt("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=Pt(e);return pt(t,"internal-error"),pt("undefined"!==typeof t.exp,"internal-error"),pt("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return pt(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await It(e,{},async()=>{const n=I({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=Ct(e,r,"/v1/token",`key=${i}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",kt.fetch()(s,{method:"POST",headers:a,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Ut;return n&&(pt("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(pt("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(pt("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ut,this.toJSON())}_performRefresh(){return mt("not implemented")}}function Vt(e,t){pt("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class zt{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=it(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Lt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Mt(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Ot(this,this.stsTokenManager.getToken(this.auth,e));return pt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=R(e),r=await n.getIdToken(t),i=Pt(r);pt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,a=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Dt(Rt(i.auth_time)),issuedAtTime:Dt(Rt(i.iat)),expirationTime:Dt(Rt(i.exp)),signInProvider:a||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=R(e);await Ft(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(pt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new zt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){pt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Ft(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Ot(this,async function(e,t){return St(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:x,stsTokenManager:k}=t;pt(v&&k,e,"internal-error");const E=Ut.fromJSON(this.name,k);pt("string"===typeof v,e,"internal-error"),Vt(u,e.name),Vt(h,e.name),pt("boolean"===typeof b,e,"internal-error"),pt("boolean"===typeof w,e,"internal-error"),Vt(d,e.name),Vt(f,e.name),Vt(p,e.name),Vt(m,e.name),Vt(g,e.name),Vt(y,e.name);const _=new zt({uid:v,auth:e,email:h,emailVerified:b,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:g,lastLoginAt:y});return x&&Array.isArray(x)&&(_.providerData=x.map(e=>Object.assign({},e))),m&&(_._redirectEventId=m),_}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Ut;r.updateFromServerResponse(t);const i=new zt({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Ft(i),i}}const Bt=new Map;function $t(e){gt(e instanceof Function,"Expected a class definition");let t=Bt.get(e);return t?(gt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Bt.set(e,t),t)}class qt{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}qt.type="NONE";const Ht=qt;function Wt(e,t,n){return`firebase:${e}:${t}:${n}`}class Kt{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Wt(this.userKey,r.apiKey,i),this.fullPersistenceKey=Wt("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?zt._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Kt($t(Ht),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||$t(Ht);const s=Wt(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(s);if(t){const n=zt._fromJSON(e,t);c!==i&&(a=n),i=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(l){}})),new Kt(i,e,n)):new Kt(i,e,n)}}function Gt(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Jt(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Qt(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(en(t))return"Blackberry";if(tn(t))return"Webos";if(Yt(t))return"Safari";if((t.includes("chrome/")||Xt(t))&&!t.includes("edge/"))return"Chrome";if(Zt(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Qt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v();return/firefox\//i.test(e)}function Yt(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:v()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Xt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v();return/crios\//i.test(e)}function Jt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v();return/iemobile/i.test(e)}function Zt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v();return/android/i.test(e)}function en(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v();return/blackberry/i.test(e)}function tn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v();return/webos/i.test(e)}function nn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function rn(){return function(){const e=v();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function sn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v();return nn(e)||Zt(e)||tn(e)||en(e)||/windows phone/i.test(e)||Jt(e)}function an(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Gt(v());break;case"Worker":t=`${Gt(v())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${qe}/${r}`}async function on(e,t){return St(e,"GET","/v2/recaptchaConfig",Nt(e,t))}function ln(e){return void 0!==e&&void 0!==e.enterprise}class cn{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState)}}function un(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=ht("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})}function hn(e){return`__${e}${Math.floor(1e6*Math.random())}`}class dn{constructor(e){this.type="recaptcha-enterprise",this.auth=gn(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;ln(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{on(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new cn(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&ln(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));un("https://www.google.com/recaptcha/enterprise.js?render="+i).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function fn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new dn(e);let s;try{s=await i.verify(n)}catch(o){s=await i.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}class pn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class mn{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yn(this),this.idTokenSubscription=new yn(this),this.beforeStateQueue=new pn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ot,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=$t(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Kt.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==s||!(null===a||void 0===a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return pt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ft(e)}catch(t){if("auth/network-request-failed"!==(null===t||void 0===t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?R(e):null;return t&&pt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&pt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence($t(e))})}async initializeRecaptchaConfig(){const e=await on(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new cn(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new dn(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new E("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&$t(e)||this._popupRedirectResolver;pt(t,this,"argument-error"),this.redirectPersistenceManager=await Kt.create(this,[$t(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return pt(s,this,"internal-error"),s.then(()=>i(this.currentUser)),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=an(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(lt.logLevel<=U.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];lt.warn(`Auth (${qe}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function gn(e){return R(e)}class yn{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new A(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return pt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function vn(e,t,n){const r=gn(e);pt(r._canInitEmulator,r,"emulator-config-failed"),pt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=bn(t),{host:a,port:o}=function(e){const t=bn(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:wn(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:wn(t)}}}(t),l=null===o?"":`:${o}`;r.config.emulator={url:`${s}//${a}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function bn(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function wn(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class xn{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return mt("not implemented")}_getIdTokenResponse(e){return mt("not implemented")}_linkToIdToken(e,t){return mt("not implemented")}_getReauthenticationResolver(e){return mt("not implemented")}}async function kn(e,t){return St(e,"POST","/v1/accounts:update",t)}async function En(e,t){return Tt(e,"POST","/v1/accounts:signInWithPassword",Nt(e,t))}async function _n(e,t){return St(e,"POST","/v1/accounts:sendOobCode",Nt(e,t))}class Nn extends xn{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Nn(e,t,"password")}static _fromEmailAndCode(e,t){return new Nn(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await fn(e,n,"signInWithPassword");return En(e,t)}return En(e,n).catch(async t=>{if("auth/missing-recaptcha-token"===t.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await fn(e,n,"signInWithPassword");return En(e,t)}return Promise.reject(t)});case"emailLink":return async function(e,t){return Tt(e,"POST","/v1/accounts:signInWithEmailLink",Nt(e,t))}(e,{email:this._email,oobCode:this._password});default:ut(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return kn(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return Tt(e,"POST","/v1/accounts:signInWithEmailLink",Nt(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:ut(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Sn(e,t){return Tt(e,"POST","/v1/accounts:signInWithIdp",Nt(e,t))}class In extends xn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new In(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ut("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=it(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new In(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Sn(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Sn(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Sn(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=I(t)}return e}}const Tn={USER_NOT_FOUND:"user-not-found"};class Cn extends xn{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Cn({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Cn({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Tt(e,"POST","/v1/accounts:signInWithPhoneNumber",Nt(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Tt(e,"POST","/v1/accounts:signInWithPhoneNumber",Nt(e,t));if(n.temporaryProof)throw jt(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Tt(e,"POST","/v1/accounts:signInWithPhoneNumber",Nt(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Tn)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Cn({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class An{constructor(e){var t,n,r,i,s,a;const o=T(C(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);pt(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=o.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=T(C(e)).link,n=t?T(C(t)).deep_link_id:null,r=T(C(e)).deep_link_id;return(r?T(C(r)).link:null)||r||n||t||e}(e);try{return new An(t)}catch(n){return null}}}class jn{constructor(){this.providerId=jn.PROVIDER_ID}static credential(e,t){return Nn._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=An.parseLink(t);return pt(n,"argument-error"),Nn._fromEmailAndCode(e,n.code,n.tenantId)}}jn.PROVIDER_ID="password",jn.EMAIL_PASSWORD_SIGN_IN_METHOD="password",jn.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Dn{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Rn extends Dn{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Pn extends Rn{constructor(){super("facebook.com")}static credential(e){return In._fromParams({providerId:Pn.PROVIDER_ID,signInMethod:Pn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pn.credentialFromTaggedObject(e)}static credentialFromError(e){return Pn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Pn.credential(t.oauthAccessToken)}catch(n){return null}}}Pn.FACEBOOK_SIGN_IN_METHOD="facebook.com",Pn.PROVIDER_ID="facebook.com";class On extends Rn{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return In._fromParams({providerId:On.PROVIDER_ID,signInMethod:On.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return On.credentialFromTaggedObject(e)}static credentialFromError(e){return On.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return On.credential(n,r)}catch(i){return null}}}On.GOOGLE_SIGN_IN_METHOD="google.com",On.PROVIDER_ID="google.com";class Ln extends Rn{constructor(){super("github.com")}static credential(e){return In._fromParams({providerId:Ln.PROVIDER_ID,signInMethod:Ln.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ln.credentialFromTaggedObject(e)}static credentialFromError(e){return Ln.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ln.credential(t.oauthAccessToken)}catch(n){return null}}}Ln.GITHUB_SIGN_IN_METHOD="github.com",Ln.PROVIDER_ID="github.com";class Mn extends Rn{constructor(){super("twitter.com")}static credential(e,t){return In._fromParams({providerId:Mn.PROVIDER_ID,signInMethod:Mn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Mn.credentialFromTaggedObject(e)}static credentialFromError(e){return Mn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Mn.credential(n,r)}catch(i){return null}}}async function Fn(e,t){return Tt(e,"POST","/v1/accounts:signUp",Nt(e,t))}Mn.TWITTER_SIGN_IN_METHOD="twitter.com",Mn.PROVIDER_ID="twitter.com";class Un{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await zt._fromIdTokenResponse(e,n,r),s=Vn(n);return new Un({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Vn(n);return new Un({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Vn(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class zn extends k{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,zn.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new zn(e,t,n,r)}}function Bn(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw zn._fromErrorAndOperation(e,n,t,r);throw n})}async function $n(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Ot(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Un._forOperation(e,"link",r)}async function qn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await Ot(e,Bn(r,i,t,e),n);pt(s.idToken,r,"internal-error");const a=Pt(s.idToken);pt(a,r,"internal-error");const{sub:o}=a;return pt(e.uid===o,r,"user-mismatch"),Un._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===(null===s||void 0===s?void 0:s.code)&&ut(r,"user-mismatch"),s}}async function Hn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await Bn(e,r,t),s=await Un._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Wn(e,t){return Hn(gn(e),t)}function Kn(e,t,n){var r;pt((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),pt("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(pt(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(pt(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Gn(e,t){const n=R(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Kn(n.auth,r,t);const{email:i}=await async function(e,t){return _n(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function Qn(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=R(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},a=await Ot(i,async function(e,t){return St(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const o=i.providerData.find(e=>{let{providerId:t}=e;return"password"===t});o&&(o.displayName=i.displayName,o.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}new WeakMap;const Yn="__sak";class Xn{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Yn,"1"),this.storage.removeItem(Yn),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Jn extends Xn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=v();return Yt(e)||nn(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=sn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);rn()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Jn.type="LOCAL";const Zn=Jn;class er extends Xn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}er.type="SESSION";const tr=er;class nr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new nr(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map(async e=>e(t.origin,i)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function rr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}nr.receivers=[];class ir{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((a,o)=>{const l=rr("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function sr(){return window}function ar(){return"undefined"!==typeof sr().WorkerGlobalScope&&"function"===typeof sr().importScripts}const or="firebaseLocalStorageDb",lr="firebaseLocalStorage",cr="fbase_key";class ur{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function hr(e,t){return e.transaction([lr],t?"readwrite":"readonly").objectStore(lr)}function dr(){const e=indexedDB.open(or,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(lr,{keyPath:cr})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(lr)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(or);return new ur(e).toPromise()}(),t(await dr()))})})}async function fr(e,t,n){const r=hr(e,!0).put({[cr]:t,value:n});return new ur(r).toPromise()}function pr(e,t){const n=hr(e,!0).delete(t);return new ur(n).toPromise()}class mr{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await dr()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ar()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nr._getInstance(ar()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new ir(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await dr();return await fr(e,Yn,"1"),await pr(e,Yn),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>fr(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=hr(e,!1).get(t),r=await new ur(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>pr(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=hr(e,!1).getAll();return new ur(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}mr.type="LOCAL";const gr=mr;hn("rcb"),new wt(3e4,6e4);const yr="recaptcha";async function vr(e,t,n){var r;const i=await n.verify();try{let s;if(pt("string"===typeof i,e,"argument-error"),pt(n.type===yr,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){pt("enroll"===t.type,e,"internal-error");const n=await function(e,t){return St(e,"POST","/v2/accounts/mfaEnrollment:start",Nt(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{pt("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;pt(n,e,"missing-multi-factor-info");const a=await function(e,t){return St(e,"POST","/v2/accounts/mfaSignIn:start",Nt(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return St(e,"POST","/v1/accounts:sendVerificationCode",Nt(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class br{constructor(e){this.providerId=br.PROVIDER_ID,this.auth=gn(e)}verifyPhoneNumber(e,t){return vr(this.auth,e,R(t))}static credential(e,t){return Cn._fromVerification(e,t)}static credentialFromResult(e){const t=e;return br.credentialFromTaggedObject(t)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Cn._fromTokenResponse(n,r):null}}function wr(e,t){return t?$t(t):(pt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}br.PROVIDER_ID="phone",br.PHONE_SIGN_IN_METHOD="phone";class xr extends xn{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Sn(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Sn(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Sn(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function kr(e){return Hn(e.auth,new xr(e),e.bypassAuthState)}function Er(e){const{auth:t,user:n}=e;return pt(n,t,"internal-error"),qn(n,new xr(e),e.bypassAuthState)}async function _r(e){const{auth:t,user:n}=e;return pt(n,t,"internal-error"),$n(n,new xr(e),e.bypassAuthState)}class Nr{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return kr;case"linkViaPopup":case"linkViaRedirect":return _r;case"reauthViaPopup":case"reauthViaRedirect":return Er;default:ut(this.auth,"internal-error")}}resolve(e){gt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Sr=new wt(2e3,1e4);class Ir extends Nr{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Ir.currentPopupAction&&Ir.currentPopupAction.cancel(),Ir.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pt(e,this.auth,"internal-error"),e}async onExecution(){gt(1===this.filter.length,"Popup operations only handle one event");const e=rr();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(ht(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(ht(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ir.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ht(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Sr.get())};e()}}Ir.currentPopupAction=null;const Tr=new Map;class Cr extends Nr{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Tr.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Dr(t),r=jr(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Tr.set(this.auth._key(),e)}return this.bypassAuthState||Tr.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Ar(e,t){Tr.set(e._key(),t)}function jr(e){return $t(e._redirectPersistence)}function Dr(e){return Wt("pendingRedirect",e.config.apiKey,e.name)}async function Rr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=gn(e),i=wr(r,t),s=new Cr(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class Pr{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Lr(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Lr(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(ht(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Or(e))}saveEventToCache(e){this.cachedEventUids.add(Or(e)),this.lastProcessedEventTime=Date.now()}}function Or(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Lr(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const Mr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Fr=/^https?/;async function Ur(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return St(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Vr(r))return}catch(n){}ut(e,"unauthorized-domain")}function Vr(e){const t=yt(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Fr.test(n))return!1;if(Mr.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const zr=new wt(3e4,6e4);function Br(){const e=sr().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let $r=null;function qr(e){return $r=$r||function(e){return new Promise((t,n)=>{var r,i,s;function a(){Br(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Br(),n(ht(e,"network-request-failed"))},timeout:zr.get()})}if(null===(i=null===(r=sr().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=sr().gapi)||void 0===s?void 0:s.load)){const t=hn("iframefcb");return sr()[t]=()=>{gapi.load?a():n(ht(e,"network-request-failed"))},un(`https://apis.google.com/js/api.js?onload=${t}`).catch(e=>n(e))}a()}}).catch(e=>{throw $r=null,e})}(e),$r}const Hr=new wt(5e3,15e3),Wr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Kr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Gr(e){const t=e.config;pt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?xt(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:qe},i=Kr.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${I(r).slice(1)}`}const Qr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Yr{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Xr(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},Qr),{width:r.toString(),height:i.toString(),top:s,left:a}),c=v().toLowerCase();n&&(o=Xt(c)?"_blank":n),Qt(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`},"");if(function(){var e;return nn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:v())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new Yr(null);const h=window.open(t||"",o,u);pt(h,e,"popup-blocked");try{h.focus()}catch(d){}return new Yr(h)}const Jr="__/auth/handler",Zr="emulator/auth/handler",ei=encodeURIComponent("fac");async function ti(e,t,n,r,i,s){pt(e.config.authDomain,e,"auth-domain-config-required"),pt(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:qe,eventId:i};if(t instanceof Dn){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))a[e]=t}if(t instanceof Rn){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?`#${ei}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${Jr}`;return xt(t,Zr)}(e)}?${I(o).slice(1)}${c}`}const ni="webStorageSupport";const ri=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tr,this._completeRedirectFn=Rr,this._overrideRedirectResult=Ar}async _openPopup(e,t,n,r){var i;gt(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Xr(e,await ti(e,t,n,yt(),r),rr())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){sr().location.href=e}(await ti(e,t,n,yt(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(gt(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await async function(e){const t=await qr(e),n=sr().gapi;return pt(n,e,"internal-error"),t.open({where:document.body,url:Gr(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Wr,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=ht(e,"network-request-failed"),s=sr().setTimeout(()=>{r(i)},Hr.get());function a(){sr().clearTimeout(s),n(t)}t.ping(a).then(a,()=>{r(i)})}))}(e),n=new Pr(e);return t.register("authEvent",t=>{pt(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ni,{type:ni},n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[ni];void 0!==i&&t(!!i),ut(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ur(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return sn()||Yt()||nn()}};var ii="@firebase/auth",si="0.23.2";class ai{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){pt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const oi=m("authIdTokenMaxAge")||300;let li=null;var ci;ci="Browser",Ve(new P("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;pt(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:ci,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:an(ci)},c=new mn(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map($t);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Ve(new P("auth-internal",e=>(e=>new ai(e))(gn(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Ke(ii,si,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(ci)),Ke(ii,si,"esm2017");var ui,hi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},di={},fi=fi||{},pi=hi||self;function mi(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function gi(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var yi="closure_uid_"+(1e9*Math.random()>>>0),vi=0;function bi(e,t,n){return e.call.apply(e.bind,arguments)}function wi(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function xi(e,t,n){return(xi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?bi:wi).apply(null,arguments)}function ki(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Ei(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function _i(){this.s=this.s,this.o=this.o}_i.prototype.s=!1,_i.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,yi)&&e[yi]||(e[yi]=++vi))},_i.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ni=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Si(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Ii(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(mi(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function Ti(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Ti.prototype.h=function(){this.defaultPrevented=!0};var Ci=function(){if(!pi.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{pi.addEventListener("test",()=>{},t),pi.removeEventListener("test",()=>{},t)}catch(n){}return e}();function Ai(e){return/^[\s\xa0]*$/.test(e)}function ji(){var e=pi.navigator;return e&&(e=e.userAgent)?e:""}function Di(e){return-1!=ji().indexOf(e)}function Ri(e){return Ri[" "](e),e}Ri[" "]=function(){};var Pi,Oi,Li=Di("Opera"),Mi=Di("Trident")||Di("MSIE"),Fi=Di("Edge"),Ui=Fi||Mi,Vi=Di("Gecko")&&!(-1!=ji().toLowerCase().indexOf("webkit")&&!Di("Edge"))&&!(Di("Trident")||Di("MSIE"))&&!Di("Edge"),zi=-1!=ji().toLowerCase().indexOf("webkit")&&!Di("Edge");function Bi(){var e=pi.document;return e?e.documentMode:void 0}e:{var $i="",qi=function(){var e=ji();return Vi?/rv:([^\);]+)(\)|;)/.exec(e):Fi?/Edge\/([\d\.]+)/.exec(e):Mi?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):zi?/WebKit\/(\S+)/.exec(e):Li?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(qi&&($i=qi?qi[1]:""),Mi){var Hi=Bi();if(null!=Hi&&Hi>parseFloat($i)){Pi=String(Hi);break e}}Pi=$i}if(pi.document&&Mi){var Wi=Bi();Oi=Wi||(parseInt(Pi,10)||void 0)}else Oi=void 0;var Ki=Oi;function Gi(e,t){if(Ti.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Vi){e:{try{Ri(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Qi[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Gi.$.h.call(this)}}Ei(Gi,Ti);var Qi={2:"touch",3:"pen",4:"mouse"};Gi.prototype.h=function(){Gi.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Yi="closure_listenable_"+(1e6*Math.random()|0),Xi=0;function Ji(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Xi,this.fa=this.ia=!1}function Zi(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function es(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function ts(e){const t={};for(const n in e)t[n]=e[n];return t}const ns="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rs(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<ns.length;t++)n=ns[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function is(e){this.src=e,this.g={},this.h=0}function ss(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Ni(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Zi(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function as(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}is.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var a=as(e,t,r,i);return-1<a?(t=e[a],n||(t.ia=!1)):((t=new Ji(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var os="closure_lm_"+(1e6*Math.random()|0),ls={};function cs(e,t,n,r,i){if(r&&r.once)return hs(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)cs(e,t[s],n,r,i);return null}return n=vs(n),e&&e[Yi]?e.O(t,n,gi(r)?!!r.capture:!!r,i):us(e,t,n,!1,r,i)}function us(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=gi(i)?!!i.capture:!!i,o=gs(e);if(o||(e[os]=o=new is(e)),(n=o.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=ms;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Ci||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ps(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function hs(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)hs(e,t[s],n,r,i);return null}return n=vs(n),e&&e[Yi]?e.P(t,n,gi(r)?!!r.capture:!!r,i):us(e,t,n,!0,r,i)}function ds(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)ds(e,t[s],n,r,i);else r=gi(r)?!!r.capture:!!r,n=vs(n),e&&e[Yi]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=as(s=e.g[t],n,r,i))&&(Zi(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=gs(e))&&(t=e.g[t.toString()],e=-1,t&&(e=as(t,n,r,i)),(n=-1<e?t[e]:null)&&fs(n))}function fs(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Yi])ss(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ps(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=gs(t))?(ss(n,e),0==n.h&&(n.src=null,t[os]=null)):Zi(e)}}}function ps(e){return e in ls?ls[e]:ls[e]="on"+e}function ms(e,t){if(e.fa)e=!0;else{t=new Gi(t,this);var n=e.listener,r=e.la||e.src;e.ia&&fs(e),e=n.call(r,t)}return e}function gs(e){return(e=e[os])instanceof is?e:null}var ys="__closure_events_fn_"+(1e9*Math.random()>>>0);function vs(e){return"function"===typeof e?e:(e[ys]||(e[ys]=function(t){return e.handleEvent(t)}),e[ys])}function bs(){_i.call(this),this.i=new is(this),this.S=this,this.J=null}function ws(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Ti(t,e);else if(t instanceof Ti)t.target=t.target||e;else{var i=t;rs(t=new Ti(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];i=xs(a,r,!0,t)&&i}if(i=xs(a=t.g=e,r,!0,t)&&i,i=xs(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=xs(a=t.g=n[s],r,!1,t)&&i}function xs(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.fa&&a.capture==n){var o=a.listener,l=a.la||a.src;a.ia&&ss(e.i,a),i=!1!==o.call(l,r)&&i}}return i&&!r.defaultPrevented}Ei(bs,_i),bs.prototype[Yi]=!0,bs.prototype.removeEventListener=function(e,t,n,r){ds(this,e,t,n,r)},bs.prototype.N=function(){if(bs.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Zi(n[r]);delete t.g[e],t.h--}}this.J=null},bs.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},bs.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var ks=pi.JSON.stringify;function Es(){var e=As;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var _s=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Ns,e=>e.reset());class Ns{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ss(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Is(e){pi.setTimeout(()=>{throw e},0)}let Ts,Cs=!1,As=new class{constructor(){this.h=this.g=null}add(e,t){const n=_s.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},js=()=>{const e=pi.Promise.resolve(void 0);Ts=()=>{e.then(Ds)}};var Ds=()=>{for(var e;e=Es();){try{e.h.call(e.g)}catch(n){Is(n)}var t=_s;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Cs=!1};function Rs(e,t){bs.call(this),this.h=e||1,this.g=t||pi,this.j=xi(this.qb,this),this.l=Date.now()}function Ps(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Os(e,t,n){if("function"===typeof e)n&&(e=xi(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=xi(e.handleEvent,e)}return 2147483647<Number(t)?-1:pi.setTimeout(e,t||0)}function Ls(e){e.g=Os(()=>{e.g=null,e.i&&(e.i=!1,Ls(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Ei(Rs,bs),(ui=Rs.prototype).ga=!1,ui.T=null,ui.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ws(this,"tick"),this.ga&&(Ps(this),this.start()))}},ui.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ui.N=function(){Rs.$.N.call(this),Ps(this),delete this.g};class Ms extends _i{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ls(this)}N(){super.N(),this.g&&(pi.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fs(e){_i.call(this),this.h=e,this.g={}}Ei(Fs,_i);var Us=[];function Vs(e,t,n,r){Array.isArray(n)||(n&&(Us[0]=n.toString()),n=Us);for(var i=0;i<n.length;i++){var s=cs(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function zs(e){es(e.g,function(e,t){this.g.hasOwnProperty(t)&&fs(e)},e),e.g={}}function Bs(){this.g=!0}function $s(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<i.length;a++)i[a]=""}}}return ks(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}Fs.prototype.N=function(){Fs.$.N.call(this),zs(this)},Fs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Bs.prototype.Ea=function(){this.g=!1},Bs.prototype.info=function(){};var qs={},Hs=null;function Ws(){return Hs=Hs||new bs}function Ks(e){Ti.call(this,qs.Ta,e)}function Gs(e){const t=Ws();ws(t,new Ks(t))}function Qs(e,t){Ti.call(this,qs.STAT_EVENT,e),this.stat=t}function Ys(e){const t=Ws();ws(t,new Qs(t,e))}function Xs(e,t){Ti.call(this,qs.Ua,e),this.size=t}function Js(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return pi.setTimeout(function(){e()},t)}qs.Ta="serverreachability",Ei(Ks,Ti),qs.STAT_EVENT="statevent",Ei(Qs,Ti),qs.Ua="timingevent",Ei(Xs,Ti);var Zs={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ea={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ta(){}function na(e){return e.h||(e.h=e.i())}function ra(){}ta.prototype.h=null;var ia,sa={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function aa(){Ti.call(this,"d")}function oa(){Ti.call(this,"c")}function la(){}function ca(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Fs(this),this.P=ha,e=Ui?125:void 0,this.V=new Rs(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new ua}function ua(){this.i=null,this.g="",this.h=!1}Ei(aa,Ti),Ei(oa,Ti),Ei(la,ta),la.prototype.g=function(){return new XMLHttpRequest},la.prototype.i=function(){return{}},ia=new la;var ha=45e3,da={},fa={};function pa(e,t,n){e.L=1,e.v=Ra(Ta(t)),e.s=n,e.S=!0,ma(e,null)}function ma(e,t){e.G=Date.now(),ba(e),e.A=Ta(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Wa(n.i,"t",r),e.C=0,n=e.l.J,e.h=new ua,e.g=Go(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Ms(xi(e.Pa,e,e.g),e.O)),Vs(e.U,e.g,"readystatechange",e.nb),t=e.I?ts(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Gs(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var a="",o=s.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");a=2<=h.length&&"type"==h[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.j,e.u,e.A,e.m,e.W,e.s)}function ga(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function ya(e,t,n){let r,i=!0;for(;!e.J&&e.C<n.length;){if(r=va(e,n),r==fa){4==t&&(e.o=4,Ys(14),i=!1),$s(e.j,e.m,null,"[Incomplete Response]");break}if(r==da){e.o=4,Ys(15),$s(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}$s(e.j,e.m,r,null),_a(e,r)}ga(e)&&r!=fa&&r!=da&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Ys(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Vo(t),t.M=!0,Ys(11))):($s(e.j,e.m,n,"[Invalid Chunked Response]"),Ea(e),ka(e))}function va(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?fa:(n=Number(t.substring(n,r)),isNaN(n)?da:(r+=1)+n>t.length?fa:(t=t.slice(r,r+n),e.C=r+n,t))}function ba(e){e.Y=Date.now()+e.P,wa(e,e.P)}function wa(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Js(xi(e.lb,e),t)}function xa(e){e.B&&(pi.clearTimeout(e.B),e.B=null)}function ka(e){0==e.l.H||e.J||$o(e.l,e)}function Ea(e){xa(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Ps(e.V),zs(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function _a(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Za(n.i,e)))if(!e.K&&Za(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Bo(n),Do(n)}Uo(n),Ys(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Js(xi(n.ib,n),6e3));if(1>=Ja(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else Ho(n,11)}else if((e.K||n.g==e)&&Bo(n),!Ai(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(eo(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Da(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var a=e;if((r=n).wa=Ko(r,r.J?r.pa:null,r.Y),a.K){to(r.i,a);var o=a,l=r.L;l&&o.setTimeout(l),o.B&&(xa(o),ba(o)),r.g=a}else Fo(r);0<n.j.length&&Po(n)}else"stop"!=c[0]&&"close"!=c[0]||Ho(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Ho(n,7):jo(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}Gs()}catch(c){}}function Na(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(mi(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(mi(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(mi(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(ui=ca.prototype).setTimeout=function(e){this.P=e},ui.nb=function(e){e=e.target;const t=this.M;t&&3==No(e)?t.l():this.Pa(e)},ui.Pa=function(e){try{if(e==this.g)e:{const u=No(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||Ui||this.g&&(this.h.h||this.g.ja()||So(this.g)))){this.J||4!=u||7==t||Gs(),xa(this);var n=this.g.da();this.ca=n;t:if(ga(this)){var r=So(this.g);e="";var i=r.length,s=4==No(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ea(this),ka(this);var a="";break t}this.h.i=new pi.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a})}(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var o,l=this.g;if((o=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ai(o)){var c=o;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,Ys(12),Ea(this),ka(this);break e}$s(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_a(this,n)}this.S?(ya(this,u,a),Ui&&this.i&&3==u&&(Vs(this.U,this.V,"tick",this.mb),this.V.start())):($s(this.j,this.m,a,null),_a(this,a)),4==u&&Ea(this),this.i&&!this.J&&(4==u?$o(this.l,this):(this.i=!1,ba(this)))}else(function(e){const t={};e=(e.g&&2<=No(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Ai(e[r]))continue;var n=Ss(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.o=3,Ys(12)):(this.o=0,Ys(13)),Ea(this),ka(this)}}}catch(u){}},ui.mb=function(){if(this.g){var e=No(this.g),t=this.g.ja();this.C<t.length&&(xa(this),ya(this,e,t),this.i&&4!=e&&ba(this))}},ui.cancel=function(){this.J=!0,Ea(this)},ui.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.L&&(Gs(),Ys(17)),Ea(this),this.o=2,ka(this)):wa(this,this.Y-e)};var Sa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ia(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Ia){this.h=e.h,Ca(this,e.j),this.s=e.s,this.g=e.g,Aa(this,e.m),this.l=e.l;var t=e.i,n=new Ba;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ja(this,n),this.o=e.o}else e&&(t=String(e).match(Sa))?(this.h=!1,Ca(this,t[1]||"",!0),this.s=Pa(t[2]||""),this.g=Pa(t[3]||"",!0),Aa(this,t[4]),this.l=Pa(t[5]||"",!0),ja(this,t[6]||"",!0),this.o=Pa(t[7]||"")):(this.h=!1,this.i=new Ba(null,this.h))}function Ta(e){return new Ia(e)}function Ca(e,t,n){e.j=n?Pa(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Aa(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function ja(e,t,n){t instanceof Ba?(e.i=t,function(e,t){t&&!e.j&&($a(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(qa(this,t),Wa(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=Oa(t,Va)),e.i=new Ba(t,e.h))}function Da(e,t,n){e.i.set(t,n)}function Ra(e){return Da(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Pa(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Oa(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,La),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function La(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ia.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Oa(t,Ma,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Oa(t,Ma,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Oa(n,"/"==n.charAt(0)?Ua:Fa,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Oa(n,za)),e.join("")};var Ma=/[#\/\?@]/g,Fa=/[#\?:]/g,Ua=/[#\?]/g,Va=/[#\?@]/g,za=/#/g;function Ba(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function $a(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function qa(e,t){$a(e),t=Ka(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ha(e,t){return $a(e),t=Ka(e,t),e.g.has(t)}function Wa(e,t,n){qa(e,t),0<n.length&&(e.i=null,e.g.set(Ka(e,t),Si(n)),e.h+=n.length)}function Ka(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(ui=Ba.prototype).add=function(e,t){$a(this),this.i=null,e=Ka(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},ui.forEach=function(e,t){$a(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},ui.ta=function(){$a(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},ui.Z=function(e){$a(this);let t=[];if("string"===typeof e)Ha(this,e)&&(t=t.concat(this.g.get(Ka(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},ui.set=function(e,t){return $a(this),this.i=null,Ha(this,e=Ka(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},ui.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},ui.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var i=s;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")};var Ga=class{constructor(e,t){this.g=e,this.map=t}};function Qa(e){this.l=e||Ya,pi.PerformanceNavigationTiming?e=0<(e=pi.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(pi.g&&pi.g.Ka&&pi.g.Ka()&&pi.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ya=10;function Xa(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ja(e){return e.h?1:e.g?e.g.size:0}function Za(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function eo(e,t){e.g?e.g.add(t):e.h=t}function to(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function no(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Si(e.i)}Qa.prototype.cancel=function(){if(this.i=no(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var ro,io=class{stringify(e){return pi.JSON.stringify(e,void 0)}parse(e){return pi.JSON.parse(e,void 0)}};function so(){this.g=new io}function ao(e,t,n){const r=n||"";try{Na(e,function(e,n){let i=e;gi(e)&&(i=ks(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function oo(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function lo(e){this.l=e.fc||null,this.j=e.ob||!1}function co(e,t){bs.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=uo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ei(lo,ta),lo.prototype.g=function(){return new co(this.l,this.j)},lo.prototype.i=(ro={},function(){return ro}),Ei(co,bs);var uo=0;function ho(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function fo(e){e.readyState=4,e.l=null,e.j=null,e.A=null,po(e)}function po(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(ui=co.prototype).open=function(e,t){if(this.readyState!=uo)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,po(this)},ui.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||pi).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},ui.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,fo(this)),this.readyState=uo},ui.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,po(this)),this.g&&(this.readyState=3,po(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof pi.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ho(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},ui.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?fo(this):po(this),3==this.readyState&&ho(this)}},ui.Za=function(e){this.g&&(this.response=this.responseText=e,fo(this))},ui.Ya=function(e){this.g&&(this.response=e,fo(this))},ui.ka=function(){this.g&&fo(this)},ui.setRequestHeader=function(e,t){this.v.append(e,t)},ui.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},ui.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(co.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var mo=pi.JSON.parse;function go(e){bs.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=yo,this.L=this.M=!1}Ei(go,bs);var yo="",vo=/^https?$/i,bo=["POST","PUT"];function wo(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,xo(e),Eo(e)}function xo(e){e.F||(e.F=!0,ws(e,"complete"),ws(e,"error"))}function ko(e){if(e.h&&"undefined"!=typeof fi&&(!e.C[1]||4!=No(e)||2!=e.da()))if(e.v&&4==No(e))Os(e.La,0,e);else if(ws(e,"readystatechange"),4==No(e)){e.h=!1;try{const o=e.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===o){var i=String(e.I).match(Sa)[1]||null;!i&&pi.self&&pi.self.location&&(i=pi.self.location.protocol.slice(0,-1)),r=!vo.test(i?i.toLowerCase():"")}n=r}if(n)ws(e,"complete"),ws(e,"success");else{e.m=6;try{var s=2<No(e)?e.g.statusText:""}catch(a){s=""}e.j=s+" ["+e.da()+"]",xo(e)}}finally{Eo(e)}}}function Eo(e,t){if(e.g){_o(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||ws(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function _o(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(pi.clearTimeout(e.A),e.A=null)}function No(e){return e.g?e.g.readyState:0}function So(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case yo:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(jl){return null}}function Io(e){let t="";return es(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function To(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Io(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Da(e,t,n))}function Co(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ao(e){this.Ga=0,this.j=[],this.l=new Bs,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Co("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Co("baseRetryDelayMs",5e3,e),this.hb=Co("retryDelaySeedMs",1e4,e),this.eb=Co("forwardChannelMaxRetries",2,e),this.xa=Co("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Qa(e&&e.concurrentRequestLimit),this.Ja=new so,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function jo(e){if(Ro(e),3==e.H){var t=e.W++,n=Ta(e.I);if(Da(n,"SID",e.K),Da(n,"RID",t),Da(n,"TYPE","terminate"),Lo(e,n),(t=new ca(e,e.l,t)).L=2,t.v=Ra(Ta(n)),n=!1,pi.navigator&&pi.navigator.sendBeacon)try{n=pi.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&pi.Image&&((new Image).src=t.v,n=!0),n||(t.g=Go(t.l,null),t.g.ha(t.v)),t.G=Date.now(),ba(t)}Wo(e)}function Do(e){e.g&&(Vo(e),e.g.cancel(),e.g=null)}function Ro(e){Do(e),e.u&&(pi.clearTimeout(e.u),e.u=null),Bo(e),e.i.cancel(),e.m&&("number"===typeof e.m&&pi.clearTimeout(e.m),e.m=null)}function Po(e){if(!Xa(e.i)&&!e.m){e.m=!0;var t=e.Na;Ts||js(),Cs||(Ts(),Cs=!0),As.add(t,e),e.C=0}}function Oo(e,t){var n;n=t?t.m:e.W++;const r=Ta(e.I);Da(r,"SID",e.K),Da(r,"RID",n),Da(r,"AID",e.V),Lo(e,r),e.o&&e.s&&To(r,e.o,e.s),n=new ca(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Mo(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),eo(e.i,n),pa(n,r,t)}function Lo(e,t){e.na&&es(e.na,function(e,n){Da(t,n,e)}),e.h&&Na({},function(e,n){Da(t,n,e)})}function Mo(e,t,n){n=Math.min(e.j.length,n);var r=e.h?xi(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let a=0;a<n;a++){let n=i[a].g;const o=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),s=!1;else try{ao(o,e,"req"+n+"_")}catch(Bl){r&&r(o)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Fo(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Ts||js(),Cs||(Ts(),Cs=!0),As.add(t,e),e.A=0}}function Uo(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Js(xi(e.Ma,e),qo(e,e.A)),e.A++,!0)}function Vo(e){null!=e.B&&(pi.clearTimeout(e.B),e.B=null)}function zo(e){e.g=new ca(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Ta(e.wa);Da(t,"RID","rpc"),Da(t,"SID",e.K),Da(t,"AID",e.V),Da(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Da(t,"TO",e.qa),Da(t,"TYPE","xmlhttp"),Lo(e,t),e.o&&e.s&&To(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Ra(Ta(t)),n.s=null,n.S=!0,ma(n,e)}function Bo(e){null!=e.v&&(pi.clearTimeout(e.v),e.v=null)}function $o(e,t){var n=null;if(e.g==t){Bo(e),Vo(e),e.g=null;var r=2}else{if(!Za(e.i,t))return;n=t.F,to(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;ws(r=Ws(),new Xs(r,n)),Po(e)}else Fo(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Ja(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Js(xi(e.Na,e,t),qo(e,e.C)),e.C++,!0))}(e,t)||2==r&&Uo(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Ho(e,5);break;case 4:Ho(e,10);break;case 3:Ho(e,6);break;default:Ho(e,2)}}function qo(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Ho(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=xi(e.pb,e);n||(n=new Ia("//www.google.com/images/cleardot.gif"),pi.location&&"http"==pi.location.protocol||Ca(n,"https"),Ra(n)),function(e,t){const n=new Bs;if(pi.Image){const r=new Image;r.onload=ki(oo,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ki(oo,n,r,"TestLoadImage: error",!1,t),r.onabort=ki(oo,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ki(oo,n,r,"TestLoadImage: timeout",!1,t),pi.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ys(2);e.H=0,e.h&&e.h.za(t),Wo(e),Ro(e)}function Wo(e){if(e.H=0,e.ma=[],e.h){const t=no(e.i);0==t.length&&0==e.j.length||(Ii(e.ma,t),Ii(e.ma,e.j),e.i.i.length=0,Si(e.j),e.j.length=0),e.h.ya()}}function Ko(e,t,n){var r=n instanceof Ia?Ta(n):new Ia(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Aa(r,r.m);else{var i=pi.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new Ia(null);r&&Ca(s,r),t&&(s.g=t),i&&Aa(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Da(r,n,t),Da(r,"VER",e.ra),Lo(e,r),r}function Go(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new go(new lo({ob:!0})):new go(e.va)).Oa(e.J),t}function Qo(){}function Yo(){if(Mi&&!(10<=Number(Ki)))throw Error("Environmental error: no available transport.")}function Xo(e,t){bs.call(this),this.g=new Ao(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Ai(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ai(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new el(this)}function Jo(e){aa.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Zo(){oa.call(this),this.status=1}function el(e){this.g=e}function tl(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function nl(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],a=t+(s^n&(i^s))+r[0]+3614090360&4294967295;a=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(a<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((s=(t=n+((a=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=s+((a=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function rl(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(ui=go.prototype).Oa=function(e){this.M=e},ui.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ia.g(),this.C=this.u?na(this.u):na(ia),this.g.onreadystatechange=xi(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void wo(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=pi.FormData&&e instanceof pi.FormData,!(0<=Ni(bo,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,o]of n)this.g.setRequestHeader(a,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{_o(this),0<this.B&&((this.L=function(e){return Mi&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=xi(this.ua,this)):this.A=Os(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){wo(this,s)}},ui.ua=function(){"undefined"!=typeof fi&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ws(this,"timeout"),this.abort(8))},ui.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ws(this,"complete"),ws(this,"abort"),Eo(this))},ui.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Eo(this,!0)),go.$.N.call(this)},ui.La=function(){this.s||(this.G||this.v||this.l?ko(this):this.kb())},ui.kb=function(){ko(this)},ui.isActive=function(){return!!this.g},ui.da=function(){try{return 2<No(this)?this.g.status:-1}catch(ro){return-1}},ui.ja=function(){try{return this.g?this.g.responseText:""}catch(ro){return""}},ui.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),mo(t)}},ui.Ia=function(){return this.m},ui.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(ui=Ao.prototype).ra=8,ui.H=1,ui.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new ca(this,this.l,e);let s=this.s;if(this.U&&(s?(s=ts(s),rs(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Mo(this,i,t),Da(n=Ta(this.I),"RID",e),Da(n,"CVER",22),this.F&&Da(n,"X-HTTP-Session-Id",this.F),Lo(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Io(s)))+"&"+t:this.o&&To(n,this.o,s)),eo(this.i,i),this.bb&&Da(n,"TYPE","init"),this.P?(Da(n,"$req",t),Da(n,"SID","null"),i.aa=!0,pa(i,n,null)):pa(i,n,t),this.H=2}}else 3==this.H&&(e?Oo(this,e):0==this.j.length||Xa(this.i)||Oo(this))},ui.Ma=function(){if(this.u=null,zo(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Js(xi(this.jb,this),e)}},ui.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ys(10),Do(this),zo(this))},ui.ib=function(){null!=this.v&&(this.v=null,Do(this),Uo(this),Ys(19))},ui.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Ys(2)):(this.l.info("Failed to ping google.com"),Ys(1))},ui.isActive=function(){return!!this.h&&this.h.isActive(this)},(ui=Qo.prototype).Ba=function(){},ui.Aa=function(){},ui.za=function(){},ui.ya=function(){},ui.isActive=function(){return!0},ui.Va=function(){},Yo.prototype.g=function(e,t){return new Xo(e,t)},Ei(Xo,bs),Xo.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Ys(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Ko(e,null,e.Y),Po(e)},Xo.prototype.close=function(){jo(this.g)},Xo.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ks(e),e=n);t.j.push(new Ga(t.fb++,e)),3==t.H&&Po(t)},Xo.prototype.N=function(){this.g.h=null,delete this.j,jo(this.g),delete this.g,Xo.$.N.call(this)},Ei(Jo,aa),Ei(Zo,oa),Ei(el,Qo),el.prototype.Ba=function(){ws(this.g,"a")},el.prototype.Aa=function(e){ws(this.g,new Jo(e))},el.prototype.za=function(e){ws(this.g,new Zo)},el.prototype.ya=function(){ws(this.g,"b")},Ei(tl,function(){this.blockSize=-1}),tl.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},tl.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)nl(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){nl(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){nl(this,r),i=0;break}}this.h=i,this.i+=t},tl.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var il={};function sl(e){return-128<=e&&128>e?function(e,t){var n=il;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new rl([0|e],0>e?-1:0)}):new rl([0|e],0>e?-1:0)}function al(e){if(isNaN(e)||!isFinite(e))return ll;if(0>e)return fl(al(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=ol;return new rl(t,0)}var ol=4294967296,ll=sl(0),cl=sl(1),ul=sl(16777216);function hl(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function dl(e){return-1==e.h}function fl(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new rl(n,~e.h).add(cl)}function pl(e,t){return e.add(fl(t))}function ml(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function gl(e,t){this.g=e,this.h=t}function yl(e,t){if(hl(t))throw Error("division by zero");if(hl(e))return new gl(ll,ll);if(dl(e))return t=yl(fl(e),t),new gl(fl(t.g),fl(t.h));if(dl(t))return t=yl(e,fl(t)),new gl(fl(t.g),t.h);if(30<e.g.length){if(dl(e)||dl(t))throw Error("slowDivide_ only works with positive integers.");for(var n=cl,r=t;0>=r.X(e);)n=vl(n),r=vl(r);var i=bl(n,1),s=bl(r,1);for(r=bl(r,2),n=bl(n,2);!hl(r);){var a=s.add(r);0>=a.X(e)&&(i=i.add(n),s=a),r=bl(r,1),n=bl(n,1)}return t=pl(e,i.R(t)),new gl(i,t)}for(i=ll;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),a=(s=al(n)).R(t);dl(a)||0<a.X(e);)a=(s=al(n-=r)).R(t);hl(s)&&(s=cl),i=i.add(s),e=pl(e,a)}return new gl(i,e)}function vl(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new rl(n,e.h)}function bl(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new rl(i,e.h)}(ui=rl.prototype).ea=function(){if(dl(this))return-fl(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:ol+r)*t,t*=ol}return e},ui.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(hl(this))return"0";if(dl(this))return"-"+fl(this).toString(e);for(var t=al(Math.pow(e,6)),n=this,r="";;){var i=yl(n,t).g,s=((0<(n=pl(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(hl(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},ui.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},ui.X=function(e){return dl(e=pl(this,e))?-1:hl(e)?0:1},ui.abs=function(){return dl(this)?fl(this):this},ui.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),a=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=a>>>16,s&=65535,a&=65535,n[i]=a<<16|s}return new rl(n,-2147483648&n[n.length-1]?-1:0)},ui.R=function(e){if(hl(this)||hl(e))return ll;if(dl(this))return dl(e)?fl(this).R(fl(e)):fl(fl(this).R(e));if(dl(e))return fl(this.R(fl(e)));if(0>this.X(ul)&&0>e.X(ul))return al(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,a=65535&this.D(r),o=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=a*l,ml(n,2*r+2*i),n[2*r+2*i+1]+=s*l,ml(n,2*r+2*i+1),n[2*r+2*i+1]+=a*o,ml(n,2*r+2*i+1),n[2*r+2*i+2]+=s*o,ml(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new rl(n,0)},ui.gb=function(e){return yl(this,e).h},ui.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new rl(n,this.h&e.h)},ui.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new rl(n,this.h|e.h)},ui.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new rl(n,this.h^e.h)},Yo.prototype.createWebChannel=Yo.prototype.g,Xo.prototype.send=Xo.prototype.u,Xo.prototype.open=Xo.prototype.m,Xo.prototype.close=Xo.prototype.close,Zs.NO_ERROR=0,Zs.TIMEOUT=8,Zs.HTTP_ERROR=6,ea.COMPLETE="complete",ra.EventType=sa,sa.OPEN="a",sa.CLOSE="b",sa.ERROR="c",sa.MESSAGE="d",bs.prototype.listen=bs.prototype.O,go.prototype.listenOnce=go.prototype.P,go.prototype.getLastError=go.prototype.Sa,go.prototype.getLastErrorCode=go.prototype.Ia,go.prototype.getStatus=go.prototype.da,go.prototype.getResponseJson=go.prototype.Wa,go.prototype.getResponseText=go.prototype.ja,go.prototype.send=go.prototype.ha,go.prototype.setWithCredentials=go.prototype.Oa,tl.prototype.digest=tl.prototype.l,tl.prototype.reset=tl.prototype.reset,tl.prototype.update=tl.prototype.j,rl.prototype.add=rl.prototype.add,rl.prototype.multiply=rl.prototype.R,rl.prototype.modulo=rl.prototype.gb,rl.prototype.compare=rl.prototype.X,rl.prototype.toNumber=rl.prototype.ea,rl.prototype.toString=rl.prototype.toString,rl.prototype.getBits=rl.prototype.D,rl.fromNumber=al,rl.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return fl(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=al(Math.pow(n,8)),i=ll,s=0;s<t.length;s+=8){var a=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+a),n);8>a?(a=al(Math.pow(n,a)),i=i.R(a).add(al(o))):i=(i=i.R(r)).add(al(o))}return i};var wl=di.createWebChannelTransport=function(){return new Yo},xl=di.getStatEventTarget=function(){return Ws()},kl=di.ErrorCode=Zs,El=di.EventType=ea,_l=di.Event=qs,Nl=di.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Sl=di.FetchXmlHttpFactory=lo,Il=di.WebChannel=ra,Tl=di.XhrIo=go,Cl=di.Md5=tl,Al=di.Integer=rl;const jl="@firebase/firestore";class Dl{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dl.UNAUTHENTICATED=new Dl(null),Dl.GOOGLE_CREDENTIALS=new Dl("google-credentials-uid"),Dl.FIRST_PARTY=new Dl("first-party-uid"),Dl.MOCK_USER=new Dl("mock-user");let Rl="9.23.0";const Pl=new q("@firebase/firestore");function Ol(){return Pl.logLevel}function Ll(e){if(Pl.logLevel<=U.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ul);Pl.debug(`Firestore (${Rl}): ${e}`,...i)}}function Ml(e){if(Pl.logLevel<=U.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ul);Pl.error(`Firestore (${Rl}): ${e}`,...i)}}function Fl(e){if(Pl.logLevel<=U.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ul);Pl.warn(`Firestore (${Rl}): ${e}`,...i)}}function Ul(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Vl(){const e=`FIRESTORE (${Rl}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw Ml(e),new Error(e)}function zl(e,t){e||Vl()}function Bl(e,t){return e}const $l={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ql extends k{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Hl{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Wl{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Kl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Dl.UNAUTHENTICATED))}shutdown(){}}class Gl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ql{constructor(e){this.t=e,this.currentUser=Dl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Hl;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Hl,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{Ll("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Ll("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Hl)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Ll("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(zl("string"==typeof t.accessToken),new Wl(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return zl(null===e||"string"==typeof e),new Dl(e)}}class Yl{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=Dl.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Xl{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Yl(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Dl.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Jl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Zl{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&Ll("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.T;return this.T=e.token,Ll("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Ll("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?r(e):Ll("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(zl("string"==typeof e.token),this.T=e.token,new Jl(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ec(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class tc{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=ec(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function nc(e,t){return e<t?-1:e>t?1:0}function rc(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class ic{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ql($l.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ql($l.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ql($l.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ql($l.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ic.fromMillis(Date.now())}static fromDate(e){return ic.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new ic(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?nc(this.nanoseconds,e.nanoseconds):nc(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class sc{constructor(e){this.timestamp=e}static fromTimestamp(e){return new sc(e)}static min(){return new sc(new ic(0,0))}static max(){return new sc(new ic(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ac{constructor(e,t,n){void 0===t?t=0:t>e.length&&Vl(),void 0===n?n=e.length-t:n>e.length-t&&Vl(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ac.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ac?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class oc extends ac{construct(e,t,n){return new oc(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new ql($l.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(e=>e.length>0))}return new oc(e)}static emptyPath(){return new oc([])}}const lc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cc extends ac{construct(e,t,n){return new cc(e,t,n)}static isValidIdentifier(e){return lc.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cc.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new cc(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new ql($l.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new ql($l.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new ql($l.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new ql($l.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cc(t)}static emptyPath(){return new cc([])}}class uc{constructor(e){this.path=e}static fromPath(e){return new uc(oc.fromString(e))}static fromName(e){return new uc(oc.fromString(e).popFirst(5))}static empty(){return new uc(oc.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===oc.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return oc.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new uc(new oc(e.slice()))}}class hc{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}hc.UNKNOWN_ID=-1;function dc(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=sc.fromTimestamp(1e9===r?new ic(n+1,0):new ic(n,r));return new pc(i,uc.empty(),t)}function fc(e){return new pc(e.readTime,e.key,-1)}class pc{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new pc(sc.min(),uc.empty(),-1)}static max(){return new pc(sc.max(),uc.empty(),-1)}}function mc(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=uc.comparator(e.documentKey,t.documentKey),0!==n?n:nc(e.largestBatchId,t.largestBatchId))}const gc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function vc(e){if(e.code!==$l.FAILED_PRECONDITION||e.message!==gc)throw e;Ll("LocalStore","Unexpectedly lost primary lease")}class bc{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Vl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new bc((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof bc?t:bc.resolve(t)}catch(e){return bc.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):bc.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):bc.reject(t)}static resolve(e){return new bc((t,n)=>{t(e)})}static reject(e){return new bc((t,n)=>{n(e)})}static waitFor(e){return new bc((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=bc.resolve(!1);for(const n of e)t=t.next(e=>e?bc.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new bc((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next(e=>{s[l]=e,++a,a===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new bc((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function wc(e){return"IndexedDbTransactionError"===e.name}class xc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function kc(e){return null==e}function Ec(e){return 0===e&&1/e==-1/0}function _c(e){return"number"==typeof e&&Number.isInteger(e)&&!Ec(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}xc.ct=-1;const Nc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Sc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ic=Sc;function Tc(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Cc(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ac(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class jc{constructor(e,t){this.comparator=e,this.root=t||Rc.EMPTY}insert(e,t){return new jc(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Rc.BLACK,null,null))}remove(e){return new jc(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rc.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dc(this.root,e,this.comparator,!0)}}class Dc{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rc{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Rc.RED,this.left=null!=r?r:Rc.EMPTY,this.right=null!=i?i:Rc.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Rc(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Rc.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Rc.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Vl();if(this.right.isRed())throw Vl();const e=this.left.check();if(e!==this.right.check())throw Vl();return e+(this.isRed()?0:1)}}Rc.EMPTY=null,Rc.RED=!0,Rc.BLACK=!1,Rc.EMPTY=new class{constructor(){this.size=0}get key(){throw Vl()}get value(){throw Vl()}get color(){throw Vl()}get left(){throw Vl()}get right(){throw Vl()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Rc(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Pc{constructor(e){this.comparator=e,this.data=new jc(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Oc(this.data.getIterator())}getIteratorFrom(e){return new Oc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Pc))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Pc(this.comparator);return t.data=e,t}}class Oc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Lc{constructor(e){this.fields=e,e.sort(cc.comparator)}static empty(){return new Lc([])}unionWith(e){let t=new Pc(cc.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Lc(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return rc(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Mc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Fc{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Mc("Invalid base64 string: "+e):e}}(e);return new Fc(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Fc(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nc(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fc.EMPTY_BYTE_STRING=new Fc("");const Uc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vc(e){if(zl(!!e),"string"==typeof e){let t=0;const n=Uc.exec(e);if(zl(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:zc(e.seconds),nanos:zc(e.nanos)}}function zc(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Bc(e){return"string"==typeof e?Fc.fromBase64String(e):Fc.fromUint8Array(e)}function $c(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function qc(e){const t=e.mapValue.fields.__previous_value__;return $c(t)?qc(t):t}function Hc(e){const t=Vc(e.mapValue.fields.__local_write_time__.timestampValue);return new ic(t.seconds,t.nanos)}class Wc{constructor(e,t,n,r,i,s,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class Kc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Kc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Kc&&e.projectId===this.projectId&&e.database===this.database}}const Gc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Qc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?$c(e)?4:cu(e)?9007199254740991:10:Vl()}function Yc(e,t){if(e===t)return!0;const n=Qc(e);if(n!==Qc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Hc(e).isEqual(Hc(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Vc(e.timestampValue),r=Vc(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Bc(e.bytesValue).isEqual(Bc(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return zc(e.geoPointValue.latitude)===zc(t.geoPointValue.latitude)&&zc(e.geoPointValue.longitude)===zc(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return zc(e.integerValue)===zc(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=zc(e.doubleValue),r=zc(t.doubleValue);return n===r?Ec(n)===Ec(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return rc(e.arrayValue.values||[],t.arrayValue.values||[],Yc);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Tc(n)!==Tc(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Yc(n[i],r[i])))return!1;return!0}(e,t);default:return Vl()}}function Xc(e,t){return void 0!==(e.values||[]).find(e=>Yc(e,t))}function Jc(e,t){if(e===t)return 0;const n=Qc(e),r=Qc(t);if(n!==r)return nc(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return nc(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=zc(e.integerValue||e.doubleValue),r=zc(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Zc(e.timestampValue,t.timestampValue);case 4:return Zc(Hc(e),Hc(t));case 5:return nc(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Bc(e),r=Bc(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=nc(n[i],r[i]);if(0!==e)return e}return nc(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=nc(zc(e.latitude),zc(t.latitude));return 0!==n?n:nc(zc(e.longitude),zc(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Jc(n[i],r[i]);if(e)return e}return nc(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Gc.mapValue&&t===Gc.mapValue)return 0;if(e===Gc.mapValue)return 1;if(t===Gc.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=nc(r[a],s[a]);if(0!==e)return e;const t=Jc(n[r[a]],i[s[a]]);if(0!==t)return t}return nc(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Vl()}}function Zc(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return nc(e,t);const n=Vc(e),r=Vc(t),i=nc(n.seconds,r.seconds);return 0!==i?i:nc(n.nanos,r.nanos)}function eu(e){return tu(e)}function tu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Vc(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Bc(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,uc.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=tu(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${tu(e.fields[i])}`;return n+"}"}(e.mapValue):Vl();var t,n}function nu(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function ru(e){return!!e&&"integerValue"in e}function iu(e){return!!e&&"arrayValue"in e}function su(e){return!!e&&"nullValue"in e}function au(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ou(e){return!!e&&"mapValue"in e}function lu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Cc(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=lu(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=lu(e.arrayValue.values[n]);return t}return Object.assign({},e)}function cu(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class uu{constructor(e){this.value=e}static empty(){return new uu({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!ou(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lu(t)}setAll(e){let t=cc.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=lu(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());ou(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];ou(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Cc(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new uu(lu(this.value))}}function hu(e){const t=[];return Cc(e.fields,(e,n)=>{const r=new cc([e]);if(ou(n)){const e=hu(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Lc(t)}class du{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new du(e,0,sc.min(),sc.min(),sc.min(),uu.empty(),0)}static newFoundDocument(e,t,n,r){return new du(e,1,t,sc.min(),n,r,0)}static newNoDocument(e,t){return new du(e,2,t,sc.min(),sc.min(),uu.empty(),0)}static newUnknownDocument(e,t){return new du(e,3,t,sc.min(),sc.min(),uu.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(sc.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=uu.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=uu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=sc.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof du&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new du(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class fu{constructor(e,t){this.position=e,this.inclusive=t}}function pu(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?uc.comparator(uc.fromName(a.referenceValue),n.key):Jc(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function mu(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Yc(e.position[n],t.position[n]))return!1;return!0}class gu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function yu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class vu{}class bu extends vu{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Iu(e,t,n):"array-contains"===t?new ju(e,n):"in"===t?new Du(e,n):"not-in"===t?new Ru(e,n):"array-contains-any"===t?new Pu(e,n):new bu(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Tu(e,n):new Cu(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Jc(t,this.value)):null!==t&&Qc(this.value)===Qc(t)&&this.matchesComparison(Jc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Vl()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class wu extends vu{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new wu(e,t)}matches(e){return xu(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(e=>e.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function xu(e){return"and"===e.op}function ku(e){return Eu(e)&&xu(e)}function Eu(e){for(const t of e.filters)if(t instanceof wu)return!1;return!0}function _u(e){if(e instanceof bu)return e.field.canonicalString()+e.op.toString()+eu(e.value);if(ku(e))return e.filters.map(e=>_u(e)).join(",");{const t=e.filters.map(e=>_u(e)).join(",");return`${e.op}(${t})`}}function Nu(e,t){return e instanceof bu?function(e,t){return t instanceof bu&&e.op===t.op&&e.field.isEqual(t.field)&&Yc(e.value,t.value)}(e,t):e instanceof wu?function(e,t){return t instanceof wu&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Nu(n,t.filters[r]),!0)}(e,t):void Vl()}function Su(e){return e instanceof bu?function(e){return`${e.field.canonicalString()} ${e.op} ${eu(e.value)}`}(e):e instanceof wu?function(e){return e.op.toString()+" {"+e.getFilters().map(Su).join(" ,")+"}"}(e):"Filter"}class Iu extends bu{constructor(e,t,n){super(e,t,n),this.key=uc.fromName(n.referenceValue)}matches(e){const t=uc.comparator(e.key,this.key);return this.matchesComparison(t)}}class Tu extends bu{constructor(e,t){super(e,"in",t),this.keys=Au("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Cu extends bu{constructor(e,t){super(e,"not-in",t),this.keys=Au("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Au(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>uc.fromName(e.referenceValue))}class ju extends bu{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return iu(t)&&Xc(t.arrayValue,this.value)}}class Du extends bu{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Xc(this.value.arrayValue,t)}}class Ru extends bu{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Xc(this.value.arrayValue,t)}}class Pu extends bu{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!iu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Xc(this.value.arrayValue,e))}}class Ou{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.dt=null}}function Lu(e){return new Ou(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Mu(e){const t=Bl(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>_u(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),kc(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>eu(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>eu(e)).join(",")),t.dt=e}return t.dt}function Fu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!yu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Nu(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!mu(e.startAt,t.startAt)&&mu(e.endAt,t.endAt)}function Uu(e){return uc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Vu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.wt=null,this._t=null,this.startAt,this.endAt}}function zu(e,t,n,r,i,s,a,o){return new Vu(e,t,n,r,i,s,a,o)}function Bu(e){return new Vu(e)}function $u(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function qu(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Hu(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function Wu(e){return null!==e.collectionGroup}function Ku(e){const t=Bl(e);if(null===t.wt){t.wt=[];const e=Hu(t),n=qu(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new gu(e)),t.wt.push(new gu(cc.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new gu(cc.keyField(),e))}}}return t.wt}function Gu(e){const t=Bl(e);if(!t._t)if("F"===t.limitType)t._t=Lu(t.path,t.collectionGroup,Ku(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of Ku(t)){const t="desc"===i.dir?"asc":"desc";e.push(new gu(i.field,t))}const n=t.endAt?new fu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new fu(t.startAt.position,t.startAt.inclusive):null;t._t=Lu(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function Qu(e,t){t.getFirstInequalityField(),Hu(e);const n=e.filters.concat([t]);return new Vu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Yu(e,t,n){return new Vu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Xu(e,t){return Fu(Gu(e),Gu(t))&&e.limitType===t.limitType}function Ju(e){return`${Mu(Gu(e))}|lt:${e.limitType}`}function Zu(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>Su(e)).join(", ")}]`),kc(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>eu(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>eu(e)).join(",")),`Target(${t})`}(Gu(e))}; limitType=${e.limitType})`}function eh(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):uc.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Ku(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=pu(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ku(e),t))&&!(e.endAt&&!function(e,t,n){const r=pu(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ku(e),t))}(e,t)}function th(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function nh(e){return(t,n)=>{let r=!1;for(const i of Ku(e)){const e=rh(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function rh(e,t,n){const r=e.field.isKeyField()?uc.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Jc(r,i):Vl()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Vl()}}class ih{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Cc(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Ac(this.inner)}size(){return this.innerSize}}const sh=new jc(uc.comparator);function ah(){return sh}const oh=new jc(uc.comparator);function lh(){let e=oh;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function ch(e){let t=oh;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function uh(){return dh()}function hh(){return dh()}function dh(){return new ih(e=>e.toString(),(e,t)=>e.isEqual(t))}const fh=new jc(uc.comparator),ph=new Pc(uc.comparator);function mh(){let e=ph;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const gh=new Pc(nc);function yh(){return gh}function vh(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ec(t)?"-0":t}}function bh(e){return{integerValue:""+e}}function wh(e,t){return _c(t)?bh(t):vh(e,t)}class xh{constructor(){this._=void 0}}function kh(e,t,n){return e instanceof Nh?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&$c(t)&&(t=qc(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Sh?Ih(e,t):e instanceof Th?Ch(e,t):function(e,t){const n=_h(e,t),r=jh(n)+jh(e.gt);return ru(n)&&ru(e.gt)?bh(r):vh(e.serializer,r)}(e,t)}function Eh(e,t,n){return e instanceof Sh?Ih(e,t):e instanceof Th?Ch(e,t):n}function _h(e,t){return e instanceof Ah?ru(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class Nh extends xh{}class Sh extends xh{constructor(e){super(),this.elements=e}}function Ih(e,t){const n=Dh(t);for(const r of e.elements)n.some(e=>Yc(e,r))||n.push(r);return{arrayValue:{values:n}}}class Th extends xh{constructor(e){super(),this.elements=e}}function Ch(e,t){let n=Dh(t);for(const r of e.elements)n=n.filter(e=>!Yc(e,r));return{arrayValue:{values:n}}}class Ah extends xh{constructor(e,t){super(),this.serializer=e,this.gt=t}}function jh(e){return zc(e.integerValue||e.doubleValue)}function Dh(e){return iu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Rh{constructor(e,t){this.field=e,this.transform=t}}class Ph{constructor(e,t){this.version=e,this.transformResults=t}}class Oh{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Oh}static exists(e){return new Oh(void 0,e)}static updateTime(e){return new Oh(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lh(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Mh{}function Fh(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Gh(e.key,Oh.none()):new $h(e.key,e.data,Oh.none());{const n=e.data,r=uu.empty();let i=new Pc(cc.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new qh(e.key,r,new Lc(i.toArray()),Oh.none())}}function Uh(e,t,n){e instanceof $h?function(e,t,n){const r=e.value.clone(),i=Wh(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof qh?function(e,t,n){if(!Lh(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Wh(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Hh(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Vh(e,t,n,r){return e instanceof $h?function(e,t,n,r){if(!Lh(e.precondition,t))return n;const i=e.value.clone(),s=Kh(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof qh?function(e,t,n,r){if(!Lh(e.precondition,t))return n;const i=Kh(e.fieldTransforms,r,t),s=t.data;return s.setAll(Hh(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Lh(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function zh(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=_h(r.transform,e||null);null!=i&&(null===n&&(n=uu.empty()),n.set(r.field,i))}return n||null}function Bh(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&rc(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Sh&&t instanceof Sh||e instanceof Th&&t instanceof Th?rc(e.elements,t.elements,Yc):e instanceof Ah&&t instanceof Ah?Yc(e.gt,t.gt):e instanceof Nh&&t instanceof Nh}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class $h extends Mh{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class qh extends Mh{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Hh(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Wh(e,t,n){const r=new Map;zl(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,Eh(a,o,n[i]))}return r}function Kh(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,kh(e,s,t))}return r}class Gh extends Mh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Qh extends Mh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Yh{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Uh(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Vh(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Vh(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=hh();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=Fh(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(sc.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),mh())}isEqual(e){return this.batchId===e.batchId&&rc(this.mutations,e.mutations,(e,t)=>Bh(e,t))&&rc(this.baseMutations,e.baseMutations,(e,t)=>Bh(e,t))}}class Xh{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){zl(e.mutations.length===n.length);let r=fh;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Xh(e,t,n,r)}}class Jh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Zh{constructor(e,t){this.count=e,this.unchangedNames=t}}var ed,td;function nd(e){switch(e){default:return Vl();case $l.CANCELLED:case $l.UNKNOWN:case $l.DEADLINE_EXCEEDED:case $l.RESOURCE_EXHAUSTED:case $l.INTERNAL:case $l.UNAVAILABLE:case $l.UNAUTHENTICATED:return!1;case $l.INVALID_ARGUMENT:case $l.NOT_FOUND:case $l.ALREADY_EXISTS:case $l.PERMISSION_DENIED:case $l.FAILED_PRECONDITION:case $l.ABORTED:case $l.OUT_OF_RANGE:case $l.UNIMPLEMENTED:case $l.DATA_LOSS:return!0}}function rd(e){if(void 0===e)return Ml("GRPC error has no .code"),$l.UNKNOWN;switch(e){case ed.OK:return $l.OK;case ed.CANCELLED:return $l.CANCELLED;case ed.UNKNOWN:return $l.UNKNOWN;case ed.DEADLINE_EXCEEDED:return $l.DEADLINE_EXCEEDED;case ed.RESOURCE_EXHAUSTED:return $l.RESOURCE_EXHAUSTED;case ed.INTERNAL:return $l.INTERNAL;case ed.UNAVAILABLE:return $l.UNAVAILABLE;case ed.UNAUTHENTICATED:return $l.UNAUTHENTICATED;case ed.INVALID_ARGUMENT:return $l.INVALID_ARGUMENT;case ed.NOT_FOUND:return $l.NOT_FOUND;case ed.ALREADY_EXISTS:return $l.ALREADY_EXISTS;case ed.PERMISSION_DENIED:return $l.PERMISSION_DENIED;case ed.FAILED_PRECONDITION:return $l.FAILED_PRECONDITION;case ed.ABORTED:return $l.ABORTED;case ed.OUT_OF_RANGE:return $l.OUT_OF_RANGE;case ed.UNIMPLEMENTED:return $l.UNIMPLEMENTED;case ed.DATA_LOSS:return $l.DATA_LOSS;default:return Vl()}}(td=ed||(ed={}))[td.OK=0]="OK",td[td.CANCELLED=1]="CANCELLED",td[td.UNKNOWN=2]="UNKNOWN",td[td.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",td[td.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",td[td.NOT_FOUND=5]="NOT_FOUND",td[td.ALREADY_EXISTS=6]="ALREADY_EXISTS",td[td.PERMISSION_DENIED=7]="PERMISSION_DENIED",td[td.UNAUTHENTICATED=16]="UNAUTHENTICATED",td[td.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",td[td.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",td[td.ABORTED=10]="ABORTED",td[td.OUT_OF_RANGE=11]="OUT_OF_RANGE",td[td.UNIMPLEMENTED=12]="UNIMPLEMENTED",td[td.INTERNAL=13]="INTERNAL",td[td.UNAVAILABLE=14]="UNAVAILABLE",td[td.DATA_LOSS=15]="DATA_LOSS";class id{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return sd}static getOrCreateInstance(){return null===sd&&(sd=new id),sd}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let sd=null;function ad(){return new TextEncoder}const od=new Al([4294967295,4294967295],0);function ld(e){const t=ad().encode(e),n=new Cl;return n.update(t),new Uint8Array(n.digest())}function cd(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Al([n,r],0),new Al([i,s],0)]}class ud{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new hd(`Invalid padding: ${t}`);if(n<0)throw new hd(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new hd(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new hd(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Al.fromNumber(this.It)}Et(e,t,n){let r=e.add(t.multiply(Al.fromNumber(n)));return 1===r.compare(od)&&(r=new Al([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=ld(e),[n,r]=cd(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);if(!this.At(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new ud(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.It)return;const t=ld(e),[n,r]=cd(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class hd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class dd{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,fd.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new dd(sc.min(),r,new jc(nc),ah(),mh())}}class fd{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new fd(n,t,mh(),mh(),mh())}}class pd{constructor(e,t,n,r){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=r}}class md{constructor(e,t){this.targetId=e,this.Vt=t}}class gd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fc.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class yd{constructor(){this.St=0,this.Dt=wd(),this.Ct=Fc.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=mh(),t=mh(),n=mh();return this.Dt.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Vl()}}),new fd(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=wd()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class vd{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=ah(),this.zt=bd(),this.Wt=new jc(nc)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:Vl()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((e,n)=>{this.te(n)&&t(n)})}ne(e){var t;const n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){const s=i.target;if(Uu(s))if(0===r){const e=new uc(s.path);this.Yt(n,e,du.newNoDocument(e,sc.min()))}else zl(1===r);else{const i=this.ie(n);if(i!==r){const r=this.re(e,i);if(0!==r){this.ee(n);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=id.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,s,a,o,l;const c={localCacheCount:t,existenceFilterCount:n.count},u=n.unchangedNames;return u&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==u?void 0:u.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(a=null===(s=null===(i=null==u?void 0:u.bits)||void 0===i?void 0:i.bitmap)||void 0===s?void 0:s.length)&&void 0!==a?a:0,padding:null!==(l=null===(o=null==u?void 0:u.bits)||void 0===o?void 0:o.padding)&&void 0!==l?l:0}),c}(r,i,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:r}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=n;let o,l;try{o=Bc(i).toUint8Array()}catch(e){if(e instanceof Mc)return Fl("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{l=new ud(o,s,a)}catch(e){return Fl(e instanceof hd?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===l.It?1:r!==t-this.oe(e.targetId,l)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let r=0;return n.forEach(n=>{const i=this.Gt.ue(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;t.vt(s)||(this.Yt(e,n,null),r++)}),r}ce(e){const t=new Map;this.Qt.forEach((n,r)=>{const i=this.se(r);if(i){if(n.current&&Uu(i.target)){const t=new uc(i.target.path);null!==this.jt.get(t)||this.ae(r,t)||this.Yt(r,t,du.newNoDocument(t,e))}n.Mt&&(t.set(r,n.Ot()),n.Ft())}});let n=mh();this.zt.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.jt.forEach((t,n)=>n.setReadTime(e));const r=new dd(e,t,this.Wt,this.jt,n);return this.jt=ah(),this.zt=bd(),this.Wt=new jc(nc),r}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new yd,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Pc(nc),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Ll("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new yd),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function bd(){return new jc(uc.comparator)}function wd(){return new jc(uc.comparator)}const xd={asc:"ASCENDING",desc:"DESCENDING"},kd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ed={and:"AND",or:"OR"};class _d{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Nd(e,t){return e.useProto3Json||kc(t)?t:{value:t}}function Sd(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Id(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Td(e,t){return Sd(e,t.toTimestamp())}function Cd(e){return zl(!!e),sc.fromTimestamp(function(e){const t=Vc(e);return new ic(t.seconds,t.nanos)}(e))}function Ad(e,t){return function(e){return new oc(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function jd(e){const t=oc.fromString(e);return zl(Xd(t)),t}function Dd(e,t){return Ad(e.databaseId,t.path)}function Rd(e,t){const n=jd(t);if(n.get(1)!==e.databaseId.projectId)throw new ql($l.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ql($l.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new uc(Md(n))}function Pd(e,t){return Ad(e.databaseId,t)}function Od(e){const t=jd(e);return 4===t.length?oc.emptyPath():Md(t)}function Ld(e){return new oc(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Md(e){return zl(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Fd(e,t,n){return{name:Dd(e,t),fields:n.value.mapValue.fields}}function Ud(e,t){let n;if(t instanceof $h)n={update:Fd(e,t.key,t.value)};else if(t instanceof Gh)n={delete:Dd(e,t.key)};else if(t instanceof qh)n={update:Fd(e,t.key,t.data),updateMask:Yd(t.fieldMask)};else{if(!(t instanceof Qh))return Vl();n={verify:Dd(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Nh)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Sh)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Th)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ah)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Vl()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Td(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Vl()}(e,t.precondition)),n}function Vd(e,t){return{documents:[Pd(e,t.path)]}}function zd(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Pd(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Pd(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return Qd(wu.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Kd(e.field),direction:qd(e.dir)}}(e))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const a=Nd(e,t.limit);var o;return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Bd(e){let t=Od(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){zl(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=$d(e);return t instanceof wu&&ku(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=n.orderBy.map(e=>function(e){return new gu(Gd(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,kc(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new fu(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new fu(n,t)}(n.endAt)),zu(t,i,a,s,o,"F",l,c)}function $d(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Gd(e.unaryFilter.field);return bu.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Gd(e.unaryFilter.field);return bu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Gd(e.unaryFilter.field);return bu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Gd(e.unaryFilter.field);return bu.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Vl()}}(e):void 0!==e.fieldFilter?function(e){return bu.create(Gd(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Vl()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return wu.create(e.compositeFilter.filters.map(e=>$d(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Vl()}}(e.compositeFilter.op))}(e):Vl()}function qd(e){return xd[e]}function Hd(e){return kd[e]}function Wd(e){return Ed[e]}function Kd(e){return{fieldPath:e.canonicalString()}}function Gd(e){return cc.fromServerFormat(e.fieldPath)}function Qd(e){return e instanceof bu?function(e){if("=="===e.op){if(au(e.value))return{unaryFilter:{field:Kd(e.field),op:"IS_NAN"}};if(su(e.value))return{unaryFilter:{field:Kd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(au(e.value))return{unaryFilter:{field:Kd(e.field),op:"IS_NOT_NAN"}};if(su(e.value))return{unaryFilter:{field:Kd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kd(e.field),op:Hd(e.op),value:e.value}}}(e):e instanceof wu?function(e){const t=e.getFilters().map(e=>Qd(e));return 1===t.length?t[0]:{compositeFilter:{op:Wd(e.op),filters:t}}}(e):Vl()}function Yd(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Xd(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Jd{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:sc.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:sc.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Fc.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Jd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Jd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Jd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Jd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Zd{constructor(e){this.fe=e}}function ef(e){const t=Bd({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Yu(t,t.limit,"L"):t}class tf{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(zc(e.integerValue));else if("doubleValue"in e){const n=zc(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),Ec(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ye(t,20),"string"==typeof n?t.Ie(n):(t.Ie(`${n.seconds||""}`),t.pe(n.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Bc(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ye(t,45),t.pe(n.latitude||0),t.pe(n.longitude||0)}else"mapValue"in e?cu(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Vl()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const n=e.fields||{};this.ye(t,55);for(const r of Object.keys(n))this.Te(r,t),this.me(n[r],t)}Pe(e,t){const n=e.values||[];this.ye(t,50);for(const r of n)this.me(r,t)}ve(e,t){this.ye(t,37),uc.fromName(e).path.forEach(e=>{this.ye(t,60),this.be(e,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}tf.Ve=new tf;class nf{constructor(){this.rn=new rf}addToCollectionParentIndex(e,t){return this.rn.add(t),bc.resolve()}getCollectionParents(e,t){return bc.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return bc.resolve()}deleteFieldIndex(e,t){return bc.resolve()}getDocumentsMatchingTarget(e,t){return bc.resolve(null)}getIndexType(e,t){return bc.resolve(0)}getFieldIndexes(e,t){return bc.resolve([])}getNextCollectionGroupToUpdate(e){return bc.resolve(null)}getMinOffset(e,t){return bc.resolve(pc.min())}getMinOffsetFromCollectionGroup(e,t){return bc.resolve(pc.min())}updateCollectionGroup(e,t,n){return bc.resolve()}updateIndexEntries(e,t){return bc.resolve()}}class rf{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Pc(oc.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Pc(oc.comparator)).toArray()}}new Uint8Array(0);class sf{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new sf(e,sf.DEFAULT_COLLECTION_PERCENTILE,sf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}sf.DEFAULT_COLLECTION_PERCENTILE=10,sf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sf.DEFAULT=new sf(41943040,sf.DEFAULT_COLLECTION_PERCENTILE,sf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sf.DISABLED=new sf(-1,0,0);class af{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new af(0)}static Mn(){return new af(-1)}}class of{constructor(){this.changes=new ih(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,du.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?bc.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class lf{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class cf{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Vh(n.mutation,e,Lc.empty(),ic.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,mh()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mh();const r=uh();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=lh();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=uh();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,mh()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=ah();const s=dh(),a=dh();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof qh)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),Vh(a.mutation,t,a.mutation.getFieldMask(),ic.now())):s.set(t.key,Lc.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new lf(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=dh();let r=new jc((e,t)=>e-t),i=mh();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||Lc.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||mh()).add(e);r=r.insert(i.batchId,o)})}).next(()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=hh();l.forEach(e=>{if(!i.has(e)){const r=Fh(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,c))}return bc.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n){return function(e){return uc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Wu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):bc.resolve(uh());let a=-1,o=i;return s.next(t=>bc.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?bc.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,mh())).next(e=>({batchId:a,changes:ch(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new uc(t)).next(e=>{let t=lh();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let i=lh();return this.indexManager.getCollectionParents(e,r).next(s=>bc.forEach(s,s=>{const a=function(e,t){return new Vu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.getDocumentsMatchingCollectionQuery(e,a,n).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r))).next(e=>{r.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,du.newInvalidDocument(r)))});let n=lh();return e.forEach((e,i)=>{const s=r.get(e);void 0!==s&&Vh(s.mutation,i,Lc.empty(),ic.now()),eh(t,i)&&(n=n.insert(e,i))}),n})}}class uf{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return bc.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:Cd(n.createTime)}),bc.resolve()}getNamedQuery(e,t){return bc.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:ef(e.bundledQuery),readTime:Cd(e.readTime)}}(t)),bc.resolve()}}class hf{constructor(){this.overlays=new jc(uc.comparator),this.ls=new Map}getOverlay(e,t){return bc.resolve(this.overlays.get(t))}getOverlays(e,t){const n=uh();return bc.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.we(e,t,r)}),bc.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.ls.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.ls.delete(n)),bc.resolve()}getOverlaysForCollection(e,t,n){const r=uh(),i=t.length+1,s=new uc(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return bc.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new jc((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=uh(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=uh(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return bc.resolve(a)}we(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Jh(t,n));let i=this.ls.get(t);void 0===i&&(i=mh(),this.ls.set(t,i)),this.ls.set(t,i.add(n.key))}}class df{constructor(){this.fs=new Pc(ff.ds),this.ws=new Pc(ff._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new ff(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.ys(new ff(e,t))}ps(e,t){e.forEach(e=>this.removeReference(e,t))}Is(e){const t=new uc(new oc([])),n=new ff(t,e),r=new ff(t,e+1),i=[];return this.ws.forEachInRange([n,r],e=>{this.ys(e),i.push(e.key)}),i}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new uc(new oc([])),n=new ff(t,e),r=new ff(t,e+1);let i=mh();return this.ws.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new ff(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class ff{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return uc.comparator(e.key,t.key)||nc(e.As,t.As)}static _s(e,t){return nc(e.As,t.As)||uc.comparator(e.key,t.key)}}class pf{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Pc(ff.ds)}checkEmpty(e){return bc.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Yh(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.Rs=this.Rs.add(new ff(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return bc.resolve(s)}lookupMutationBatch(e,t){return bc.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.bs(n),i=r<0?0:r;return bc.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return bc.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return bc.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new ff(t,0),r=new ff(t,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([n,r],e=>{const t=this.Ps(e.As);i.push(t)}),bc.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Pc(nc);return t.forEach(e=>{const t=new ff(e,0),r=new ff(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,r],e=>{n=n.add(e.As)})}),bc.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;uc.isDocumentKey(i)||(i=i.child(""));const s=new ff(new uc(i),0);let a=new Pc(nc);return this.Rs.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.As)),!0)},s),bc.resolve(this.Vs(a))}Vs(e){const t=[];return e.forEach(e=>{const n=this.Ps(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){zl(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return bc.forEach(t.mutations,r=>{const i=new ff(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=n})}Cn(e){}containsKey(e,t){const n=new ff(t,0),r=this.Rs.firstAfterOrEqual(n);return bc.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,bc.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class mf{constructor(e){this.Ds=e,this.docs=new jc(uc.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return bc.resolve(n?n.document.mutableCopy():du.newInvalidDocument(t))}getEntries(e,t){let n=ah();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():du.newInvalidDocument(e))}),bc.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=ah();const s=t.path,a=new uc(s.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||mc(fc(a),n)<=0||(r.has(a.key)||eh(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return bc.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Vl()}Cs(e,t){return bc.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new gf(this)}getSize(e){return bc.resolve(this.size)}}class gf extends of{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(n)}),bc.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class yf{constructor(e){this.persistence=e,this.xs=new ih(e=>Mu(e),Fu),this.lastRemoteSnapshotVersion=sc.min(),this.highestTargetId=0,this.Ns=0,this.ks=new df,this.targetCount=0,this.Ms=af.kn()}forEachTarget(e,t){return this.xs.forEach((e,n)=>t(n)),bc.resolve()}getLastRemoteSnapshotVersion(e){return bc.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return bc.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),bc.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),bc.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new af(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,bc.resolve()}updateTargetData(e,t){return this.Fn(t),bc.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,bc.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.xs.forEach((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.xs.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),bc.waitFor(i).next(()=>r)}getTargetCount(e){return bc.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return bc.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),bc.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),bc.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),bc.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return bc.resolve(n)}containsKey(e,t){return bc.resolve(this.ks.containsKey(t))}}class vf{constructor(e,t){this.$s={},this.overlays={},this.Os=new xc(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new yf(this),this.indexManager=new nf,this.remoteDocumentCache=function(e){return new mf(e)}(e=>this.referenceDelegate.Ls(e)),this.serializer=new Zd(t),this.qs=new uf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new hf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new pf(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){Ll("MemoryPersistence","Starting transaction:",e);const r=new bf(this.Os.next());return this.referenceDelegate.Us(),n(r).next(e=>this.referenceDelegate.Ks(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Gs(e,t){return bc.or(Object.values(this.$s).map(n=>()=>n.containsKey(e,t)))}}class bf extends yc{constructor(e){super(),this.currentSequenceNumber=e}}class wf{constructor(e){this.persistence=e,this.Qs=new df,this.js=null}static zs(e){return new wf(e)}get Ws(){if(this.js)return this.js;throw Vl()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),bc.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),bc.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),bc.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(e=>this.Ws.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Ws.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return bc.forEach(this.Ws,n=>{const r=uc.fromPath(n);return this.Hs(e,r).next(e=>{e||t.removeEntry(r,sc.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return bc.or([()=>bc.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class xf{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=r}static Li(e,t){let n=mh(),r=mh();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new xf(e,t.fromCache,n,r)}}class kf{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ki(e,t).next(i=>i||this.Gi(e,t,r,n)).next(n=>n||this.Qi(e,t))}Ki(e,t){if($u(t))return bc.resolve(null);let n=Gu(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Yu(t,null,"F"),n=Gu(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=mh(...r);return this.Ui.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.ji(t,r);return this.zi(t,s,i,n.readTime)?this.Ki(e,Yu(t,null,"F")):this.Wi(e,s,t,n)}))})))}Gi(e,t,n,r){return $u(t)||r.isEqual(sc.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next(i=>{const s=this.ji(t,i);return this.zi(t,s,n,r)?this.Qi(e,t):(Ol()<=U.DEBUG&&Ll("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Zu(t)),this.Wi(e,s,t,dc(r,-1)))})}ji(e,t){let n=new Pc(nh(e));return t.forEach((t,r)=>{eh(e,r)&&(n=n.add(r))}),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Qi(e,t){return Ol()<=U.DEBUG&&Ll("QueryEngine","Using full collection scan to execute query:",Zu(t)),this.Ui.getDocumentsMatchingQuery(e,t,pc.min())}Wi(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class Ef{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new jc(nc),this.Yi=new ih(e=>Mu(e),Fu),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cf(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function _f(e,t,n,r){return new Ef(e,t,n,r)}async function Nf(e,t){const n=Bl(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.tr(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let a=mh();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({er:e,removedBatchIds:i,addedBatchIds:s}))})})}function Sf(e){const t=Bl(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Bs.getLastRemoteSnapshotVersion(e))}function If(e,t,n){let r=mh(),i=mh();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=ah();return n.forEach((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(sc.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Ll("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),{nr:r,sr:i}})}function Tf(e,t){const n=Bl(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Cf(e,t){const n=Bl(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Bs.getTargetData(e,t).next(i=>i?(r=i,bc.resolve(r)):n.Bs.allocateTargetId(e).next(i=>(r=new Jd(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e})}async function Af(e,t,n){const r=Bl(e),i=r.Ji.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!wc(e))throw e;Ll("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ji=r.Ji.remove(t),r.Yi.delete(i.target)}function jf(e,t,n){const r=Bl(e);let i=sc.min(),s=mh();return r.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const r=Bl(e),i=r.Yi.get(n);return void 0!==i?bc.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,Gu(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Hi.getDocumentsMatchingQuery(e,t,n?i:sc.min(),n?s:mh())).next(e=>(Df(r,th(t),e),{documents:e,ir:s})))}function Df(e,t,n){let r=e.Xi.get(t)||sc.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Xi.set(t,r)}class Rf{constructor(){this.activeTargetIds=yh()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Pf{constructor(){this.Hr=new Rf,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Rf,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Of{Yr(e){}shutdown(){}}class Lf{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ll("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Ll("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Mf=null;function Ff(){return null===Mf?Mf=268435456+Math.round(2147483648*Math.random()):Mf++,"0x"+Mf.toString(16)}const Uf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Vf{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const zf="WebChannelConnection";class Bf extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,r,i){const s=Ff(),a=this.To(e,t);Ll("RestConnection",`Sending RPC '${e}' ${s}:`,a,n);const o={};return this.Eo(o,r,i),this.Ao(e,a,o,n).then(t=>(Ll("RestConnection",`Received RPC '${e}' ${s}: `,t),t),t=>{throw Fl("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",a,"request:",n),t})}vo(e,t,n,r,i,s){return this.Io(e,t,n,r,i)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Rl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}To(e,t){const n=Uf[e];return`${this.mo}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,r){const i=Ff();return new Promise((s,a)=>{const o=new Tl;o.setWithCredentials(!0),o.listenOnce(El.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case kl.NO_ERROR:const t=o.getResponseJson();Ll(zf,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case kl.TIMEOUT:Ll(zf,`RPC '${e}' ${i} timed out`),a(new ql($l.DEADLINE_EXCEEDED,"Request time out"));break;case kl.HTTP_ERROR:const n=o.getStatus();if(Ll(zf,`RPC '${e}' ${i} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values($l).indexOf(t)>=0?t:$l.UNKNOWN}(t.status);a(new ql(e,t.message))}else a(new ql($l.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new ql($l.UNAVAILABLE,"Connection failed."));break;default:Vl()}}finally{Ll(zf,`RPC '${e}' ${i} completed.`)}});const l=JSON.stringify(r);Ll(zf,`RPC '${e}' ${i} sending request:`,r),o.send(t,"POST",l,n,15)})}Ro(e,t,n){const r=Ff(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=wl(),a=xl(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.xmlHttpFactory=new Sl({})),this.Eo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=i.join("");Ll(zf,`Creating RPC '${e}' stream ${r}: ${c}`,o);const u=s.createWebChannel(c,o);let h=!1,d=!1;const f=new Vf({ro:t=>{d?Ll(zf,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(Ll(zf,`Opening RPC '${e}' stream ${r} transport.`),u.open(),h=!0),Ll(zf,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},oo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,Il.EventType.OPEN,()=>{d||Ll(zf,`RPC '${e}' stream ${r} transport opened.`)}),p(u,Il.EventType.CLOSE,()=>{d||(d=!0,Ll(zf,`RPC '${e}' stream ${r} transport closed`),f.wo())}),p(u,Il.EventType.ERROR,t=>{d||(d=!0,Fl(zf,`RPC '${e}' stream ${r} transport errored:`,t),f.wo(new ql($l.UNAVAILABLE,"The operation could not be completed")))}),p(u,Il.EventType.MESSAGE,t=>{var n;if(!d){const i=t.data[0];zl(!!i);const s=i,a=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){Ll(zf,`RPC '${e}' stream ${r} received error:`,a);const t=a.status;let n=function(e){const t=ed[e];if(void 0!==t)return rd(t)}(t),i=a.message;void 0===n&&(n=$l.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),d=!0,f.wo(new ql(n,i)),u.close()}else Ll(zf,`RPC '${e}' stream ${r} received:`,i),f._o(i)}}),p(a,_l.STAT_EVENT,t=>{t.stat===Nl.PROXY?Ll(zf,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Nl.NOPROXY&&Ll(zf,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.fo()},0),f}}function $f(){return"undefined"!=typeof document?document:null}function qf(e){return new _d(e,!0)}class Hf{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ii=e,this.timerId=t,this.Po=n,this.bo=r,this.Vo=i,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-n);r>0&&Ll("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Wf{constructor(e,t,n,r,i,s,a,o){this.ii=e,this.$o=n,this.Oo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Hf(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===$l.RESOURCE_EXHAUSTED?(Ml(t.toString()),Ml("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===$l.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Fo===t&&this.Zo(n,r)},t=>{e(()=>{const e=new ql($l.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)})})}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{n(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(e=>{n(()=>this.tu(e))}),this.stream.onMessage(e=>{n(()=>this.onMessage(e))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return Ll("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Ll("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Kf extends Wf{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Vl()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(zl(void 0===t||"string"==typeof t),Fc.fromBase64String(t||"")):(zl(void 0===t||t instanceof Uint8Array),Fc.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?$l.UNKNOWN:rd(e.code);return new ql(t,e.message||"")}(a);n=new gd(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Rd(e,r.document.name),s=Cd(r.document.updateTime),a=r.document.createTime?Cd(r.document.createTime):sc.min(),o=new uu({mapValue:{fields:r.document.fields}}),l=du.newFoundDocument(i,s,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new pd(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Rd(e,r.document),s=r.readTime?Cd(r.readTime):sc.min(),a=du.newNoDocument(i,s),o=r.removedTargetIds||[];n=new pd([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Rd(e,r.document),s=r.removedTargetIds||[];n=new pd([],s,i,null)}else{if(!("filter"in t))return Vl();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Zh(r,i),a=e.targetId;n=new md(a,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return sc.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?sc.min():t.readTime?Cd(t.readTime):sc.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=Ld(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Uu(r)?{documents:Vd(e,r)}:{query:zd(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Id(e,t.resumeToken);const r=Nd(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(sc.min())>0){n.readTime=Sd(e,t.snapshotVersion.toTimestamp());const r=Nd(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Vl()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=Ld(this.serializer),t.removeTarget=e,this.Wo(t)}}class Gf extends Wf{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(zl(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(zl(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?Cd(e.updateTime):Cd(t);return n.isEqual(sc.min())&&(n=Cd(t)),new Ph(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Cd(e.commitTime);return this.listener.cu(n,t)}return zl(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Ld(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Ud(this.serializer,e))};this.Wo(t)}}class Qf extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new ql($l.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(r=>{let[i,s]=r;return this.connection.Io(e,t,n,i,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===$l.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ql($l.UNKNOWN,e.toString())})}vo(e,t,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,a]=i;return this.connection.vo(e,t,n,s,a,r)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===$l.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ql($l.UNKNOWN,e.toString())})}terminate(){this.lu=!0}}class Yf{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Ml(t),this.mu=!1):Ll("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Xf{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=i,this.Pu.Yr(e=>{n.enqueueAndForget(async()=>{ap(this)&&(Ll("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Bl(e);t.vu.add(4),await Zf(t),t.bu.set("Unknown"),t.vu.delete(4),await Jf(t)}(this))})}),this.bu=new Yf(n,r)}}async function Jf(e){if(ap(e))for(const t of e.Ru)await t(!0)}async function Zf(e){for(const t of e.Ru)await t(!1)}function ep(e,t){const n=Bl(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),sp(n)?ip(n):_p(n).Ko()&&np(n,t))}function tp(e,t){const n=Bl(e),r=_p(n);n.Au.delete(t),r.Ko()&&rp(n,t),0===n.Au.size&&(r.Ko()?r.jo():ap(n)&&n.bu.set("Unknown"))}function np(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(sc.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}_p(e).su(t)}function rp(e,t){e.Vu.qt(t),_p(e).iu(t)}function ip(e){e.Vu=new vd({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),_p(e).start(),e.bu.gu()}function sp(e){return ap(e)&&!_p(e).Uo()&&e.Au.size>0}function ap(e){return 0===Bl(e).vu.size}function op(e){e.Vu=void 0}async function lp(e){e.Au.forEach((t,n)=>{np(e,t)})}async function cp(e,t){op(e),sp(e)?(e.bu.Iu(t),ip(e)):e.bu.set("Unknown")}async function up(e,t,n){if(e.bu.set("Online"),t instanceof gd&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Au.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Au.delete(r),e.Vu.removeTarget(r))}(e,t)}catch(n){Ll("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await hp(e,n)}else if(t instanceof pd?e.Vu.Ht(t):t instanceof md?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(sc.min()))try{const t=await Sf(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Au.get(t);if(!r)return;e.Au.set(t,r.withResumeToken(Fc.EMPTY_BYTE_STRING,r.snapshotVersion)),rp(e,t);const i=new Jd(r.target,t,n,r.sequenceNumber);np(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Ll("RemoteStore","Failed to raise snapshot:",t),await hp(e,t)}}async function hp(e,t,n){if(!wc(t))throw t;e.vu.add(1),await Zf(e),e.bu.set("Offline"),n||(n=()=>Sf(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Ll("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await Jf(e)})}function dp(e,t){return t().catch(n=>hp(e,n,t))}async function fp(e){const t=Bl(e),n=Np(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;pp(t);)try{const e=await Tf(t.localStore,r);if(null===e){0===t.Eu.length&&n.jo();break}r=e.batchId,mp(t,e)}catch(e){await hp(t,e)}gp(t)&&yp(t)}function pp(e){return ap(e)&&e.Eu.length<10}function mp(e,t){e.Eu.push(t);const n=Np(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function gp(e){return ap(e)&&!Np(e).Uo()&&e.Eu.length>0}function yp(e){Np(e).start()}async function vp(e){Np(e).hu()}async function bp(e){const t=Np(e);for(const n of e.Eu)t.uu(n.mutations)}async function wp(e,t,n){const r=e.Eu.shift(),i=Xh.from(r,t,n);await dp(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await fp(e)}async function xp(e,t){t&&Np(e).ou&&await async function(e,t){if(nd(n=t.code)&&n!==$l.ABORTED){const n=e.Eu.shift();Np(e).Qo(),await dp(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await fp(e)}var n}(e,t),gp(e)&&yp(e)}async function kp(e,t){const n=Bl(e);n.asyncQueue.verifyOperationInProgress(),Ll("RemoteStore","RemoteStore received new credentials");const r=ap(n);n.vu.add(3),await Zf(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await Jf(n)}async function Ep(e,t){const n=Bl(e);t?(n.vu.delete(2),await Jf(n)):t||(n.vu.add(2),await Zf(n),n.bu.set("Unknown"))}function _p(e){return e.Su||(e.Su=function(e,t,n){const r=Bl(e);return r.fu(),new Kf(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:lp.bind(null,e),ao:cp.bind(null,e),nu:up.bind(null,e)}),e.Ru.push(async t=>{t?(e.Su.Qo(),sp(e)?ip(e):e.bu.set("Unknown")):(await e.Su.stop(),op(e))})),e.Su}function Np(e){return e.Du||(e.Du=function(e,t,n){const r=Bl(e);return r.fu(),new Gf(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:vp.bind(null,e),ao:xp.bind(null,e),au:bp.bind(null,e),cu:wp.bind(null,e)}),e.Ru.push(async t=>{t?(e.Du.Qo(),await fp(e)):(await e.Du.stop(),e.Eu.length>0&&(Ll("RemoteStore",`Stopping write stream with ${e.Eu.length} pending writes`),e.Eu=[]))})),e.Du}class Sp{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Hl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new Sp(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ql($l.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ip(e,t){if(Ml("AsyncQueue",`${t}: ${e}`),wc(e))return new ql($l.UNAVAILABLE,`${t}: ${e}`);throw e}class Tp{constructor(e){this.comparator=e?(t,n)=>e(t,n)||uc.comparator(t.key,n.key):(e,t)=>uc.comparator(e.key,t.key),this.keyedMap=lh(),this.sortedSet=new jc(this.comparator)}static emptySet(e){return new Tp(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Tp))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Tp;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Cp{constructor(){this.Cu=new jc(uc.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Vl():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,n)=>{e.push(n)}),e}}class Ap{constructor(e,t,n,r,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new Ap(e,t,Tp.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class jp{constructor(){this.Nu=void 0,this.listeners=[]}}class Dp{constructor(){this.queries=new ih(e=>Ju(e),Xu),this.onlineState="Unknown",this.ku=new Set}}async function Rp(e,t){const n=Bl(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new jp),i)try{s.Nu=await n.onListen(r)}catch(e){const n=Ip(e,`Initialization of query '${Zu(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.Mu(n.onlineState),s.Nu&&t.$u(s.Nu)&&Mp(n)}async function Pp(e,t){const n=Bl(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Op(e,t){const n=Bl(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(i)&&(r=!0);t.Nu=i}}r&&Mp(n)}function Lp(e,t,n){const r=Bl(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function Mp(e){e.ku.forEach(e=>{e.next()})}class Fp{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Ap(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=Ap.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class Up{constructor(e){this.key=e}}class Vp{constructor(e){this.key=e}}class zp{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=mh(),this.mutatedKeys=mh(),this.tc=nh(e),this.ec=new Tp(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new Cp,r=t?t.ec:this.ec;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=eh(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.rc(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.tc(u,o)>0||l&&this.tc(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ec:s,ic:n,zi:a,mutatedKeys:i}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const i=e.ic.xu();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Vl()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc)),this.oc(n);const s=t?this.uc():[],a=0===this.Zu.size&&this.current?1:0,o=a!==this.Xu;return this.Xu=a,0!==i.length||o?{snapshot:new Ap(this.query,e.ec,r,i,e.mutatedKeys,0===a,o,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:s}:{cc:s}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Cp,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(e=>this.Yu=this.Yu.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Yu=this.Yu.delete(e)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=mh(),this.ec.forEach(e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))});const t=[];return e.forEach(e=>{this.Zu.has(e)||t.push(new Vp(e))}),this.Zu.forEach(n=>{e.has(n)||t.push(new Up(n))}),t}hc(e){this.Yu=e.ir,this.Zu=mh();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Ap.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Bp{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class $p{constructor(e){this.key=e,this.fc=!1}}class qp{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.dc={},this.wc=new ih(e=>Ju(e),Xu),this._c=new Map,this.mc=new Set,this.gc=new jc(uc.comparator),this.yc=new Map,this.Ic=new df,this.Tc={},this.Ec=new Map,this.Ac=af.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function Hp(e,t){const n=cm(e);let r,i;const s=n.wc.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const e=await Cf(n.localStore,Gu(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await Wp(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&ep(n.remoteStore,e)}return i}async function Wp(e,t,n,r,i){e.Rc=(t,n,r)=>async function(e,t,n,r){let i=t.view.sc(n);i.zi&&(i=await jf(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.sc(n,i)}));const s=r&&r.targetChanges.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s);return rm(e,t.targetId,a.cc),a.snapshot}(e,t,n,r);const s=await jf(e.localStore,t,!0),a=new zp(t,s.ir),o=a.sc(s.documents),l=fd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(o,e.isPrimaryClient,l);rm(e,n,c.cc);const u=new Bp(t,n,a);return e.wc.set(t,u),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),c.snapshot}async function Kp(e,t){const n=Bl(e),r=n.wc.get(t),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter(e=>!Xu(e,t))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Af(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),tp(n.remoteStore,r.targetId),tm(n,r.targetId)}).catch(vc)):(tm(n,r.targetId),await Af(n.localStore,r.targetId,!0))}async function Gp(e,t){const n=Bl(e);try{const e=await function(e,t){const n=Bl(e),r=t.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const a=[];t.targetChanges.forEach((s,o)=>{const l=i.get(o);if(!l)return;a.push(n.Bs.removeMatchingKeys(e,s.removedDocuments,o).next(()=>n.Bs.addMatchingKeys(e,s.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(Fc.EMPTY_BYTE_STRING,sc.min()).withLastLimboFreeSnapshotVersion(sc.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&a.push(n.Bs.updateTargetData(e,c))});let o=ah(),l=mh();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(If(e,s,t.documentUpdates).next(e=>{o=e.nr,l=e.sr})),!r.isEqual(sc.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next(t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return bc.waitFor(a).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Ji=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.yc.get(t);r&&(zl(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.fc=!0:e.modifiedDocuments.size>0?zl(r.fc):e.removedDocuments.size>0&&(zl(r.fc),r.fc=!1))}),await am(n,e,t)}catch(e){await vc(e)}}function Qp(e,t,n){const r=Bl(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wc.forEach((n,r)=>{const i=r.view.Mu(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Bl(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.listeners)i.Mu(t)&&(r=!0)}),r&&Mp(n)}(r.eventManager,t),e.length&&r.dc.nu(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Yp(e,t,n){const r=Bl(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.yc.get(t),s=i&&i.key;if(s){let e=new jc(uc.comparator);e=e.insert(s,du.newNoDocument(s,sc.min()));const n=mh().add(s),i=new dd(sc.min(),new Map,new jc(nc),e,n);await Gp(r,i),r.gc=r.gc.remove(s),r.yc.delete(t),sm(r)}else await Af(r.localStore,t,!1).then(()=>tm(r,t,n)).catch(vc)}async function Xp(e,t){const n=Bl(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Bl(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=bc.resolve();return s.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);zl(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=mh();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);em(n,r,null),Zp(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await am(n,e)}catch(e){await vc(e)}}async function Jp(e,t,n){const r=Bl(e);try{const e=await function(e,t){const n=Bl(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(zl(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);em(r,t,n),Zp(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await am(r,e)}catch(n){await vc(n)}}function Zp(e,t){(e.Ec.get(t)||[]).forEach(e=>{e.resolve()}),e.Ec.delete(t)}function em(e,t,n){const r=Bl(e);let i=r.Tc[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function tm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e._c.get(t))e.wc.delete(r),n&&e.dc.Pc(r,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach(t=>{e.Ic.containsKey(t)||nm(e,t)})}function nm(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(tp(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),sm(e))}function rm(e,t,n){for(const r of n)r instanceof Up?(e.Ic.addReference(r.key,t),im(e,r)):r instanceof Vp?(Ll("SyncEngine","Document no longer in limbo: "+r.key),e.Ic.removeReference(r.key,t),e.Ic.containsKey(r.key)||nm(e,r.key)):Vl()}function im(e,t){const n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(Ll("SyncEngine","New document in limbo: "+n),e.mc.add(r),sm(e))}function sm(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new uc(oc.fromString(t)),r=e.Ac.next();e.yc.set(r,new $p(n)),e.gc=e.gc.insert(n,r),ep(e.remoteStore,new Jd(Gu(Bu(n.path)),r,"TargetPurposeLimboResolution",xc.ct))}}async function am(e,t,n){const r=Bl(e),i=[],s=[],a=[];r.wc.isEmpty()||(r.wc.forEach((e,o)=>{a.push(r.Rc(o,t,n).then(e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(o.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=xf.Li(o.targetId,e);s.push(t)}}))}),await Promise.all(a),r.dc.nu(i),await async function(e,t){const n=Bl(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>bc.forEach(t,t=>bc.forEach(t.Fi,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>bc.forEach(t.Bi,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!wc(e))throw e;Ll("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ji.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(e,i)}}}(r.localStore,s))}async function om(e,t){const n=Bl(e);if(!n.currentUser.isEqual(t)){Ll("SyncEngine","User change. New user:",t.toKey());const e=await Nf(n.localStore,t);n.currentUser=t,function(e){e.Ec.forEach(e=>{e.forEach(e=>{e.reject(new ql($l.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await am(n,e.er)}}function lm(e,t){const n=Bl(e),r=n.yc.get(t);if(r&&r.fc)return mh().add(r.key);{let e=mh();const r=n._c.get(t);if(!r)return e;for(const t of r){const r=n.wc.get(t);e=e.unionWith(r.view.nc)}return e}}function cm(e){const t=Bl(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Gp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=lm.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Yp.bind(null,t),t.dc.nu=Op.bind(null,t.eventManager),t.dc.Pc=Lp.bind(null,t.eventManager),t}function um(e){const t=Bl(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Xp.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Jp.bind(null,t),t}class hm{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=qf(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return _f(this.persistence,new kf,e.initialUser,this.serializer)}createPersistence(e){return new vf(wf.zs,this.serializer)}createSharedClientState(e){return new Pf}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class dm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Qp(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=om.bind(null,this.syncEngine),await Ep(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Dp}createDatastore(e){const t=qf(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new Bf(r));var r;return function(e,t,n,r){return new Qf(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>Qp(this.syncEngine,e,0),s=Lf.D()?new Lf:new Of,new Xf(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new qp(e,t,n,r,i,s);return a&&(o.vc=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Bl(e);Ll("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await Zf(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}class fm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Ml("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class pm{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Dl.UNAUTHENTICATED,this.clientId=tc.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async e=>{Ll("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Ll("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ql($l.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Ip(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function mm(e,t){e.asyncQueue.verifyOperationInProgress(),Ll("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Nf(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function gm(e,t){e.asyncQueue.verifyOperationInProgress();const n=await vm(e);Ll("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener(e=>kp(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>kp(t.remoteStore,n)),e._onlineComponents=t}function ym(e){return"FirebaseError"===e.name?e.code===$l.FAILED_PRECONDITION||e.code===$l.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function vm(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ll("FirestoreClient","Using user provided OfflineComponentProvider");try{await mm(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!ym(n))throw n;Fl("Error using user provided cache. Falling back to memory cache: "+n),await mm(e,new hm)}}else Ll("FirestoreClient","Using default OfflineComponentProvider"),await mm(e,new hm);return e._offlineComponents}async function bm(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ll("FirestoreClient","Using user provided OnlineComponentProvider"),await gm(e,e._uninitializedComponentsProvider._online)):(Ll("FirestoreClient","Using default OnlineComponentProvider"),await gm(e,new dm))),e._onlineComponents}function wm(e){return bm(e).then(e=>e.syncEngine)}async function xm(e){const t=await bm(e),n=t.eventManager;return n.onListen=Hp.bind(null,t.syncEngine),n.onUnlisten=Kp.bind(null,t.syncEngine),n}function km(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Hl;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new fm({next:s=>{t.enqueueAndForget(()=>Pp(e,a));const o=s.docs.has(n);!o&&s.fromCache?i.reject(new ql($l.UNAVAILABLE,"Failed to get document because the client is offline.")):o&&s.fromCache&&r&&"server"===r.source?i.reject(new ql($l.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),a=new Fp(Bu(n.path),s,{includeMetadataChanges:!0,Ku:!0});return Rp(e,a)}(await xm(e),e.asyncQueue,t,n,r)),r.promise}function Em(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Hl;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new fm({next:n=>{t.enqueueAndForget(()=>Pp(e,a)),n.fromCache&&"server"===r.source?i.reject(new ql($l.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new Fp(n,s,{includeMetadataChanges:!0,Ku:!0});return Rp(e,a)}(await xm(e),e.asyncQueue,t,n,r)),r.promise}function _m(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Nm=new Map;function Sm(e,t,n){if(!n)throw new ql($l.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Im(e){if(!uc.isDocumentKey(e))throw new ql($l.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Tm(e){if(uc.isDocumentKey(e))throw new ql($l.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Cm(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Vl()}function Am(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ql($l.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Cm(e);throw new ql($l.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class jm{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new ql($l.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ql($l.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new ql($l.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_m(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ql($l.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new ql($l.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new ql($l.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class Dm{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ql($l.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ql($l.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jm(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Kl;switch(e.type){case"firstParty":return new Xl(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ql($l.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Nm.get(e);t&&(Ll("ComponentProvider","Removing Datastore"),Nm.delete(e),t.terminate())}(this),Promise.resolve()}}class Rm{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Om(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rm(this.firestore,e,this._key)}}class Pm{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Pm(this.firestore,e,this._query)}}class Om extends Pm{constructor(e,t,n){super(e,t,Bu(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rm(this.firestore,null,new uc(e))}withConverter(e){return new Om(this.firestore,e,this._path)}}function Lm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=R(e),Sm("collection","path",t),e instanceof Dm){const n=oc.fromString(t,...r);return Tm(n),new Om(e,null,n)}{if(!(e instanceof Rm||e instanceof Om))throw new ql($l.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(oc.fromString(t,...r));return Tm(n),new Om(e.firestore,null,n)}}function Mm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=R(e),1===arguments.length&&(t=tc.A()),Sm("doc","path",t),e instanceof Dm){const n=oc.fromString(t,...r);return Im(n),new Rm(e,null,new uc(n))}{if(!(e instanceof Rm||e instanceof Om))throw new ql($l.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(oc.fromString(t,...r));return Im(n),new Rm(e.firestore,e instanceof Om?e.converter:null,new uc(n))}}class Fm{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Hf(this,"async_queue_retry"),this.Xc=()=>{const e=$f();e&&Ll("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=$f();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=$f();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Hl;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!wc(e))throw e;Ll("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(e=>{this.Wc=e,this.Hc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ml("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.Hc=!1,e))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=Sp.createAndSchedule(this,e,t,n,e=>this.na(e));return this.zc.push(r),r}Zc(){this.Wc&&Vl()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function Um(e){return function(e){if("object"!=typeof e||null===e)return!1;const t=e;for(const n of["next","error","complete"])if(n in t&&"function"==typeof t[n])return!0;return!1}(e)}class Vm extends Dm{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Fm,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Bm(this),this._firestoreClient.terminate()}}function zm(e){return e._firestoreClient||Bm(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Bm(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Wc(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,_m(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new pm(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class $m{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $m(Fc.fromBase64String(e))}catch(e){throw new ql($l.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new $m(Fc.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class qm{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new ql($l.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cc(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Hm{constructor(e){this._methodName=e}}class Wm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ql($l.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ql($l.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return nc(this._lat,e._lat)||nc(this._long,e._long)}}const Km=/^__.*__$/;class Gm{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new qh(e,this.data,this.fieldMask,t,this.fieldTransforms):new $h(e,this.data,t,this.fieldTransforms)}}class Qm{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new qh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ym(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Vl()}}class Xm{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ua(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Xm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return pg(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Ym(this.ca)&&Km.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Jm{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||qf(e)}ya(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Xm({ca:e,methodName:t,ga:n,path:cc.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zm(e){const t=e._freezeSettings(),n=qf(e._databaseId);return new Jm(e._databaseId,!!t.ignoreUndefinedProperties,n)}function eg(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.ya(s.merge||s.mergeFields?2:0,t,n,i);ug("Data must be an object, but it was:",a,r);const o=lg(r,a);let l,c;if(s.merge)l=new Lc(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=hg(t,r,n);if(!a.contains(i))throw new ql($l.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);mg(e,i)||e.push(i)}l=new Lc(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new Gm(new uu(o),l,c)}class tg extends Hm{_toFieldTransform(e){if(2!==e.ca)throw 1===e.ca?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof tg}}function ng(e,t,n){return new Xm({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class rg extends Hm{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=ng(this,e,!0),n=this.pa.map(e=>og(e,t)),r=new Sh(n);return new Rh(e.path,r)}isEqual(e){return this===e}}function ig(e,t,n,r){const i=e.ya(1,t,n);ug("Data must be an object, but it was:",i,r);const s=[],a=uu.empty();Cc(r,(e,r)=>{const o=fg(t,e,n);r=R(r);const l=i.da(o);if(r instanceof tg)s.push(o);else{const e=og(r,l);null!=e&&(s.push(o),a.set(o,e))}});const o=new Lc(s);return new Qm(a,o,i.fieldTransforms)}function sg(e,t,n,r,i,s){const a=e.ya(1,t,n),o=[hg(t,r,n)],l=[i];if(s.length%2!=0)throw new ql($l.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)o.push(hg(t,s[d])),l.push(s[d+1]);const c=[],u=uu.empty();for(let d=o.length-1;d>=0;--d)if(!mg(c,o[d])){const e=o[d];let t=l[d];t=R(t);const n=a.da(e);if(t instanceof tg)c.push(e);else{const r=og(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new Lc(c);return new Qm(u,h,a.fieldTransforms)}function ag(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return og(n,e.ya(r?4:3,t))}function og(e,t){if(cg(e=R(e)))return ug("Unsupported field value:",t,e),lg(e,t);if(e instanceof Hm)return function(e,t){if(!Ym(t.ca))throw t._a(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t._a(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=og(i,t.wa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=R(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return wh(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ic.fromDate(e);return{timestampValue:Sd(t.serializer,n)}}if(e instanceof ic){const n=new ic(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Sd(t.serializer,n)}}if(e instanceof Wm)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof $m)return{bytesValue:Id(t.serializer,e._byteString)};if(e instanceof Rm){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._a(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Ad(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a(`Unsupported field value: ${Cm(e)}`)}(e,t)}function lg(e,t){const n={};return Ac(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Cc(e,(e,r)=>{const i=og(r,t.ha(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function cg(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ic||e instanceof Wm||e instanceof $m||e instanceof Rm||e instanceof Hm)}function ug(e,t,n){if(!cg(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Cm(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function hg(e,t,n){if((t=R(t))instanceof qm)return t._internalPath;if("string"==typeof t)return fg(e,t);throw pg("Field path arguments must be of type string or ",e,!1,void 0,n)}const dg=new RegExp("[~\\*/\\[\\]]");function fg(e,t,n){if(t.search(dg)>=0)throw pg(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new qm(...t.split("."))._internalPath}catch(r){throw pg(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function pg(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new ql($l.INVALID_ARGUMENT,o+e+l)}function mg(e,t){return e.some(e=>e.isEqual(t))}class gg{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Rm(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new yg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(vg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class yg extends gg{data(){return super.data()}}function vg(e,t){return"string"==typeof t?fg(e,t):t instanceof qm?t._internalPath:t._delegate._internalPath}function bg(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ql($l.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wg{}class xg extends wg{}function kg(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof wg&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof Ng).length,n=e.filter(e=>e instanceof Eg).length;if(t>1||t>0&&n>0)throw new ql($l.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class Eg extends xg{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Eg(e,t,n)}_apply(e){const t=this._parse(e);return Ag(e._query,t),new Pm(e.firestore,e.converter,Qu(e._query,t))}_parse(e){const t=Zm(e.firestore),n=function(e,t,n,r,i,s,a){let o;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new ql($l.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){Cg(a,s);const t=[];for(const n of a)t.push(Tg(r,e,n));o={arrayValue:{values:t}}}else o=Tg(r,e,a)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Cg(a,s),o=ag(n,"where",a,"in"===s||"not-in"===s);return bu.create(i,s,o)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function _g(e,t,n){const r=t,i=vg("where",e);return Eg._create(i,r,n)}class Ng extends wg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ng(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:wu.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Ag(n,i),n=Qu(n,i)}(e._query,t),new Pm(e.firestore,e.converter,Qu(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Sg extends xg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Sg(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new ql($l.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ql($l.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new gu(t,n);return function(e,t){if(null===qu(e)){const n=Hu(e);null!==n&&jg(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new Pm(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Vu(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Ig(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=vg("orderBy",e);return Sg._create(n,t)}function Tg(e,t,n){if("string"==typeof(n=R(n))){if(""===n)throw new ql($l.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wu(t)&&-1!==n.indexOf("/"))throw new ql($l.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(oc.fromString(n));if(!uc.isDocumentKey(r))throw new ql($l.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return nu(e,new uc(r))}if(n instanceof Rm)return nu(e,n._key);throw new ql($l.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cm(n)}.`)}function Cg(e,t){if(!Array.isArray(e)||0===e.length)throw new ql($l.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Ag(e,t){if(t.isInequality()){const n=Hu(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new ql($l.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${r.toString()}'`);const i=qu(e);null!==i&&jg(e,r,i)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new ql($l.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ql($l.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}function jg(e,t,n){if(!n.isEqual(t))throw new ql($l.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Dg{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Qc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zc(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Bc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Vl()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Cc(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertGeoPoint(e){return new Wm(zc(e.latitude),zc(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=qc(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Hc(e));default:return null}}convertTimestamp(e){const t=Vc(e);return new ic(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=oc.fromString(e);zl(Xd(n));const r=new Kc(n.get(1),n.get(3)),i=new uc(n.popFirst(5));return r.isEqual(t)||Ml(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function Rg(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Pg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Og extends gg{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Lg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(vg("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Lg extends Og{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Mg{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Pg(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Lg(this._firestore,this._userDataWriter,n.key,n,new Pg(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ql($l.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Lg(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Pg(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Lg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Pg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Fg(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Fg(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Vl()}}class Ug extends Dg{constructor(e){super(),this.firestore=e}convertBytes(e){return new $m(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rm(this.firestore,null,t)}}function Vg(e){e=Am(e,Pm);const t=Am(e.firestore,Vm),n=zm(t),r=new Ug(t);return bg(e._query),Em(n,e._query).then(n=>new Mg(t,r,e,n))}function zg(e,t,n){e=Am(e,Rm);const r=Am(e.firestore,Vm),i=Zm(r);let s;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return s="string"==typeof(t=R(t))||t instanceof qm?sg(i,"updateDoc",e._key,t,n,o):ig(i,"updateDoc",e._key,t),Hg(r,[s.toMutation(e._key,Oh.exists(!0))])}function Bg(e){return Hg(Am(e.firestore,Vm),[new Gh(e._key,Oh.none())])}function $g(e,t){const n=Am(e.firestore,Vm),r=Mm(e),i=Rg(e.converter,t);return Hg(n,[eg(Zm(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Oh.exists(!1))]).then(()=>r)}function qg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,a;e=R(e);let o={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||Um(n[l])||(o=n[l],l++);const c={includeMetadataChanges:o.includeMetadataChanges};if(Um(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let u,h,d;if(e instanceof Rm)h=Am(e.firestore,Vm),d=Bu(e._key.path),u={next:t=>{n[l]&&n[l](Wg(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=Am(e,Pm);h=Am(t.firestore,Vm),d=t._query;const r=new Ug(h);u={next:e=>{n[l]&&n[l](new Mg(h,r,t,e))},error:n[l+1],complete:n[l+2]},bg(e._query)}return function(e,t,n,r){const i=new fm(r),s=new Fp(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>Rp(await xm(e),s)),()=>{i.Dc(),e.asyncQueue.enqueueAndForget(async()=>Pp(await xm(e),s))}}(zm(h),d,c,u)}function Hg(e,t){return function(e,t){const n=new Hl;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=um(e);try{const e=await function(e,t){const n=Bl(e),r=ic.now(),i=t.reduce((e,t)=>e.add(t.key),mh());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=ah(),l=mh();return n.Zi.getEntries(e,i).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(i=>{s=i;const a=[];for(const e of t){const t=zh(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new qh(e.key,t,hu(t.value.mapValue),Oh.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:ch(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Tc[e.currentUser.toKey()];r||(r=new jc(nc)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(r,e.batchId,n),await am(r,e.changes),await fp(r.remoteStore)}catch(e){const t=Ip(e,"Failed to persist write");n.reject(t)}}(await wm(e),t,n)),n.promise}(zm(e),t)}function Wg(e,t,n){const r=n.docs.get(t._key),i=new Ug(e);return new Og(e,i,t._key,r,new Pg(n.hasPendingWrites,n.fromCache),t.converter)}function Kg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new rg("arrayUnion",t)}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Rl=e}(qe),Ve(new P("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),a=new Vm(new Ql(e.getProvider("auth-internal")),new Zl(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ql($l.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kc(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Ke(jl,"3.13.0",e),Ke(jl,"3.13.0","esm2017")}();Ke("firebase","9.23.0","app");const Gg="firebasestorage.googleapis.com",Qg="storageBucket";class Yg extends k{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Zg(e),`Firebase Storage: ${t} (${Zg(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Yg.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Zg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var Xg,Jg;function Zg(e){return"storage/"+e}function ey(){return new Yg(Xg.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function ty(){return new Yg(Xg.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ny(){return new Yg(Xg.CANCELED,"User canceled the upload/download.")}function ry(e){return new Yg(Xg.INVALID_ARGUMENT,e)}function iy(){return new Yg(Xg.APP_DELETED,"The Firebase app was deleted.")}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Xg||(Xg={}));class sy{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=sy.makeFromUrl(e,t)}catch(i){return new sy(e,"")}if(""===n.path)return n;throw r=e,new Yg(Xg.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),o=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${a}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp(`^https?://${t===Gg?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<o.length;l++){const t=o[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new sy(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new Yg(Xg.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class ay{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function oy(e,t,n,r){if(r<t)throw ry(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw ry(`Invalid value for '${e}'. Expected ${n} or less.`)}function ly(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function cy(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Jg||(Jg={}));class uy{constructor(e,t,n,r,i,s,a,o,l,c,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new hy(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===Jg.NO_ERROR,i=n.getStatus();if(!t||cy(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Jg.ABORT;return void e(!1,new hy(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new hy(s,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(s){r(s)}else if(null!==i){const e=ey();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?iy():ny())}else{r(ty())}};this.canceled_?t(0,new hy(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,a=!1,o=0;function l(){return 2===o}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout(()=>{i=null,e(f,l())},t)}function d(){s&&clearTimeout(s)}function f(e){if(c)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return d(),void u.call(null,e,...n);if(l()||a)return d(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===o?(o=2,s=0):s=1e3*(r+Math.random()),h(s)}let p=!1;function m(e){p||(p=!0,d(),c||(null!==i?(e||(o=2),clearTimeout(i),h(0)):e||(o=1)))}return h(0),s=setTimeout(()=>{a=!0,m(!0)},n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class hy{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function dy(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}class fy{constructor(e,t){this._service=e,this._location=t instanceof sy?t:sy.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new fy(e,t)}get root(){const e=new sy(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return dy(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new sy(this._location.bucket,e);return new fy(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Yg(Xg.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function py(e,t){const n=null===t||void 0===t?void 0:t[Qg];return null==n?null:sy.makeFromBucketSpec(n,e)}class my{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=Gg,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?sy.makeFromBucketSpec(r,this._host):py(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=sy.makeFromBucketSpec(this._url,e):this._bucket=py(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){oy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){oy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new fy(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new ay(iy());{const s=function(e,t,n,r,i,s){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const o=ly(e.urlParams),l=e.url+o,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new uy(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,a)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const gy="@firebase/storage",yy="0.11.2",vy="storage";function by(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new my(r,i,s,n,qe)}Ve(new P(vy,by,"PUBLIC").setMultipleInstances(!0)),Ke(gy,yy,""),Ke(gy,yy,"esm2017");let wy,xy;const ky=new WeakMap,Ey=new WeakMap,_y=new WeakMap,Ny=new WeakMap,Sy=new WeakMap;let Iy={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ey.get(e);if("objectStoreNames"===t)return e.objectStoreNames||_y.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ay(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ty(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(xy||(xy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(jy(this),n),Ay(ky.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ay(e.apply(jy(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(jy(this),t,...r);return _y.set(s,t.sort?t.sort():[t]),Ay(s)}}function Cy(e){return"function"===typeof e?Ty(e):(e instanceof IDBTransaction&&function(e){if(Ey.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});Ey.set(e,t)}(e),t=e,(wy||(wy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Iy):e);var t}function Ay(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Ay(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&ky.set(t,e)}).catch(()=>{}),Sy.set(t,e),t}(e);if(Ny.has(e))return Ny.get(e);const t=Cy(e);return t!==e&&(Ny.set(e,t),Sy.set(t,e)),t}const jy=e=>Sy.get(e);const Dy=["get","getKey","getAll","getAllKeys","count"],Ry=["put","add","delete","clear"],Py=new Map;function Oy(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Py.get(t))return Py.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Ry.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Dy.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return Py.set(t,s),s}!function(e){Iy=e(Iy)}(e=>({...e,get:(t,n,r)=>Oy(t,n)||e.get(t,n,r),has:(t,n)=>!!Oy(t,n)||e.has(t,n)}));const Ly="@firebase/installations",My="0.6.4",Fy=1e4,Uy=`w:${My}`,Vy="FIS_v2",zy=36e5,By=new E("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function $y(e){return e instanceof k&&e.code.includes("request-failed")}function qy(e){let{projectId:t}=e;return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function Hy(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function Wy(e,t){const n=(await t.json()).error;return By.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Ky(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Gy(e,t){let{refreshToken:n}=t;const r=Ky(e);return r.append("Authorization",function(e){return`${Vy} ${e}`}(n)),r}async function Qy(e){const t=await e();return t.status>=500&&t.status<600?e():t}function Yy(e){return new Promise(t=>{setTimeout(t,e)})}const Xy=/^[cdef][\w-]{21}$/;function Jy(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return Xy.test(t)?t:""}catch(e){return""}}function Zy(e){return`${e.appName}!${e.appId}`}const ev=new Map;function tv(e,t){const n=Zy(e);nv(n,t),function(e,t){const n=iv();n&&n.postMessage({key:e,fid:t});sv()}(n,t)}function nv(e,t){const n=ev.get(e);if(n)for(const r of n)r(t)}let rv=null;function iv(){return!rv&&"BroadcastChannel"in self&&(rv=new BroadcastChannel("[Firebase] FID Change"),rv.onmessage=e=>{nv(e.data.key,e.data.fid)}),rv}function sv(){0===ev.size&&rv&&(rv.close(),rv=null)}const av="firebase-installations-store";let ov=null;function lv(){return ov||(ov=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=Ay(a);return r&&a.addEventListener("upgradeneeded",e=>{r(Ay(a.result),e.oldVersion,e.newVersion,Ay(a.transaction))}),n&&a.addEventListener("blocked",()=>n()),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",()=>i())}).catch(()=>{}),o}("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(av)}})),ov}async function cv(e,t){const n=Zy(e),r=(await lv()).transaction(av,"readwrite"),i=r.objectStore(av),s=await i.get(n);return await i.put(t,n),await r.done,s&&s.fid===t.fid||tv(e,t.fid),t}async function uv(e){const t=Zy(e),n=(await lv()).transaction(av,"readwrite");await n.objectStore(av).delete(t),await n.done}async function hv(e,t){const n=Zy(e),r=(await lv()).transaction(av,"readwrite"),i=r.objectStore(av),s=await i.get(n),a=t(s);return void 0===a?await i.delete(n):await i.put(a,n),await r.done,!a||s&&s.fid===a.fid||tv(e,a.fid),a}async function dv(e){let t;const n=await hv(e.appConfig,n=>{const r=function(e){const t=e||{fid:Jy(),registrationStatus:0};return mv(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(By.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const s=qy(n),a=Ky(n),o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const l={fid:i,authVersion:Vy,appId:n.appId,sdkVersion:Uy},c={method:"POST",headers:a,body:JSON.stringify(l)},u=await Qy(()=>fetch(s,c));if(u.ok){const e=await u.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:Hy(e.authToken)}}throw await Wy("Create Installation",u)}(e,t);return cv(e.appConfig,n)}catch(n){throw $y(n)&&409===n.customData.serverCode?await uv(e.appConfig):await cv(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:fv(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry});return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function fv(e){let t=await pv(e.appConfig);for(;1===t.registrationStatus;)await Yy(100),t=await pv(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await dv(e);return n||t}return t}function pv(e){return hv(e,e=>{if(!e)throw By.create("installation-not-found");return mv(e)})}function mv(e){return 1===(t=e).registrationStatus&&t.registrationTime+Fy<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function gv(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return`${qy(e)}/${n}/authTokens:generate`}(n,t),s=Gy(n,t),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const o={installation:{sdkVersion:Uy,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await Qy(()=>fetch(i,l));if(c.ok){return Hy(await c.json())}throw await Wy("Generate Auth Token",c)}async function yv(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await hv(e.appConfig,r=>{if(!bv(r))throw By.create("not-registered");const i=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+zy}(e)}(i))return r;if(1===i.requestStatus)return t=async function(e,t){let n=await vv(e.appConfig);for(;1===n.authToken.requestStatus;)await Yy(100),n=await vv(e.appConfig);const r=n.authToken;return 0===r.requestStatus?yv(e,t):r}(e,n),r;{if(!navigator.onLine)throw By.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await gv(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await cv(e.appConfig,r),n}catch(n){if(!$y(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await cv(e.appConfig,n)}else await uv(e.appConfig);throw n}}(e,n),n}});return t?await t:r.authToken}function vv(e){return hv(e,e=>{if(!bv(e))throw By.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+Fy<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n})}function bv(e){return void 0!==e&&2===e.registrationStatus}async function wv(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await dv(e);t&&await t}(n);return(await yv(n,t)).token}function xv(e){return By.create("missing-app-config-values",{valueName:e})}const kv="installations",Ev=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw xv("App Configuration");if(!e.name)throw xv("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw xv(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:ze(t,"heartbeat"),_delete:()=>Promise.resolve()}},_v=e=>{const t=ze(e.getProvider("app").getImmediate(),kv).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await dv(t);return r?r.catch(console.error):yv(t).catch(console.error),n.fid}(t),getToken:e=>wv(t,e)}};Ve(new P(kv,Ev,"PUBLIC")),Ve(new P("installations-internal",_v,"PRIVATE")),Ke(Ly,My),Ke(Ly,My,"esm2017");const Nv="analytics",Sv="https://www.googletagmanager.com/gtag/js",Iv=new q("@firebase/analytics"),Tv=new E("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Cv(e){if(!e.startsWith(Sv)){const t=Tv.create("invalid-gtag-resource",{gtagURL:e});return Iv.warn(t.message),""}return e}function Av(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function jv(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:Cv}),r=document.createElement("script"),i=`${Sv}?l=${e}&id=${t}`;r.src=n?null===n||void 0===n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function Dv(e,t,n,r){return async function(i){try{for(var s=arguments.length,a=new Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=arguments[o];if("event"===i){const[r,i]=a;await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await Av(n);for(const n of e){const e=r.find(e=>e.measurementId===n),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(s){Iv.error(s)}}(e,t,n,r,i)}else if("config"===i){const[i,s]=a;await async function(e,t,n,r,i,s){const a=r[i];try{if(a)await t[a];else{const e=(await Av(n)).find(e=>e.measurementId===i);e&&await t[e.appId]}}catch(o){Iv.error(o)}e("config",i,s)}(e,t,n,r,i,s)}else if("consent"===i){const[t]=a;e("consent","update",t)}else if("get"===i){const[t,n,r]=a;e("get",t,n,r)}else if("set"===i){const[t]=a;e("set",t)}else e(i,...a)}catch(l){Iv.error(l)}}}const Rv=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Pv(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function Ov(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rv,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw Tv.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Tv.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new Mv;return setTimeout(async()=>{o.abort()},void 0!==n?n:6e4),Lv({appId:r,apiKey:i,measurementId:s},a,o,t)}async function Lv(e,t,n){let{throttleEndTimeMillis:r,backoffCount:i}=t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Rv;var a;const{appId:o,measurementId:l}=e;try{await function(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(s),r(Tv.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(n,r)}catch(c){if(l)return Iv.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===c||void 0===c?void 0:c.message}]`),{appId:o,measurementId:l};throw c}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:Pv(r)},s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),a=await fetch(s,i);if(200!==a.status&&304!==a.status){let e="";try{const n=await a.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(o){}throw Tv.create("config-fetch-failed",{httpStatus:a.status,responseMessage:e})}return a.json()}(e);return s.deleteThrottleMetadata(o),t}catch(c){const t=c;if(!function(e){if(!(e instanceof k)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t)){if(s.deleteThrottleMetadata(o),l)return Iv.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===t||void 0===t?void 0:t.message}]`),{appId:o,measurementId:l};throw c}const r=503===Number(null===(a=null===t||void 0===t?void 0:t.customData)||void 0===a?void 0:a.httpStatus)?D(i,s.intervalMillis,30):D(i,s.intervalMillis),u={throttleEndTimeMillis:Date.now()+r,backoffCount:i+1};return s.setThrottleMetadata(o,u),Iv.debug(`Calling attemptFetch again in ${r} millis`),Lv(e,u,n,s)}}class Mv{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let Fv,Uv;function Vv(e){Uv=e}function zv(e){Fv=e}async function Bv(e,t,n,r,i,s,a){var o;const l=Ov(e);l.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&Iv.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(e=>Iv.error(e)),t.push(l);const c=async function(){if(!w())return Iv.warn(Tv.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await x()}catch(e){return Iv.warn(Tv.create("indexeddb-unavailable",{errorInfo:null===e||void 0===e?void 0:e.toString()}).message),!1}return!0}().then(e=>e?r.getId():void 0),[u,h]=await Promise.all([l,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(Sv)&&n.src.includes(e))return n;return null})(s)||jv(s,u.measurementId),Uv&&(i("consent","default",Uv),Vv(void 0)),i("js",new Date);const d=null!==(o=null===a||void 0===a?void 0:a.config)&&void 0!==o?o:{};return d.origin="firebase",d.update=!0,null!=h&&(d.firebase_id=h),i("config",u.measurementId,d),Fv&&(i("set",Fv),zv(void 0)),u.measurementId}class $v{constructor(e){this.app=e}_delete(){return delete qv[this.app.options.appId],Promise.resolve()}}let qv={},Hv=[];const Wv={};let Kv,Gv,Qv="dataLayer",Yv="gtag",Xv=!1;function Jv(){const e=[];if(b()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>`(${t+1}) ${e}`).join(" "),n=Tv.create("invalid-analytics-context",{errorInfo:t});Iv.warn(n.message)}}function Zv(e,t,n){Jv();const r=e.options.appId;if(!r)throw Tv.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Tv.create("no-api-key");Iv.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=qv[r])throw Tv.create("already-exists",{id:r});if(!Xv){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Qv);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(s=window[i]),window[i]=Dv(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}(qv,Hv,Wv,Qv,Yv);Gv=e,Kv=t,Xv=!0}qv[r]=Bv(e,Hv,Wv,t,Kv,Qv,n);return new $v(e)}function eb(e,t,n,r){e=R(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(Gv,qv[e.app.options.appId],t,n,r).catch(e=>Iv.error(e))}const tb="@firebase/analytics",nb="0.10.0";Ve(new P(Nv,(e,t)=>{let{options:n}=t;return Zv(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)},"PUBLIC")),Ve(new P("analytics-internal",function(e){try{const t=e.getProvider(Nv).getImmediate();return{logEvent:(e,n,r)=>eb(t,e,n,r)}}catch(t){throw Tv.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),Ke(tb,nb),Ke(tb,nb,"esm2017");const rb=He({apiKey:"AIzaSyCxN1kahYiW5Pg5xCrRxWAFKRgKaKNBt3Y",authDomain:"kalakriti-84f9d.firebaseapp.com",projectId:"kalakriti-84f9d",storageBucket:"kalakriti-84f9d.firebasestorage.app",messagingSenderId:"900894287700",appId:"1:900894287700:web:8841d04374050e47cc8ac1",measurementId:"G-EKXX8GW29X"}),ib=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();const t=ze(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=ze(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(N(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;ut(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:ri,persistence:[gr,Zn,tr]}),r=m("authTokenSyncURL");if(r){const e=(i=r,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>oi)return;const r=null===t||void 0===t?void 0:t.token;li!==r&&(li=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){R(e).beforeAuthStateChanged(t,n)}(n,e,()=>e(n.currentUser)),function(e,t,n,r){R(e).onIdTokenChanged(t,n,r)}(n,t=>e(t))}var i;const s=d("auth");return s&&vn(n,`http://${s}`),n}(rb),sb=function(e,t){const n="string"==typeof e?e:t||"(default)",r=ze("object"==typeof e?e:We(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=f("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Am(e,Dm))._getSettings(),a=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==a&&Fl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Dl.MOCK_USER;else{t=y(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new ql($l.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Dl(s)}e._authCredentials=new Gl(new Wl(t,n))}}(r,...e)}return r}(rb);(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We(),t=arguments.length>1?arguments[1]:void 0;e=R(e);const n=ze(e,vy).getImmediate({identifier:t}),r=f("storage");r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:y(i,e.app.options.projectId))}(e,t,n,r)}(n,...r)})(rb),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();e=R(e);const t=ze(e,Nv);t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=ze(e,Nv);if(n.isInitialized()){const e=n.getImmediate();if(N(t,n.getOptions()))return e;throw Tv.create("already-initialized")}const r=n.initialize({options:t})}(e)}(rb);var ab=n(579);const ob=(0,r.createContext)();function lb(){return(0,r.useContext)(ob)}function cb(e){let{children:t}=e;const[n,i]=(0,r.useState)(null),[s,a]=(0,r.useState)(!0);async function o(e){try{const t=await function(e){e=Am(e,Rm);const t=Am(e.firestore,Vm);return km(zm(t),e._key).then(n=>Wg(t,e,n))}(Mm(sb,"users",e));return t.exists()?{id:e,...t.data()}:null}catch(t){return console.error("Error fetching user data:",t),null}}(0,r.useEffect)(()=>{const e=function(e,t,n,r){return R(e).onAuthStateChanged(t,n,r)}(ib,async e=>{if(e){const t=await o(e.uid);i(t)}else i(null);a(!1)});return e},[]);const l={currentUser:n,signup:async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Visual Arts";try{console.log("AuthContext: Starting signup process..."),console.log("AuthContext: Email:",e),console.log("AuthContext: Name:",n),console.log("AuthContext: Category:",i);const s=await async function(e,t,n){var r;const i=gn(e),s={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let a;if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await fn(i,s,"signUpPassword");a=Fn(i,e)}else a=Fn(i,s).catch(async e=>{if("auth/missing-recaptcha-token"===e.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const e=await fn(i,s,"signUpPassword");return Fn(i,e)}return Promise.reject(e)});const o=await a.catch(e=>Promise.reject(e)),l=await Un._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(l.user),l}(ib,e,t),a=s.user;console.log("AuthContext: User created successfully:",a.uid),await Qn(a,{displayName:n,photoURL:r}),console.log("AuthContext: Profile updated successfully");const o={name:n,email:e,photo:r||null,primaryCategory:i,talents:[],joinDate:(new Date).toISOString(),isOnline:!0};return console.log("AuthContext: Creating user document in Firestore..."),console.log("AuthContext: User data:",o),await function(e,t,n){e=Am(e,Rm);const r=Am(e.firestore,Vm),i=Rg(e.converter,t,n);return Hg(r,[eg(Zm(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Oh.none())])}(Mm(sb,"users",a.uid),o),console.log("AuthContext: User document created successfully"),a}catch(s){throw console.error("AuthContext: Signup error:",s),console.error("AuthContext: Error code:",s.code),console.error("AuthContext: Error message:",s.message),s}},login:async function(e,t){try{const n=await function(e,t,n){return Wn(R(e),jn.credential(t,n))}(ib,e,t);return n.user}catch(n){throw n}},logout:async function(){try{await function(e){return R(e).signOut()}(ib)}catch(e){throw e}},getUserData:o,refreshUserData:async()=>{if(ib.currentUser){const e=await o(ib.currentUser.uid);i(e)}}};return(0,ab.jsx)(ob.Provider,{value:l,children:!s&&t})}var ub={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};var hb=(e,t)=>{const n=(0,r.forwardRef)((n,i)=>{let{color:s="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:l,children:c,...u}=n;return(0,r.createElement)("svg",{ref:i,...ub,width:a,height:a,stroke:s,strokeWidth:l?24*Number(o)/Number(a):o,className:`lucide lucide-${h=e,h.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,...u},[...t.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...(Array.isArray(c)?c:[c])||[]]);var h});return n.displayName=`${e}`,n};const db=hb("Compass",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76",key:"m9r19z"}]]),fb=hb("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),pb=hb("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),mb=hb("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),gb=hb("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),yb=hb("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),vb=e=>{let{onNavigate:t,onToggleTheme:n,isDarkMode:i}=e;const{currentUser:s,logout:a}=lb(),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(0);(0,r.useEffect)(()=>{if(!s)return;const e=qg(kg(Lm(sb,"messages"),_g("participants","array-contains",s.id)),e=>{const t=e.docs.map(e=>({id:e.id,...e.data()})).filter(e=>{var t;return e.senderId!==s.id&&!(null!==(t=e.readBy)&&void 0!==t&&t.includes(s.id))}).length;u(t)},e=>{console.error("Error listening to messages for notification count:",e)});return()=>e()},[s]);return(0,ab.jsx)("nav",{className:"gradient-bg shadow-xl",children:(0,ab.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,ab.jsxs)("div",{className:"flex justify-between h-16",children:[(0,ab.jsx)("div",{className:"flex items-center",children:(0,ab.jsxs)("h1",{className:"text-2xl font-bold text-white cursor-pointer hover-scale",onClick:()=>t("home"),children:["\ud83c\udfa8 KalaKriti ",(0,ab.jsx)("span",{className:"text-sm font-normal opacity-75",children:"v5.0"})]})}),s&&(0,ab.jsxs)("div",{className:"hidden md:flex items-center space-x-6",children:[(0,ab.jsxs)("button",{onClick:()=>t("explore"),className:"text-white hover:text-gray-200 px-3 py-2 rounded-md transition-colors flex items-center",children:[(0,ab.jsx)(db,{className:"w-4 h-4 mr-2"}),"Explore"]}),(0,ab.jsxs)("button",{onClick:()=>t("messages"),className:"text-white hover:text-gray-200 px-3 py-2 rounded-md relative transition-colors flex items-center",children:[(0,ab.jsx)(fb,{className:"w-4 h-4 mr-2"}),"Messages",c>0&&(0,ab.jsx)("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:c>99?"99+":c})]}),(0,ab.jsxs)("button",{onClick:()=>t("profile"),className:"text-white hover:text-gray-200 px-3 py-2 rounded-md transition-colors flex items-center",children:[(0,ab.jsx)(pb,{className:"w-4 h-4 mr-2"}),"Profile"]})]}),(0,ab.jsxs)("div",{className:"flex items-center space-x-4",children:[s?(0,ab.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ab.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ab.jsxs)("div",{className:"relative",children:[s.photo?(0,ab.jsx)("img",{src:s.photo,alt:s.name,className:"profile-photo",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):(0,ab.jsx)("div",{className:"profile-photo bg-purple-100 flex items-center justify-center",children:(0,ab.jsx)(pb,{className:"text-purple-600"})}),(0,ab.jsx)("div",{className:"profile-photo bg-purple-100 flex items-center justify-center",style:{display:"none"},children:(0,ab.jsx)(pb,{className:"text-purple-600"})})]}),(0,ab.jsxs)("span",{className:"text-white font-medium",children:["Welcome, ",s.name,"!"]})]}),(0,ab.jsxs)("button",{onClick:async()=>{try{await a(),t("home")}catch(e){console.error("Failed to log out:",e)}},className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors flex items-center",children:[(0,ab.jsx)(mb,{className:"w-4 h-4 mr-2"}),"Logout"]})]}):(0,ab.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ab.jsx)("button",{onClick:()=>t("login"),className:"text-white hover:text-gray-200 px-3 py-2 rounded-md transition-colors",children:"Login"}),(0,ab.jsx)("button",{onClick:()=>t("register"),className:"bg-white text-purple-600 hover:bg-gray-100 px-4 py-2 rounded-lg transition-colors",children:"Sign Up"})]}),(0,ab.jsx)("button",{onClick:n,className:"text-white hover:text-gray-200 px-3 py-2 rounded-md transition-colors",children:i?(0,ab.jsx)(gb,{className:"w-4 h-4"}):(0,ab.jsx)(yb,{className:"w-4 h-4"})})]})]})})})},bb=hb("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),wb=hb("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),xb=hb("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]),kb=e=>{let{onNavigate:t}=e;const{currentUser:n}=lb(),[i,s]=(0,r.useState)({totalArtists:0,totalWorks:0,totalCollaborations:0,totalMessages:0}),[a,o]=(0,r.useState)([]),[l,c]=(0,r.useState)([]),[u,h]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{h(!0);try{const[e,t,r]=await Promise.all([Vg(Lm(sb,"users")),Vg(Lm(sb,"works")),Vg(Lm(sb,"messages"))]),i=e.docs.map(e=>({id:e.id,...e.data()})),a=t.docs.map(e=>({id:e.id,...e.data()})),l=r.docs.map(e=>({id:e.id,...e.data()}));s({totalArtists:i.length,totalWorks:a.length,totalCollaborations:a.filter(e=>"Yes"===e.collaboration).length,totalMessages:l.length});const u=i.filter(e=>e.id!==(null===n||void 0===n?void 0:n.id)).sort((e,t)=>{var n,r;return((null===(n=t.talents)||void 0===n?void 0:n.length)||0)-((null===(r=e.talents)||void 0===r?void 0:r.length)||0)}).slice(0,6);o(u);const h=a.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)).slice(0,3),d=i.sort((e,t)=>new Date(t.joinDate)-new Date(e.joinDate)).slice(0,2),f=[...h.map(e=>({type:"work_uploaded",message:`${e.userName} uploaded "${e.title}"`,timestamp:e.createdAt})),...d.map(e=>({type:"user_joined",message:`${e.name} joined the community`,timestamp:e.joinDate}))].sort((e,t)=>new Date(t.timestamp)-new Date(e.timestamp)).slice(0,5);c(f)}catch(e){console.error("Error fetching data:",e),s({totalArtists:0,totalWorks:0,totalCollaborations:0,totalMessages:0}),o([]),c([])}finally{h(!1)}})()},[n]);const d=[{icon:(0,ab.jsx)(bb,{className:"text-2xl text-purple-600"}),title:"Smart Matching",description:"AI-powered algorithm finds perfect collaborators based on your skills and interests",bgColor:"bg-purple-100"},{icon:(0,ab.jsx)(wb,{className:"text-2xl text-green-600"}),title:"Portfolio Showcase",description:"Beautiful galleries to display your work with advanced filtering and categorization",bgColor:"bg-green-100"},{icon:(0,ab.jsx)(fb,{className:"text-2xl text-blue-600"}),title:"Real-time Chat",description:"Instant messaging with file sharing, voice notes, and project collaboration tools",bgColor:"bg-blue-100"},{icon:(0,ab.jsx)(xb,{className:"text-2xl text-orange-600"}),title:"Project Management",description:"Built-in tools to manage collaborative projects from concept to completion",bgColor:"bg-orange-100"}];return u?(0,ab.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,ab.jsx)("div",{className:"spinner"}),(0,ab.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading amazing content..."})]}):(0,ab.jsxs)("div",{className:"fade-in",children:[(0,ab.jsxs)("div",{className:"hero-bg rounded-2xl text-white p-12 mb-12 text-center fade-in",children:[(0,ab.jsx)("h1",{className:"text-6xl font-bold mb-6 bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-200",children:"Connect. Create. Collaborate."}),(0,ab.jsx)("p",{className:"text-xl mb-8 opacity-90 max-w-2xl mx-auto",children:"Join KalaKriti v5.0 - The most advanced platform for creative collaboration with enhanced features and seamless user experience"}),n?(0,ab.jsxs)("div",{children:[(0,ab.jsx)("p",{className:"text-xl mb-6",children:"Welcome back to your enhanced creative community!"}),(0,ab.jsx)("button",{onClick:()=>t("explore"),className:"bg-white text-purple-600 hover:bg-gray-100 px-8 py-4 rounded-xl font-semibold mr-4 hover-scale transition-all",children:"\ud83c\udf0d Explore Artists"}),(0,ab.jsx)("button",{onClick:()=>t("messages"),className:"border-2 border-white text-white hover:bg-white hover:text-purple-600 px-8 py-4 rounded-xl font-semibold hover-scale transition-all",children:"\ud83d\udcac Check Messages"})]}):(0,ab.jsxs)("div",{children:[(0,ab.jsx)("button",{onClick:()=>t("register"),className:"bg-white text-purple-600 hover:bg-gray-100 px-8 py-4 rounded-xl font-semibold mr-4 hover-scale transition-all",children:"\ud83d\ude80 Get Started Free"}),(0,ab.jsx)("button",{onClick:()=>t("login"),className:"border-2 border-white text-white hover:bg-white hover:text-purple-600 px-8 py-4 rounded-xl font-semibold hover-scale transition-all",children:"\ud83d\udd11 Sign In"})]})]}),(0,ab.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12",children:d.map((e,t)=>(0,ab.jsxs)("div",{className:"bg-white p-8 rounded-xl shadow-lg card-hover text-center fade-in",children:[(0,ab.jsx)("div",{className:`${e.bgColor} w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4`,children:e.icon}),(0,ab.jsx)("h3",{className:"text-xl font-semibold mb-4",children:e.title}),(0,ab.jsx)("p",{className:"text-gray-600",children:e.description})]},t))}),(0,ab.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-12 fade-in",children:[(0,ab.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ab.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"\ud83d\udd25 Live Activity"}),(0,ab.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ab.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full pulse-animation"}),(0,ab.jsx)("span",{className:"text-sm text-gray-600",children:"Live Updates"})]})]}),(0,ab.jsx)("div",{className:"space-y-4",children:l.length>0?l.map((e,t)=>(0,ab.jsxs)("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,ab.jsx)("div",{className:`bg-${"user_joined"===e.type?"green":"blue"}-100 w-10 h-10 rounded-full flex items-center justify-center`,children:"user_joined"===e.type?(0,ab.jsx)(bb,{className:"text-green-600"}):(0,ab.jsx)(wb,{className:"text-blue-600"})}),(0,ab.jsxs)("div",{className:"flex-1",children:[(0,ab.jsx)("p",{className:"text-gray-800",children:e.message}),(0,ab.jsx)("p",{className:"text-sm text-gray-500",children:new Date(e.timestamp).toLocaleString()})]})]},t)):(0,ab.jsxs)("div",{className:"text-center py-8",children:[(0,ab.jsx)("div",{className:"text-4xl mb-3",children:"\ud83d\ude80"}),(0,ab.jsx)("p",{className:"text-gray-500 mb-2",children:"No recent activity yet!"}),(0,ab.jsx)("p",{className:"text-gray-400 text-sm",children:"Join our community and be the first to create something amazing."})]})})]}),(0,ab.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-12 fade-in",children:[(0,ab.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"\u2b50 Featured Artists"}),(0,ab.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.length>0?a.map(e=>(0,ab.jsxs)("div",{className:"bg-gray-50 p-6 rounded-xl card-hover",children:[(0,ab.jsxs)("div",{className:"flex items-center mb-4",children:[e.photo?(0,ab.jsx)("img",{src:e.photo,alt:e.name,className:"profile-photo-large mr-4",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):(0,ab.jsx)("div",{className:"profile-photo-large bg-purple-100 flex items-center justify-center mr-4",children:(0,ab.jsx)(bb,{className:"text-purple-600 text-2xl"})}),(0,ab.jsx)("div",{className:"profile-photo-large bg-purple-100 flex items-center justify-center mr-4",style:{display:"none"},children:(0,ab.jsx)(bb,{className:"text-purple-600 text-2xl"})}),(0,ab.jsxs)("div",{className:"flex-1",children:[(0,ab.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ab.jsx)("h3",{className:"font-semibold text-gray-800",children:e.name}),e.isOnline&&(0,ab.jsx)("div",{className:"status-online"})]}),(0,ab.jsxs)("p",{className:"text-sm text-gray-600",children:[e.primaryCategory," Artist"]}),(0,ab.jsxs)("p",{className:"text-xs text-gray-500",children:["Joined ",new Date(e.joinDate).toLocaleDateString()]})]})]}),(0,ab.jsxs)("div",{className:"mb-4",children:[(0,ab.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"\ud83c\udfaf Specializes in:"}),(0,ab.jsx)("div",{className:"flex flex-wrap gap-1",children:e.talents&&e.talents.length>0?e.talents.slice(0,3).map((e,t)=>(0,ab.jsx)("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs",children:e.skill},t)):(0,ab.jsx)("span",{className:"text-gray-500 text-xs",children:"No talents listed yet"})})]}),n&&(0,ab.jsxs)("div",{className:"flex space-x-2",children:[(0,ab.jsx)("button",{onClick:()=>t("artist-profile",e.id),className:"flex-1 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-sm transition-colors",children:"\ud83d\udc64 View Profile"}),(0,ab.jsx)("button",{onClick:()=>t("messages",e.id),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm transition-colors",children:"\ud83d\udcac"})]})]},e.id)):(0,ab.jsxs)("div",{className:"col-span-full text-center py-12",children:[(0,ab.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udfa8"}),(0,ab.jsx)("p",{className:"text-gray-500 mb-4",children:"No artists to showcase yet!"}),(0,ab.jsx)("p",{className:"text-gray-400 text-sm",children:"Be the first to join our creative community and start collaborating."})]})})]}),(0,ab.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 via-blue-600 to-teal-600 rounded-xl text-white p-8 text-center fade-in",children:[(0,ab.jsx)("h2",{className:"text-3xl font-bold mb-8",children:"\ud83c\udf1f Join Our Thriving Community"}),(0,ab.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[(0,ab.jsxs)("div",{className:"hover-scale",children:[(0,ab.jsx)("div",{className:"text-4xl font-bold mb-2",children:i.totalArtists.toLocaleString()}),(0,ab.jsx)("div",{className:"text-purple-200",children:"\ud83d\udc65 Active Artists"})]}),(0,ab.jsxs)("div",{className:"hover-scale",children:[(0,ab.jsx)("div",{className:"text-4xl font-bold mb-2",children:i.totalWorks.toLocaleString()}),(0,ab.jsx)("div",{className:"text-purple-200",children:"\ud83c\udfa8 Creative Works"})]}),(0,ab.jsxs)("div",{className:"hover-scale",children:[(0,ab.jsx)("div",{className:"text-4xl font-bold mb-2",children:i.totalCollaborations.toLocaleString()}),(0,ab.jsx)("div",{className:"text-purple-200",children:"\ud83e\udd1d Collaborations"})]}),(0,ab.jsxs)("div",{className:"hover-scale",children:[(0,ab.jsx)("div",{className:"text-4xl font-bold mb-2",children:i.totalMessages.toLocaleString()}),(0,ab.jsx)("div",{className:"text-purple-200",children:"\ud83d\udcac Messages Sent"})]})]})]})]})},Eb=hb("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),_b=hb("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Nb=hb("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Sb=e=>{let{onClose:t,onNavigate:n}=e;const{login:i}=lb(),[s,a]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(!1),[h,d]=(0,r.useState)("");return(0,ab.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ab.jsxs)("div",{className:"bg-white rounded-xl p-8 max-w-md w-full mx-4 fade-in",children:[(0,ab.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ab.jsx)("h2",{className:"text-2xl font-bold text-center",children:"\ud83d\udd11 Login to KalaKriti"}),(0,ab.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:(0,ab.jsx)(Eb,{className:"w-5 h-5"})})]}),(0,ab.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),u(!0),d("");try{await i(s,o),t()}catch(h){d("Invalid email or password. Please try again.")}finally{u(!1)}},children:[(0,ab.jsxs)("div",{className:"mb-4",children:[(0,ab.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2 flex items-center",children:[(0,ab.jsx)(_b,{className:"w-4 h-4 mr-2"}),"\ud83d\udce7 Email"]}),(0,ab.jsx)("input",{type:"email",value:s,onChange:e=>a(e.target.value),className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:border-purple-500 form-input",required:!0})]}),(0,ab.jsxs)("div",{className:"mb-6",children:[(0,ab.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2 flex items-center",children:[(0,ab.jsx)(Nb,{className:"w-4 h-4 mr-2"}),"\ud83d\udd12 Password"]}),(0,ab.jsx)("input",{type:"password",value:o,onChange:e=>l(e.target.value),className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:border-purple-500 form-input",required:!0})]}),h&&(0,ab.jsx)("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg text-sm",children:h}),(0,ab.jsx)("button",{type:"submit",disabled:c,className:"w-full bg-purple-600 hover:bg-purple-700 disabled:bg-purple-400 text-white font-bold py-3 px-4 rounded-lg transition-colors",children:c?"Logging in...":"Login"})]}),(0,ab.jsxs)("div",{className:"mt-4 text-center",children:[(0,ab.jsx)("p",{className:"text-gray-600",children:"Don't have an account?"}),(0,ab.jsx)("button",{onClick:()=>n("register"),className:"text-purple-600 hover:text-purple-700 font-medium",children:"Sign up here"})]})]})})},Ib=hb("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Tb=hb("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Cb=e=>{let{onClose:t,onNavigate:n}=e;const{signup:i}=lb(),[s,a]=(0,r.useState)({name:"",email:"",password:"",confirmPassword:"",primaryCategory:"Visual Arts"}),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),[h,d]=(0,r.useState)(!1),[f,p]=(0,r.useState)(""),m=e=>{a({...s,[e.target.name]:e.target.value})};return(0,ab.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ab.jsxs)("div",{className:"bg-white rounded-xl p-8 max-w-md w-full mx-4 fade-in",children:[(0,ab.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ab.jsx)("h2",{className:"text-2xl font-bold text-center",children:"\ud83d\ude80 Join KalaKriti v5.0"}),(0,ab.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:(0,ab.jsx)(Eb,{className:"w-5 h-5"})})]}),(0,ab.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),console.log("Starting registration process..."),s.password===s.confirmPassword)if(s.password.length<6)p("Password must be at least 6 characters long");else{d(!0),p("");try{console.log("Form data:",s),await i(s.email,s.password,s.name,s.primaryCategory),console.log("Registration successful!"),ib.currentUser&&(await Gn(ib.currentUser),console.log("Email verification sent!")),alert(`\ud83c\udf89 Welcome to KalaKriti v5.0, ${s.name}!\n\nThank you for joining our creative community! We've sent a verification email to ${s.email}.\n\nPlease check your email and verify your account to get started with collaborating with amazing artists!`),t()}catch(f){console.error("Registration error:",f),console.error("Error code:",f.code),console.error("Error message:",f.message);let t="Failed to create account. Please try again.";switch(f.code){case"auth/email-already-in-use":t="An account with this email already exists. Please try logging in instead.";break;case"auth/weak-password":t="Password is too weak. Please choose a stronger password (at least 6 characters).";break;case"auth/invalid-email":t="Please enter a valid email address.";break;case"auth/network-request-failed":t="Network error. Please check your internet connection and try again.";break;default:t=f.message||"Registration failed. Please try again."}p(t)}finally{d(!1)}}else p("Passwords do not match")},children:[(0,ab.jsxs)("div",{className:"mb-4",children:[(0,ab.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2 flex items-center",children:[(0,ab.jsx)(pb,{className:"w-4 h-4 mr-2"}),"\ud83d\udc64 Full Name"]}),(0,ab.jsx)("input",{type:"text",name:"name",value:s.name,onChange:m,className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:border-purple-500 form-input",required:!0})]}),(0,ab.jsxs)("div",{className:"mb-4",children:[(0,ab.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2 flex items-center",children:[(0,ab.jsx)(_b,{className:"w-4 h-4 mr-2"}),"\ud83d\udce7 Email"]}),(0,ab.jsx)("input",{type:"email",name:"email",value:s.email,onChange:m,className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:border-purple-500 form-input",required:!0})]}),(0,ab.jsxs)("div",{className:"mb-4",children:[(0,ab.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2 flex items-center",children:[(0,ab.jsx)(wb,{className:"w-4 h-4 mr-2"}),"\ud83c\udfa8 Primary Art Category"]}),(0,ab.jsx)("select",{name:"primaryCategory",value:s.primaryCategory,onChange:m,className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:border-purple-500 form-input",required:!0,children:[{value:"Music",label:"\ud83c\udfb5 Music"},{value:"Visual Arts",label:"\ud83c\udfa8 Visual Arts"},{value:"Writing",label:"\u270d\ufe0f Writing"},{value:"Dance",label:"\ud83d\udc83 Dance"},{value:"Photography",label:"\ud83d\udcf8 Photography"},{value:"Video Production",label:"\ud83c\udfac Video Production"},{value:"Voice Acting",label:"\ud83c\udfa4 Voice Acting"},{value:"Graphic Design",label:"\ud83d\udd8c\ufe0f Graphic Design"},{value:"Digital Art",label:"\ud83d\udcbb Digital Art"},{value:"Animation",label:"\ud83c\udf9e\ufe0f Animation"}].map(e=>(0,ab.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,ab.jsxs)("div",{className:"mb-4",children:[(0,ab.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"\ud83d\udcf8 Profile Photo URL (Optional)"}),(0,ab.jsx)("input",{type:"url",name:"photo",value:s.photo,onChange:m,placeholder:"https://example.com/your-photo.jpg",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:border-purple-500 form-input"})]}),(0,ab.jsxs)("div",{className:"mb-4",children:[(0,ab.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2 flex items-center",children:[(0,ab.jsx)(Nb,{className:"w-4 h-4 mr-2"}),"\ud83d\udd12 Password"]}),(0,ab.jsxs)("div",{className:"relative",children:[(0,ab.jsx)("input",{type:o?"text":"password",name:"password",value:s.password,onChange:m,className:"w-full px-4 py-3 pr-10 border rounded-lg focus:outline-none focus:border-purple-500 form-input",required:!0}),(0,ab.jsx)("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:o?(0,ab.jsx)(Ib,{className:"w-4 h-4"}):(0,ab.jsx)(Tb,{className:"w-4 h-4"})})]})]}),(0,ab.jsxs)("div",{className:"mb-6",children:[(0,ab.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2 flex items-center",children:[(0,ab.jsx)(Nb,{className:"w-4 h-4 mr-2"}),"\ud83d\udd12 Confirm Password"]}),(0,ab.jsxs)("div",{className:"relative",children:[(0,ab.jsx)("input",{type:c?"text":"password",name:"confirmPassword",value:s.confirmPassword,onChange:m,className:"w-full px-4 py-3 pr-10 border rounded-lg focus:outline-none focus:border-purple-500 form-input",required:!0}),(0,ab.jsx)("button",{type:"button",onClick:()=>u(!c),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:c?(0,ab.jsx)(Ib,{className:"w-4 h-4"}):(0,ab.jsx)(Tb,{className:"w-4 h-4"})})]})]}),f&&(0,ab.jsx)("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg text-sm",children:f}),(0,ab.jsx)("button",{type:"submit",disabled:h,className:"w-full bg-purple-600 hover:bg-purple-700 disabled:bg-purple-400 text-white font-bold py-3 px-4 rounded-lg transition-colors",children:h?"Creating Account...":"Create Account"})]}),(0,ab.jsxs)("div",{className:"mt-4 text-center",children:[(0,ab.jsx)("p",{className:"text-gray-600",children:"Already have an account?"}),(0,ab.jsx)("button",{onClick:()=>n("login"),className:"text-purple-600 hover:text-purple-700 font-medium",children:"Sign in here"})]})]})})},Ab=hb("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),jb=e=>{let{onNavigate:t}=e;const{currentUser:n}=lb(),[i,s]=(0,r.useState)([]),[a,o]=(0,r.useState)("all"),[l,c]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{c(!0);try{const[e,t]=await Promise.all([Vg(Lm(sb,"users")),Vg(Lm(sb,"works"))]),r=e.docs.map(e=>({id:e.id,...e.data()})),i=t.docs.map(e=>({id:e.id,...e.data()})),a=r.filter(e=>e.id!==(null===n||void 0===n?void 0:n.id)).map(e=>{const t=i.filter(t=>t.userId===e.id),n=t.filter(e=>"Yes"===e.collaboration).length;return{...e,works:t.length,collaborations:n}});s(a)}catch(e){console.error("Error fetching artists:",e),s([])}finally{c(!1)}})()},[n]);const u=i.filter(e=>{var t;return"all"===a||(e.primaryCategory===a||(null===(t=e.talents)||void 0===t?void 0:t.some(e=>e.category===a)))});return l?(0,ab.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,ab.jsx)("div",{className:"spinner"}),(0,ab.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading artists..."})]}):(0,ab.jsx)("div",{className:"fade-in",children:(0,ab.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8",children:[(0,ab.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"\ud83c\udf0d Explore Artists & Projects"}),(0,ab.jsxs)("div",{className:"mb-8",children:[(0,ab.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[(0,ab.jsx)(Ab,{className:"w-5 h-5 mr-2"}),"Filter by Category"]}),(0,ab.jsx)("div",{className:"flex flex-wrap gap-3",children:[{value:"all",label:"All Categories"},{value:"Music",label:"\ud83c\udfb5 Music"},{value:"Visual Arts",label:"\ud83c\udfa8 Visual Arts"},{value:"Writing",label:"\u270d\ufe0f Writing"},{value:"Photography",label:"\ud83d\udcf8 Photography"},{value:"Dance",label:"\ud83d\udc83 Dance"}].map(e=>(0,ab.jsx)("button",{onClick:()=>o(e.value),className:"px-4 py-2 rounded-lg transition-colors "+(a===e.value?"bg-purple-600 text-white":"bg-gray-200 text-gray-700 hover:bg-purple-100"),children:e.label},e.value))})]}),(0,ab.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.length>0?u.map(e=>(0,ab.jsxs)("div",{className:"bg-white border rounded-xl p-6 card-hover",children:[(0,ab.jsxs)("div",{className:"flex items-center mb-4",children:[e.photo?(0,ab.jsx)("img",{src:e.photo,alt:e.name,className:"profile-photo mr-3",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):(0,ab.jsx)("div",{className:"profile-photo bg-purple-100 flex items-center justify-center mr-3",children:(0,ab.jsx)(pb,{className:"text-purple-600"})}),(0,ab.jsx)("div",{className:"profile-photo bg-purple-100 flex items-center justify-center mr-3",style:{display:"none"},children:(0,ab.jsx)(pb,{className:"text-purple-600"})}),(0,ab.jsxs)("div",{className:"flex-1",children:[(0,ab.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ab.jsx)("h3",{className:"font-semibold text-gray-800",children:e.name}),e.isOnline?(0,ab.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}):(0,ab.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full"})]}),(0,ab.jsx)("p",{className:"text-sm text-gray-600",children:e.primaryCategory})]})]}),(0,ab.jsxs)("div",{className:"mb-4",children:[(0,ab.jsx)("div",{className:"flex flex-wrap gap-1 mb-2",children:e.talents&&e.talents.length>0?e.talents.slice(0,3).map((e,t)=>(0,ab.jsx)("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded text-xs",children:e.skill},t)):(0,ab.jsx)("span",{className:"text-gray-500 text-xs",children:"No talents listed yet"})}),(0,ab.jsxs)("p",{className:"text-xs text-gray-500",children:[e.works," works \u2022 ",e.collaborations," seeking collaboration"]})]}),(0,ab.jsxs)("div",{className:"flex space-x-2",children:[(0,ab.jsx)("button",{onClick:()=>t("artist-profile",e.id),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-lg text-sm transition-colors",children:"\ud83d\udc64 Profile"}),(0,ab.jsx)("button",{onClick:()=>t("messages",e.id),className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded-lg text-sm transition-colors",children:"\ud83d\udcac Chat"})]})]},e.id)):(0,ab.jsxs)("div",{className:"col-span-full text-center py-8",children:[(0,ab.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udd0d"}),(0,ab.jsx)("p",{className:"text-gray-500 mb-2",children:"No artists found in this category"}),(0,ab.jsx)("p",{className:"text-gray-400 text-sm",children:"Try selecting a different category or check back later."})]})})]})})},Db=hb("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Rb=hb("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Pb=hb("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Ob=hb("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Lb=hb("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Mb=hb("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),Fb=hb("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Ub=e=>{let{onClose:t}=e;const{currentUser:n,logout:i}=lb(),[s,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)("");return n?(0,ab.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ab.jsxs)("div",{className:"bg-white rounded-xl p-8 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,ab.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ab.jsx)("h2",{className:"text-2xl font-bold text-red-600",children:"\u26a0\ufe0f Delete Account"}),(0,ab.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 transition-colors",children:(0,ab.jsx)(Eb,{className:"w-6 h-6"})})]}),(0,ab.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,ab.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,ab.jsx)(Fb,{className:"w-5 h-5 text-red-600 mt-0.5"}),(0,ab.jsxs)("div",{children:[(0,ab.jsx)("h3",{className:"font-semibold text-red-800 mb-2",children:"This action cannot be undone!"}),(0,ab.jsx)("p",{className:"text-sm text-red-700",children:"Deleting your account will permanently remove:"}),(0,ab.jsxs)("ul",{className:"text-sm text-red-700 mt-2 space-y-1",children:[(0,ab.jsx)("li",{children:"\u2022 Your profile and personal information"}),(0,ab.jsx)("li",{children:"\u2022 All your uploaded works"}),(0,ab.jsx)("li",{children:"\u2022 All your messages and conversations"}),(0,ab.jsx)("li",{children:"\u2022 Your talents and skills"}),(0,ab.jsx)("li",{children:"\u2022 All collaboration data"})]})]})]})}),(0,ab.jsxs)("div",{className:"mb-6",children:[(0,ab.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:'Type "DELETE" to confirm'}),(0,ab.jsx)("input",{type:"text",value:o,onChange:e=>l(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Type DELETE to confirm"})]}),(0,ab.jsxs)("div",{className:"flex space-x-3",children:[(0,ab.jsx)("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,ab.jsx)("button",{onClick:async()=>{if(n&&"DELETE"===o){a(!0);try{const e=kg(Lm(sb,"works"),_g("userId","==",n.id)),r=(await Vg(e)).docs.map(e=>Bg(e.ref));await Promise.all(r);const s=kg(Lm(sb,"messages"),_g("participants","array-contains",n.id)),a=(await Vg(s)).docs.map(e=>Bg(e.ref));await Promise.all(a);const o=Mm(sb,"users",n.id);await Bg(o),await i(),t(),alert("Account deleted successfully. You have been logged out.")}catch(e){console.error("Error deleting account:",e),alert("Error deleting account. Please try again.")}finally{a(!1)}}else alert('Please type "DELETE" to confirm account deletion.')},disabled:s||"DELETE"!==o,className:"flex-1 bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg transition-colors flex items-center justify-center",children:s?(0,ab.jsxs)(ab.Fragment,{children:[(0,ab.jsx)("div",{className:"spinner mr-2"}),"Deleting..."]}):(0,ab.jsxs)(ab.Fragment,{children:[(0,ab.jsx)(Pb,{className:"w-4 h-4 mr-2"}),"Delete Account"]})})]})]})}):(0,ab.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ab.jsx)("div",{className:"bg-white rounded-xl p-8 max-w-md w-full mx-4",children:(0,ab.jsxs)("div",{className:"text-center",children:[(0,ab.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udd12"}),(0,ab.jsx)("p",{className:"text-gray-500 mb-4",children:"Please log in to delete your account"}),(0,ab.jsx)("button",{onClick:t,className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg transition-colors",children:"Close"})]})})})},Vb=e=>{var t;let{onNavigate:n}=e;const{currentUser:i}=lb(),[s,a]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[c,u]=(0,r.useState)(!0),[h,d]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{(async()=>{if(i){u(!0);try{const[e,t]=await Promise.all([Vg(Lm(sb,"works")),Vg(Lm(sb,"users"))]),n=e.docs.map(e=>({id:e.id,...e.data()})),r=t.docs.map(e=>({id:e.id,...e.data()})),s=n.filter(e=>e.userId===i.id);a(s);const o=n.filter(e=>"Yes"===e.collaboration&&e.userId!==i.id).sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)).slice(0,5),c=o.map(e=>{const t=r.find(t=>t.id===e.userId);return{...e,userName:(null===t||void 0===t?void 0:t.name)||"Unknown Artist",userId:e.userId}});l(c)}catch(e){console.error("Error fetching user data:",e),a([]),l([])}finally{u(!1)}}else u(!1)})()},[i]),!i)return(0,ab.jsxs)("div",{className:"text-center py-12",children:[(0,ab.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udd12"}),(0,ab.jsx)("p",{className:"text-gray-500 mb-4",children:"Please log in to view your profile"}),(0,ab.jsx)("button",{onClick:()=>n("login"),className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg transition-colors",children:"Login"})]});if(c)return(0,ab.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,ab.jsx)("div",{className:"spinner"}),(0,ab.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading profile..."})]});const f={uploads:s.length,collaborations:s.filter(e=>"Yes"===e.collaboration).length,messages:0,daysActive:Math.floor((Date.now()-new Date(i.joinDate).getTime())/864e5)};return(0,ab.jsxs)("div",{className:"fade-in",children:[(0,ab.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8",children:[(0,ab.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ab.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"\ud83d\udc64 My Profile"}),(0,ab.jsxs)("div",{className:"flex space-x-3",children:[(0,ab.jsxs)("button",{onClick:()=>n("add-talent"),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center",children:[(0,ab.jsx)(Db,{className:"w-4 h-4 mr-2"}),"Add Talent"]}),(0,ab.jsxs)("button",{onClick:()=>n("edit-profile"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center",children:[(0,ab.jsx)(Rb,{className:"w-4 h-4 mr-2"}),"Edit Profile"]}),(0,ab.jsxs)("button",{onClick:()=>d(!0),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center",children:[(0,ab.jsx)(Pb,{className:"w-4 h-4 mr-2"}),"Delete Account"]})]})]}),(0,ab.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,ab.jsxs)("div",{children:[(0,ab.jsxs)("div",{className:"flex items-center mb-6",children:[i.photo?(0,ab.jsx)("img",{src:i.photo,alt:i.name,className:"profile-photo-large mr-4",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):(0,ab.jsx)("div",{className:"profile-photo-large bg-purple-100 flex items-center justify-center mr-4",children:(0,ab.jsx)(pb,{className:"text-2xl text-purple-600"})}),(0,ab.jsx)("div",{className:"profile-photo-large bg-purple-100 flex items-center justify-center mr-4",style:{display:"none"},children:(0,ab.jsx)(pb,{className:"text-2xl text-purple-600"})}),(0,ab.jsxs)("div",{children:[(0,ab.jsxs)("h3",{className:"text-2xl font-semibold text-gray-800 mb-2",children:["\ud83d\udc4b ",i.name]}),(0,ab.jsxs)("p",{className:"text-gray-600",children:["\ud83d\udce7 ",i.email]}),(0,ab.jsxs)("p",{className:"text-sm text-gray-500",children:["\ud83c\udfa8 ",i.primaryCategory," Artist"]}),(0,ab.jsxs)("p",{className:"text-sm text-gray-500",children:["\ud83d\udcc5 Joined ",new Date(i.joinDate).toLocaleDateString()]})]})]}),(0,ab.jsxs)("div",{className:"bg-gradient-to-r from-purple-500 to-blue-500 text-white rounded-xl p-4 mb-6 flex items-center justify-around shadow",children:[(0,ab.jsxs)("div",{className:"flex flex-col items-center",children:[(0,ab.jsx)("div",{className:"text-2xl font-bold",children:s.length}),(0,ab.jsx)("div",{className:"text-sm",children:"Works"})]}),(0,ab.jsx)("div",{className:"w-px h-8 bg-white opacity-30 mx-6"}),(0,ab.jsxs)("div",{className:"flex flex-col items-center",children:[(0,ab.jsx)("div",{className:"text-2xl font-bold",children:(null===(t=i.talents)||void 0===t?void 0:t.length)||0}),(0,ab.jsx)("div",{className:"text-sm",children:"Skills"})]})]})]}),(0,ab.jsxs)("div",{className:"space-y-6",children:[(0,ab.jsxs)("div",{className:"bg-purple-50 p-6 rounded-xl",children:[(0,ab.jsxs)("h4",{className:"font-semibold text-purple-800 mb-4 flex items-center",children:[(0,ab.jsx)(wb,{className:"w-5 h-5 mr-2"}),"\ud83c\udfaf Your Talents"]}),i.talents&&i.talents.length>0?(0,ab.jsx)("div",{className:"grid grid-cols-1 gap-3",children:i.talents.map((e,t)=>(0,ab.jsxs)("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg",children:[(0,ab.jsxs)("div",{children:[(0,ab.jsx)("span",{className:"font-medium text-gray-800",children:e.skill}),(0,ab.jsxs)("span",{className:"text-sm text-gray-600 ml-2",children:["(",e.category,")"]})]}),(0,ab.jsx)("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded text-sm",children:e.level})]},t))}):(0,ab.jsx)("p",{className:"text-gray-500",children:'No talents added yet. Click "Add Talent" to get started!'})]}),(0,ab.jsxs)("div",{className:"bg-blue-50 p-6 rounded-xl",children:[(0,ab.jsxs)("h4",{className:"font-semibold text-blue-800 mb-4 flex items-center",children:[(0,ab.jsx)(Ob,{className:"w-5 h-5 mr-2"}),"\ud83d\udcca Your Stats"]}),(0,ab.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ab.jsxs)("div",{className:"text-center",children:[(0,ab.jsx)("div",{className:"text-2xl font-bold text-blue-600 user-stats",id:"userWorksCount",children:f.uploads}),(0,ab.jsx)("div",{className:"text-sm text-blue-700",children:"\ud83c\udfa8 Works"})]}),(0,ab.jsxs)("div",{className:"text-center",children:[(0,ab.jsx)("div",{className:"text-2xl font-bold text-blue-600 user-stats",id:"userCollaborationsCount",children:f.collaborations}),(0,ab.jsx)("div",{className:"text-sm text-blue-700",children:"\ud83e\udd1d Collaborations"})]}),(0,ab.jsxs)("div",{className:"text-center",children:[(0,ab.jsx)("div",{className:"text-2xl font-bold text-blue-600 user-stats",id:"userMessagesCount",children:f.messages}),(0,ab.jsx)("div",{className:"text-sm text-blue-700",children:"\ud83d\udcac Messages"})]}),(0,ab.jsxs)("div",{className:"text-center",children:[(0,ab.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:f.daysActive}),(0,ab.jsx)("div",{className:"text-sm text-blue-700",children:"\ud83d\udcc5 Days Active"})]})]})]})]})]})]}),(0,ab.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8",children:[(0,ab.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ab.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"\ud83c\udfa8 My Creative Works"}),(0,ab.jsxs)("button",{onClick:()=>n("upload-work"),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center",children:[(0,ab.jsx)(Lb,{className:"w-4 h-4 mr-2"}),"Upload New Work"]})]}),(0,ab.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.length>0?s.map(e=>(0,ab.jsxs)("div",{className:"bg-gray-50 p-6 rounded-xl card-hover",children:[(0,ab.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,ab.jsx)("h4",{className:"font-semibold text-gray-800 text-lg cursor-pointer",children:e.title}),(0,ab.jsxs)("div",{className:"flex space-x-2",children:[e.url&&(0,ab.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700",children:(0,ab.jsx)(Mb,{className:"w-4 h-4"})}),(0,ab.jsx)("button",{onClick:()=>n("edit-work",e.id),className:"text-gray-600 hover:text-gray-700",children:(0,ab.jsx)(Rb,{className:"w-4 h-4"})})]})]}),(0,ab.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,ab.jsx)("span",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm",children:e.category}),"Yes"===e.collaboration?(0,ab.jsx)("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm",children:"\ud83e\udd1d Open for Collaboration"}):(0,ab.jsx)("span",{className:"bg-gray-200 text-gray-700 px-3 py-1 rounded-full text-sm",children:"\ud83d\udccb Showcase"})]}),(0,ab.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:e.description}),(0,ab.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-400",children:[(0,ab.jsxs)("span",{children:["\ud83d\udcc5 ",new Date(e.createdAt).toLocaleDateString()]}),(0,ab.jsxs)("span",{children:["\ud83d\udc41\ufe0f ",e.views||0," views"]})]})]},e.id)):(0,ab.jsxs)("div",{className:"col-span-full text-center py-12",children:[(0,ab.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udfa8"}),(0,ab.jsx)("p",{className:"text-gray-500 mb-4",children:"No works uploaded yet"}),(0,ab.jsx)("button",{onClick:()=>n("upload-work"),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg transition-colors",children:"Upload Your First Work"})]})})]}),(0,ab.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,ab.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"\ud83e\udd1d Collaboration Opportunities"}),(0,ab.jsx)("div",{className:"space-y-6",children:o.length>0?o.map(e=>(0,ab.jsxs)("div",{className:"border border-gray-200 rounded-xl p-6 card-hover bg-white",children:[(0,ab.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,ab.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ab.jsx)("div",{className:"profile-photo bg-purple-100 flex items-center justify-center",children:(0,ab.jsx)(pb,{className:"text-purple-600"})}),(0,ab.jsxs)("div",{children:[(0,ab.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:e.title}),(0,ab.jsxs)("p",{className:"text-sm text-gray-600",children:["by ",e.userName]})]})]}),(0,ab.jsx)("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm",children:"\ud83e\udd1d Seeking Collaboration"})]}),(0,ab.jsx)("div",{className:"mb-4",children:(0,ab.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,ab.jsx)("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded text-sm",children:e.category}),(0,ab.jsxs)("span",{className:"text-xs text-gray-400",children:["\ud83d\udcc5 ",new Date(e.createdAt).toLocaleDateString()]})]})}),(0,ab.jsx)("p",{className:"text-gray-700 mb-4",children:e.description}),(0,ab.jsxs)("div",{className:"flex space-x-3",children:[(0,ab.jsx)("button",{onClick:()=>n("artist-profile",e.userId),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm transition-colors",children:"\ud83d\udc64 View Profile"}),(0,ab.jsx)("button",{onClick:()=>n("messages",e.userId),className:"flex-1 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-sm transition-colors",children:"\ud83d\udcac Start Chat"}),e.url&&(0,ab.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg text-sm transition-colors",children:"\ud83d\udd17 View Work"})]})]},e.id)):(0,ab.jsxs)("div",{className:"text-center py-12",children:[(0,ab.jsx)("div",{className:"text-6xl mb-4",children:"\ud83e\udd1d"}),(0,ab.jsx)("p",{className:"text-gray-500 mb-4",children:"No collaboration opportunities available right now"}),(0,ab.jsx)("button",{onClick:()=>n("explore"),className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg transition-colors",children:"Explore Artists"})]})})]}),h&&(0,ab.jsx)(Ub,{onClose:()=>d(!1)})]})},zb=hb("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Bb=e=>{var t;let{artistId:n,onNavigate:i}=e;const{currentUser:s}=lb(),[a,o]=(0,r.useState)(null),[l,c]=(0,r.useState)([]),[u,h]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{(async()=>{if(n)try{const e=kg(Lm(sb,"users"),_g("__name__","==",n)),t=await Vg(e);if(!t.empty){const e={id:t.docs[0].id,...t.docs[0].data()};o(e);const r=kg(Lm(sb,"works"),_g("userId","==",n)),i=(await Vg(r)).docs.map(e=>({id:e.id,...e.data()}));c(i)}}catch(e){console.error("Error fetching artist data:",e)}finally{h(!1)}})()},[n]),u?(0,ab.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,ab.jsx)("div",{className:"spinner"}),(0,ab.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading artist profile..."})]}):a?(0,ab.jsxs)("div",{className:"fade-in",children:[(0,ab.jsx)("div",{className:"mb-6",children:(0,ab.jsxs)("button",{onClick:()=>i("explore"),className:"flex items-center text-gray-600 hover:text-gray-800 transition-colors",children:[(0,ab.jsx)(zb,{className:"w-4 h-4 mr-2"}),"Back to Explore"]})}),(0,ab.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8",children:[(0,ab.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ab.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"\ud83d\udc64 Artist Profile"}),s&&s.id!==a.id&&(0,ab.jsx)("div",{className:"flex space-x-3",children:(0,ab.jsxs)("button",{onClick:()=>i("messages",a.id),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center",children:[(0,ab.jsx)(fb,{className:"w-4 h-4 mr-2"}),"Send Message"]})})]}),(0,ab.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,ab.jsxs)("div",{children:[(0,ab.jsxs)("div",{className:"flex items-center mb-6",children:[a.photo?(0,ab.jsx)("img",{src:a.photo,alt:a.name,className:"profile-photo-large mr-4",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):(0,ab.jsx)("div",{className:"profile-photo-large bg-purple-100 flex items-center justify-center mr-4",children:(0,ab.jsx)(pb,{className:"text-2xl text-purple-600"})}),(0,ab.jsx)("div",{className:"profile-photo-large bg-purple-100 flex items-center justify-center mr-4",style:{display:"none"},children:(0,ab.jsx)(pb,{className:"text-2xl text-purple-600"})}),(0,ab.jsxs)("div",{children:[(0,ab.jsxs)("h3",{className:"text-2xl font-semibold text-gray-800 mb-2",children:["\ud83d\udc4b ",a.name]}),(0,ab.jsxs)("p",{className:"text-gray-600",children:["\ud83d\udce7 ",a.email]}),(0,ab.jsxs)("p",{className:"text-sm text-gray-500",children:["\ud83c\udfa8 ",a.primaryCategory," Artist"]}),(0,ab.jsxs)("p",{className:"text-sm text-gray-500",children:["\ud83d\udcc5 Joined ",new Date(a.joinDate).toLocaleDateString()]})]})]}),(0,ab.jsxs)("div",{className:"bg-gradient-to-r from-purple-500 to-blue-500 text-white rounded-xl p-4 mb-6 flex items-center justify-around shadow",children:[(0,ab.jsxs)("div",{className:"flex flex-col items-center",children:[(0,ab.jsx)("div",{className:"text-2xl font-bold",children:l.length}),(0,ab.jsx)("div",{className:"text-sm",children:"Works"})]}),(0,ab.jsx)("div",{className:"w-px h-8 bg-white opacity-30 mx-6"}),(0,ab.jsxs)("div",{className:"flex flex-col items-center",children:[(0,ab.jsx)("div",{className:"text-2xl font-bold",children:(null===(t=a.talents)||void 0===t?void 0:t.length)||0}),(0,ab.jsx)("div",{className:"text-sm",children:"Skills"})]})]})]}),(0,ab.jsx)("div",{className:"space-y-6",children:(0,ab.jsxs)("div",{className:"bg-purple-50 p-6 rounded-xl",children:[(0,ab.jsx)("h4",{className:"font-semibold text-purple-800 mb-4",children:"\ud83c\udfaf Talents & Skills"}),a.talents&&a.talents.length>0?(0,ab.jsx)("div",{className:"grid grid-cols-1 gap-3",children:a.talents.map((e,t)=>(0,ab.jsxs)("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg",children:[(0,ab.jsxs)("div",{children:[(0,ab.jsx)("span",{className:"font-medium text-gray-800",children:e.skill}),(0,ab.jsxs)("span",{className:"text-sm text-gray-600 ml-2",children:["(",e.category,")"]})]}),(0,ab.jsx)("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded text-sm",children:e.level})]},t))}):(0,ab.jsx)("p",{className:"text-gray-500",children:"No talents listed yet."})]})})]})]}),(0,ab.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,ab.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:["\ud83c\udfa8 ",a.name,"'s Creative Works"]}),(0,ab.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.length>0?l.map(e=>(0,ab.jsxs)("div",{className:"bg-gray-50 p-6 rounded-xl card-hover",children:[(0,ab.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,ab.jsx)("h4",{className:"font-semibold text-gray-800 text-lg",children:e.title}),(0,ab.jsx)("div",{className:"flex space-x-2",children:e.url&&(0,ab.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700",children:(0,ab.jsx)(Mb,{className:"w-4 h-4"})})})]}),(0,ab.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,ab.jsx)("span",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm",children:e.category}),"Yes"===e.collaboration?(0,ab.jsx)("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm",children:"\ud83e\udd1d Open for Collaboration"}):(0,ab.jsx)("span",{className:"bg-gray-200 text-gray-700 px-3 py-1 rounded-full text-sm",children:"\ud83d\udccb Showcase"})]}),(0,ab.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:e.description}),(0,ab.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-400",children:[(0,ab.jsxs)("span",{children:["\ud83d\udcc5 ",new Date(e.createdAt).toLocaleDateString()]}),(0,ab.jsxs)("span",{children:["\ud83d\udc41\ufe0f ",e.views||0," views"]})]}),"Yes"===e.collaboration&&s&&s.id!==a.id&&(0,ab.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,ab.jsx)("button",{onClick:()=>i("messages",a.id),className:"w-full bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm transition-colors",children:"\ud83e\udd1d Start Collaboration"})})]},e.id)):(0,ab.jsxs)("div",{className:"col-span-full text-center py-12",children:[(0,ab.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udfa8"}),(0,ab.jsx)("p",{className:"text-gray-500 mb-4",children:"No works uploaded yet"}),(0,ab.jsx)("p",{className:"text-gray-400 text-sm",children:"This artist hasn't shared any works yet."})]})})]})]}):(0,ab.jsxs)("div",{className:"text-center py-12",children:[(0,ab.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udc64"}),(0,ab.jsx)("p",{className:"text-gray-500 mb-4",children:"Artist not found"}),(0,ab.jsx)("button",{onClick:()=>i("explore"),className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg transition-colors",children:"Back to Explore"})]})},$b=hb("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),qb=hb("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),Hb=hb("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Wb=e=>{let{onNavigate:t}=e;const{currentUser:n}=lb(),[i,s]=(0,r.useState)([]),[a,o]=(0,r.useState)(null),[l,c]=(0,r.useState)([]),[u,h]=(0,r.useState)(""),[d,f]=(0,r.useState)(!0),[p,m]=(0,r.useState)({});(0,r.useEffect)(()=>{(async()=>{if(n)try{const e=Lm(sb,"users"),t=(await Vg(e)).docs.map(e=>({id:e.id,...e.data()})),r=t.filter(e=>e.id!==n.id).map(e=>({id:e.id,name:e.name,photo:e.photo,primaryCategory:e.primaryCategory,isOnline:e.isOnline||!1,lastMessage:"Start a conversation!",lastMessageTime:(new Date).toISOString(),unreadCount:0}));s(r),r.length>0&&o(r[0])}catch(e){console.error("Error fetching conversations:",e),s([])}finally{f(!1)}else f(!1)})()},[n]),(0,r.useEffect)(()=>{if(!n)return;const e=qg(kg(Lm(sb,"messages"),_g("participants","array-contains",n.id),Ig("timestamp","desc")),e=>{const t=e.docs.map(e=>({id:e.id,...e.data()})),r={};i.forEach(e=>{const i=t.filter(t=>{var r;return t.participants.includes(e.id)&&t.participants.includes(n.id)&&t.senderId!==n.id&&!(null!==(r=t.readBy)&&void 0!==r&&r.includes(n.id))});r[e.id]=i.length}),m(r),s(e=>e.map(e=>({...e,unreadCount:r[e.id]||0})))},e=>{console.error("Error listening to messages for unread counts:",e)});return()=>e()},[n,i]),(0,r.useEffect)(()=>{if(!a||!n)return;console.log("Setting up message listener for:",{currentUser:n.id,selectedConversation:a.id});const e=Lm(sb,"messages");try{const t=qg(kg(e,_g("participants","array-contains",n.id),Ig("timestamp","asc")),e=>{console.log("Snapshot received with",e.docs.length,"messages");const t=e.docs.map(e=>({id:e.id,...e.data()}));console.log("All messages:",t);const r=t.filter(e=>e.participants.includes(a.id)&&e.participants.includes(n.id));console.log("Filtered messages for conversation:",r),c(r)},e=>{console.error("Error listening to messages:",e),console.log("Message listener error details:",e)});return()=>{console.log("Cleaning up message listener"),t()}}catch(t){console.error("Error setting up message listener:",t)}},[a,n]);const g=async()=>{if(!u.trim()||!a||!n)return;const e=u.trim();h("");try{const t={senderId:n.id,receiverId:a.id,participants:[n.id,a.id].sort(),content:e,timestamp:(new Date).toISOString(),type:"text",senderName:n.name,readBy:[n.id]};console.log("Sending message:",t);const r=await $g(Lm(sb,"messages"),t);console.log("Message sent successfully with ID:",r.id),s(t=>t.map(t=>t.id===a.id?{...t,lastMessage:e,lastMessageTime:(new Date).toISOString()}:t))}catch(t){console.error("Error sending message:",t),alert("Error sending message. Please try again."),h(e)}};return n?d?(0,ab.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,ab.jsx)("div",{className:"spinner"}),(0,ab.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading messages..."})]}):(0,ab.jsxs)("div",{className:"bg-white rounded-xl shadow-lg h-[600px] flex fade-in",children:[(0,ab.jsxs)("div",{className:"w-1/3 border-r border-gray-200",children:[(0,ab.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,ab.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"\ud83d\udcac Messages"}),(0,ab.jsxs)("div",{className:"relative",children:[(0,ab.jsx)($b,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,ab.jsx)("input",{type:"text",placeholder:"Search conversations...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),(0,ab.jsx)("div",{className:"overflow-y-auto h-[calc(600px-80px)]",children:i.length>0?i.map(e=>(0,ab.jsx)("div",{onClick:()=>(async e=>{if(o(e),e.unreadCount>0)try{const t=kg(Lm(sb,"messages"),_g("participants","array-contains",n.id)),r=(await Vg(t)).docs.map(e=>({id:e.id,...e.data()})).filter(t=>{var r;return t.participants.includes(e.id)&&t.participants.includes(n.id)&&t.senderId!==n.id&&!(null!==(r=t.readBy)&&void 0!==r&&r.includes(n.id))}).map(async e=>{const t=Mm(sb,"messages",e.id),r=e.readBy||[];r.includes(n.id)||await zg(t,{readBy:[...r,n.id]})});await Promise.all(r),s(t=>t.map(t=>t.id===e.id?{...t,unreadCount:0}:t))}catch(t){console.error("Error marking messages as read:",t)}})(e),className:"p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 transition-colors "+((null===a||void 0===a?void 0:a.id)===e.id?"bg-purple-50 border-l-4 border-l-purple-500":""),children:(0,ab.jsxs)("div",{className:"flex items-center space-x-3",children:[e.photo?(0,ab.jsx)("img",{src:e.photo,alt:e.name,className:"profile-photo",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):(0,ab.jsx)("div",{className:"profile-photo bg-purple-100 flex items-center justify-center",children:(0,ab.jsx)(pb,{className:"text-purple-600"})}),(0,ab.jsx)("div",{className:"profile-photo bg-purple-100 flex items-center justify-center",style:{display:"none"},children:(0,ab.jsx)(pb,{className:"text-purple-600"})}),(0,ab.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,ab.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ab.jsx)("h3",{className:"font-semibold text-gray-800 truncate",children:e.name}),(0,ab.jsxs)("div",{className:"flex items-center space-x-2",children:[e.isOnline&&(0,ab.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,ab.jsx)(qb,{className:"w-4 h-4 text-gray-400"})]})]}),(0,ab.jsx)("p",{className:"text-sm text-gray-600 truncate",children:e.primaryCategory}),(0,ab.jsx)("p",{className:"text-xs text-gray-500 truncate",children:e.lastMessage}),(0,ab.jsx)("p",{className:"text-xs text-gray-400",children:new Date(e.lastMessageTime).toLocaleTimeString()})]}),e.unreadCount>0&&(0,ab.jsx)("div",{className:"bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:e.unreadCount})]})},e.id)):(0,ab.jsxs)("div",{className:"text-center py-8",children:[(0,ab.jsx)("div",{className:"text-4xl mb-3",children:"\ud83d\udcac"}),(0,ab.jsx)("p",{className:"text-gray-500 mb-2",children:"No conversations yet!"}),(0,ab.jsx)("p",{className:"text-gray-400 text-sm",children:"Start chatting with other artists."})]})})]}),(0,ab.jsx)("div",{className:"flex-1 flex flex-col",children:a?(0,ab.jsxs)(ab.Fragment,{children:[(0,ab.jsx)("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:(0,ab.jsxs)("div",{className:"flex items-center space-x-3",children:[a.photo?(0,ab.jsx)("img",{src:a.photo,alt:a.name,className:"profile-photo",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):(0,ab.jsx)("div",{className:"profile-photo bg-purple-100 flex items-center justify-center",children:(0,ab.jsx)(pb,{className:"text-purple-600"})}),(0,ab.jsx)("div",{className:"profile-photo bg-purple-100 flex items-center justify-center",style:{display:"none"},children:(0,ab.jsx)(pb,{className:"text-purple-600"})}),(0,ab.jsxs)("div",{className:"flex-1",children:[(0,ab.jsx)("h3",{className:"font-semibold text-gray-800",children:a.name}),(0,ab.jsxs)("p",{className:"text-sm text-gray-600",children:[a.primaryCategory," Artist"]})]}),(0,ab.jsxs)("div",{className:"flex items-center space-x-2",children:[a.isOnline&&(0,ab.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,ab.jsx)("span",{className:"text-sm text-gray-500",children:a.isOnline?"Online":"Offline"}),(0,ab.jsx)("button",{onClick:()=>t("artist-profile",a.id),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm transition-colors",children:"View Profile"})]})]})}),(0,ab.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:l.length>0?l.map(e=>(0,ab.jsx)("div",{className:"flex "+(e.senderId===n.id?"justify-end":"justify-start"),children:(0,ab.jsxs)("div",{className:"max-w-xs lg:max-w-md px-4 py-2 rounded-lg "+(e.senderId===n.id?"bg-purple-600 text-white":"bg-gray-200 text-gray-800"),children:[(0,ab.jsx)("p",{className:"text-sm",children:e.content}),(0,ab.jsx)("p",{className:"text-xs mt-1 "+(e.senderId===n.id?"text-purple-200":"text-gray-500"),children:new Date(e.timestamp).toLocaleTimeString()})]})},e.id)):(0,ab.jsxs)("div",{className:"text-center py-8",children:[(0,ab.jsx)("div",{className:"text-4xl mb-3",children:"\ud83d\udcac"}),(0,ab.jsx)("p",{className:"text-gray-500 mb-2",children:"No messages yet!"}),(0,ab.jsxs)("p",{className:"text-gray-400 text-sm",children:["Start the conversation with ",a.name,"."]})]})}),(0,ab.jsxs)("div",{className:"p-4 border-t border-gray-200",children:[(0,ab.jsx)("div",{className:"flex space-x-3 mb-2",children:(0,ab.jsx)("button",{onClick:async()=>{if(a&&n)try{const e={senderId:n.id,receiverId:a.id,participants:[n.id,a.id].sort(),content:`Test message from ${n.name} at ${(new Date).toLocaleTimeString()}`,timestamp:(new Date).toISOString(),type:"text",senderName:n.name,readBy:[n.id]};console.log("Sending test message:",e);const t=await $g(Lm(sb,"messages"),e);console.log("Test message sent with ID:",t.id),alert("Test message sent! Check console for details.")}catch(e){console.error("Error sending test message:",e),alert("Error sending test message: "+e.message)}},className:"bg-yellow-600 hover:bg-yellow-700 text-white px-3 py-2 rounded-lg text-sm transition-colors",children:"\ud83e\uddea Test Message"})}),(0,ab.jsxs)("div",{className:"flex space-x-3",children:[(0,ab.jsx)("input",{type:"text",value:u,onChange:e=>h(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),g())},placeholder:"Type your message...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),(0,ab.jsx)("button",{onClick:g,disabled:!u.trim(),className:"bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg transition-colors flex items-center",children:(0,ab.jsx)(Hb,{className:"w-4 h-4"})})]})]})]}):(0,ab.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,ab.jsxs)("div",{className:"text-center",children:[(0,ab.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udcac"}),(0,ab.jsx)("p",{className:"text-gray-500 mb-2",children:"Select a conversation to start chatting"}),(0,ab.jsx)("p",{className:"text-gray-400 text-sm",children:"Choose from the list on the left"})]})})})]}):(0,ab.jsxs)("div",{className:"text-center py-12",children:[(0,ab.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udd12"}),(0,ab.jsx)("p",{className:"text-gray-500 mb-4",children:"Please log in to view messages"}),(0,ab.jsx)("button",{onClick:()=>t("login"),className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg transition-colors",children:"Login"})]})},Kb=e=>{let{isLoading:t}=e;return t?(0,ab.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50",children:(0,ab.jsxs)("div",{className:"bg-white rounded-xl p-8 flex flex-col items-center space-y-4 shadow-2xl",children:[(0,ab.jsx)("div",{className:"spinner"}),(0,ab.jsx)("span",{className:"text-gray-700 font-medium",children:"Loading amazing content..."})]})}):null},Gb=e=>{let{message:t,type:n="info",onClose:i}=e;return(0,r.useEffect)(()=>{const e=setTimeout(()=>{i()},5e3);return()=>clearTimeout(e)},[i]),(0,ab.jsx)("div",{className:`notification ${n} show`,children:(0,ab.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ab.jsx)("span",{children:t}),(0,ab.jsx)("button",{onClick:i,className:"ml-4 text-white hover:text-gray-200",children:(0,ab.jsx)(Eb,{className:"w-4 h-4"})})]})})},Qb=e=>{let{onClose:t,onSuccess:n}=e;const{currentUser:i,refreshUserData:s}=lb(),[a,o]=(0,r.useState)({skill:"",category:"Visual Arts",level:"Intermediate"}),[l,c]=(0,r.useState)(!1),u=e=>{const{name:t,value:n}=e.target;o(e=>({...e,[t]:n}))};return i?(0,ab.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ab.jsxs)("div",{className:"bg-white rounded-xl p-8 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,ab.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ab.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"\ud83c\udfaf Add Your Talent"}),(0,ab.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 transition-colors",children:(0,ab.jsx)(Eb,{className:"w-6 h-6"})})]}),(0,ab.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),i){c(!0);try{const e={skill:a.skill,category:a.category,level:a.level},r=Mm(sb,"users",i.id);await zg(r,{talents:Kg(e)}),await s(),n&&n(),t()}catch(r){console.error("Error adding talent:",r),alert("Error adding talent. Please try again.")}finally{c(!1)}}},className:"space-y-6",children:[(0,ab.jsxs)("div",{children:[(0,ab.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Skill/Talent *"}),(0,ab.jsx)("input",{type:"text",name:"skill",value:a.skill,onChange:u,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"e.g., Digital Painting, Guitar, Creative Writing"})]}),(0,ab.jsxs)("div",{children:[(0,ab.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),(0,ab.jsx)("select",{name:"category",value:a.category,onChange:u,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:["Visual Arts","Music","Writing","Photography","Dance","Film","Design","Crafts","Technology","Other"].map(e=>(0,ab.jsx)("option",{value:e,children:e},e))})]}),(0,ab.jsxs)("div",{children:[(0,ab.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Skill Level *"}),(0,ab.jsx)("select",{name:"level",value:a.level,onChange:u,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:["Beginner","Intermediate","Advanced","Professional"].map(e=>(0,ab.jsx)("option",{value:e,children:e},e))})]}),(0,ab.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,ab.jsx)("h3",{className:"font-medium text-purple-800 mb-2",children:"\ud83d\udca1 Tips for adding talents:"}),(0,ab.jsxs)("ul",{className:"text-sm text-purple-700 space-y-1",children:[(0,ab.jsx)("li",{children:"\u2022 Be specific about your skills"}),(0,ab.jsx)("li",{children:"\u2022 Include both technical and creative abilities"}),(0,ab.jsx)("li",{children:"\u2022 Honest skill levels help with better matching"}),(0,ab.jsx)("li",{children:"\u2022 You can add multiple talents"})]})]}),(0,ab.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,ab.jsx)("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,ab.jsx)("button",{type:"submit",disabled:l,className:"flex-1 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg transition-colors flex items-center justify-center",children:l?(0,ab.jsxs)(ab.Fragment,{children:[(0,ab.jsx)("div",{className:"spinner mr-2"}),"Adding..."]}):(0,ab.jsxs)(ab.Fragment,{children:[(0,ab.jsx)(Db,{className:"w-4 h-4 mr-2"}),"Add Talent"]})})]})]})]})}):(0,ab.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ab.jsx)("div",{className:"bg-white rounded-xl p-8 max-w-md w-full mx-4",children:(0,ab.jsxs)("div",{className:"text-center",children:[(0,ab.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udd12"}),(0,ab.jsx)("p",{className:"text-gray-500 mb-4",children:"Please log in to add talents"}),(0,ab.jsx)("button",{onClick:t,className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg transition-colors",children:"Close"})]})})})},Yb=hb("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),Xb=e=>{let{onClose:t,onSuccess:n}=e;const{currentUser:i,refreshUserData:s}=lb(),[a,o]=(0,r.useState)({title:"",category:"Visual Arts",description:"",url:"",collaboration:"No"}),[l,c]=(0,r.useState)(!1),u=e=>{const{name:t,value:n}=e.target;o(e=>({...e,[t]:n}))};return i?(0,ab.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ab.jsxs)("div",{className:"bg-white rounded-xl p-8 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,ab.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ab.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"\ud83c\udfa8 Upload Your Work"}),(0,ab.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 transition-colors",children:(0,ab.jsx)(Eb,{className:"w-6 h-6"})})]}),(0,ab.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),i){c(!0);try{const e={...a,userId:i.id,userName:i.name,createdAt:(new Date).toISOString(),views:0,likes:0};await $g(Lm(sb,"works"),e),await s(),n&&n(),t()}catch(r){console.error("Error uploading work:",r),alert("Error uploading work. Please try again.")}finally{c(!1)}}},className:"space-y-6",children:[(0,ab.jsxs)("div",{children:[(0,ab.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Work Title *"}),(0,ab.jsx)("input",{type:"text",name:"title",value:a.title,onChange:u,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your work title"})]}),(0,ab.jsxs)("div",{children:[(0,ab.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),(0,ab.jsx)("select",{name:"category",value:a.category,onChange:u,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:["Visual Arts","Music","Writing","Photography","Dance","Film","Design","Crafts"].map(e=>(0,ab.jsx)("option",{value:e,children:e},e))})]}),(0,ab.jsxs)("div",{children:[(0,ab.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),(0,ab.jsx)("textarea",{name:"description",value:a.description,onChange:u,required:!0,rows:"4",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Describe your work, inspiration, techniques used..."})]}),(0,ab.jsxs)("div",{children:[(0,ab.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Work URL (Optional)"}),(0,ab.jsxs)("div",{className:"relative",children:[(0,ab.jsx)(Yb,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,ab.jsx)("input",{type:"url",name:"url",value:a.url,onChange:u,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"https://example.com/your-work"})]})]}),(0,ab.jsxs)("div",{children:[(0,ab.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Collaboration Status"}),(0,ab.jsxs)("div",{className:"space-y-2",children:[(0,ab.jsxs)("label",{className:"flex items-center",children:[(0,ab.jsx)("input",{type:"radio",name:"collaboration",value:"No",checked:"No"===a.collaboration,onChange:u,className:"mr-2"}),(0,ab.jsx)("span",{className:"text-sm text-gray-700",children:"Showcase Only"})]}),(0,ab.jsxs)("label",{className:"flex items-center",children:[(0,ab.jsx)("input",{type:"radio",name:"collaboration",value:"Yes",checked:"Yes"===a.collaboration,onChange:u,className:"mr-2"}),(0,ab.jsx)("span",{className:"text-sm text-gray-700",children:"Open for Collaboration"})]})]})]}),(0,ab.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,ab.jsx)("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,ab.jsx)("button",{type:"submit",disabled:l,className:"flex-1 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg transition-colors flex items-center justify-center",children:l?(0,ab.jsxs)(ab.Fragment,{children:[(0,ab.jsx)("div",{className:"spinner mr-2"}),"Uploading..."]}):(0,ab.jsxs)(ab.Fragment,{children:[(0,ab.jsx)(Lb,{className:"w-4 h-4 mr-2"}),"Upload Work"]})})]})]})]})}):(0,ab.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ab.jsx)("div",{className:"bg-white rounded-xl p-8 max-w-md w-full mx-4",children:(0,ab.jsxs)("div",{className:"text-center",children:[(0,ab.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udd12"}),(0,ab.jsx)("p",{className:"text-gray-500 mb-4",children:"Please log in to upload works"}),(0,ab.jsx)("button",{onClick:t,className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg transition-colors",children:"Close"})]})})})},Jb=e=>{let{onClose:t,onSuccess:n}=e;const{currentUser:i,refreshUserData:s}=lb(),[a,o]=(0,r.useState)({name:"",email:"",primaryCategory:"Visual Arts",photo:""}),[l,c]=(0,r.useState)(!1);(0,r.useEffect)(()=>{i&&o({name:i.name||"",email:i.email||"",primaryCategory:i.primaryCategory||"Visual Arts",photo:i.photo||""})},[i]);const u=e=>{const{name:t,value:n}=e.target;o(e=>({...e,[t]:n}))};return i?(0,ab.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ab.jsxs)("div",{className:"bg-white rounded-xl p-8 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,ab.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ab.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"\u270f\ufe0f Edit Profile"}),(0,ab.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 transition-colors",children:(0,ab.jsx)(Eb,{className:"w-6 h-6"})})]}),(0,ab.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),i){c(!0);try{const e=Mm(sb,"users",i.id);await zg(e,{name:a.name,primaryCategory:a.primaryCategory,photo:a.photo||null}),await s(),n&&n(),t()}catch(r){console.error("Error updating profile:",r),alert("Error updating profile. Please try again.")}finally{c(!1)}}},className:"space-y-6",children:[(0,ab.jsxs)("div",{children:[(0,ab.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,ab.jsx)(pb,{className:"w-4 h-4 mr-2"}),"\ud83d\udc64 Full Name"]}),(0,ab.jsx)("input",{type:"text",name:"name",value:a.name,onChange:u,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your full name"})]}),(0,ab.jsxs)("div",{children:[(0,ab.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,ab.jsx)(_b,{className:"w-4 h-4 mr-2"}),"\ud83d\udce7 Email"]}),(0,ab.jsx)("input",{type:"email",name:"email",value:a.email,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100 text-gray-500"}),(0,ab.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),(0,ab.jsxs)("div",{children:[(0,ab.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,ab.jsx)(wb,{className:"w-4 h-4 mr-2"}),"\ud83c\udfa8 Primary Category"]}),(0,ab.jsx)("select",{name:"primaryCategory",value:a.primaryCategory,onChange:u,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[{value:"Music",label:"\ud83c\udfb5 Music"},{value:"Visual Arts",label:"\ud83c\udfa8 Visual Arts"},{value:"Writing",label:"\u270d\ufe0f Writing"},{value:"Dance",label:"\ud83d\udc83 Dance"},{value:"Photography",label:"\ud83d\udcf8 Photography"},{value:"Video Production",label:"\ud83c\udfac Video Production"},{value:"Voice Acting",label:"\ud83c\udfa4 Voice Acting"},{value:"Graphic Design",label:"\ud83d\udd8c\ufe0f Graphic Design"},{value:"Digital Art",label:"\ud83d\udcbb Digital Art"},{value:"Animation",label:"\ud83c\udf9e\ufe0f Animation"}].map(e=>(0,ab.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,ab.jsxs)("div",{children:[(0,ab.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Photo URL (Optional)"}),(0,ab.jsx)("input",{type:"url",name:"photo",value:a.photo,onChange:u,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"https://example.com/your-photo.jpg"})]}),(0,ab.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,ab.jsx)("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,ab.jsx)("button",{type:"submit",disabled:l,className:"flex-1 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg transition-colors flex items-center justify-center",children:l?(0,ab.jsxs)(ab.Fragment,{children:[(0,ab.jsx)("div",{className:"spinner mr-2"}),"Updating..."]}):(0,ab.jsxs)(ab.Fragment,{children:[(0,ab.jsx)(pb,{className:"w-4 h-4 mr-2"}),"Update Profile"]})})]})]})]})}):(0,ab.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ab.jsx)("div",{className:"bg-white rounded-xl p-8 max-w-md w-full mx-4",children:(0,ab.jsxs)("div",{className:"text-center",children:[(0,ab.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udd12"}),(0,ab.jsx)("p",{className:"text-gray-500 mb-4",children:"Please log in to edit your profile"}),(0,ab.jsx)("button",{onClick:t,className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg transition-colors",children:"Close"})]})})})};const Zb=function(){const[e,t]=(0,r.useState)("home"),[n,i]=(0,r.useState)(null),[s,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(null),[h,d]=(0,r.useState)(!1),[f,p]=(0,r.useState)(!1),[m,g]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const e=localStorage.getItem("kalakriti_theme");e&&a("dark"===e)},[]),(0,r.useEffect)(()=>{document.body.classList.toggle("dark",s),localStorage.setItem("kalakriti_theme",s?"dark":"light")},[s]);const y=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;"add-talent"===e?d(!0):"upload-work"===e?p(!0):"edit-profile"===e?g(!0):(t(e),i(n)),n&&console.log("Navigation params:",n)},v=function(e){u({message:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info"}),setTimeout(()=>u(null),5e3)},b=()=>{v("Action completed successfully! \ud83c\udf89","success"),"profile"===e&&(t("home"),setTimeout(()=>t("profile"),100))};return(0,ab.jsx)(cb,{children:(0,ab.jsxs)("div",{className:"bg-gray-50 min-h-screen dark:bg-gray-900",children:[(0,ab.jsx)(Kb,{isLoading:o}),(0,ab.jsx)(vb,{onNavigate:y,onToggleTheme:()=>{a(!s),v(`Switched to ${s?"light":"dark"} theme! \ud83c\udfa8`,"success")},isDarkMode:s}),(0,ab.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(()=>{switch(e){case"home":default:return(0,ab.jsx)(kb,{onNavigate:y});case"explore":return(0,ab.jsx)(jb,{onNavigate:y});case"profile":return(0,ab.jsx)(Vb,{onNavigate:y});case"artist-profile":return(0,ab.jsx)(Bb,{artistId:n,onNavigate:y});case"messages":return(0,ab.jsx)(Wb,{onNavigate:y});case"login":return(0,ab.jsx)(Sb,{onClose:()=>y("home"),onNavigate:y});case"register":return(0,ab.jsx)(Cb,{onClose:()=>y("home"),onNavigate:y})}})()}),h&&(0,ab.jsx)(Qb,{onClose:()=>d(!1),onSuccess:b}),f&&(0,ab.jsx)(Xb,{onClose:()=>p(!1),onSuccess:b}),m&&(0,ab.jsx)(Jb,{onClose:()=>g(!1),onSuccess:b}),c&&(0,ab.jsx)(Gb,{message:c.message,type:c.type,onClose:()=>u(null)})]})})};i.createRoot(document.getElementById("root")).render((0,ab.jsx)(r.StrictMode,{children:(0,ab.jsx)(Zb,{})}))})();
//# sourceMappingURL=main.f0c30f4c.js.map